<!DOCTYPE html>
<html>
	<head>
		
<title>Vue-CLI-Quiet</title>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="shortcut icon" type="image/x-icon" href="/image/favicon.ico">

<link rel="stylesheet" href="/css/index.css">


<meta name="keywords" content="hexo主题,hexo扁平化主题,Quiet主题">
<meta name="description" content="描述">


<script src="/js/jquery.min.js"></script>


<script src="/js/index.js"></script>


<script src="/js/fancybox.umd.js"></script>


<script src="/js/fancybox-images.js"></script>


<script src="/js/gitalk.min.js"></script>


<script src="/js/hljs.min.js"></script>
 
<script>hljs.highlightAll();</script>

	<meta name="generator" content="Hexo 6.3.0"></head>

	<body>
		
	<div class="header">
		<div class="header-top" id="header-top">
			<div class="h-left">
				<a href="/">
					<img src="/image/logo.png" alt="Quiet">
				</a>
			</div>
			<div class="h-right">
				<ul>
					
						
								<li>
									<a href="/">
										HOME
									</a>
									<span class="dot"></span>
								</li>
								
									
						
								<li>
									<a href="/archives">
										ARCHIVE
									</a>
									<span class="dot"></span>
								</li>
								
									
						
								<li>
									<a href="/categories">
										CATEGORIES
									</a>
									<span class="dot"></span>
								</li>
								
									
						
								<li>
									<a href="/tags">
										TAGS
									</a>
									<span class="dot"></span>
								</li>
								
									
						
								<li>
									<a href="/links">
										LINKS
									</a>
									<span class="dot"></span>
								</li>
								
									
						
								<li>
									<a href="/about">
										ABOUT
									</a>
									<span class="dot"></span>
								</li>
								
									
				</ul>
			</div>
			<div class="h-right-close">
				<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24">
					<path fill="none" d="M0 0h24v24H0z" />
					<path d="M3 4h18v2H3V4zm0 7h18v2H3v-2zm0 7h18v2H3v-2z" fill="rgba(68,68,68,1)" />
				</svg>
			</div>
		</div>
	</div>
	<div class="sidebar">
    <div class="topo">
        <h2>Joey</h2>
    </div>
    <ul>
        
        <li>
            <a href="/">HOME</a>
        </li>
        
        <li>
            <a href="/archives">ARCHIVE</a>
        </li>
        
        <li>
            <a href="/categories">CATEGORIES</a>
        </li>
        
        <li>
            <a href="/tags">TAGS</a>
        </li>
        
        <li>
            <a href="/links">LINKS</a>
        </li>
        
        <li>
            <a href="/about">ABOUT</a>
        </li>
        
    </ul>
    <div class="my_foot">
        
        <a target="_blank" rel="noopener" href="https://github.com/79E/hexo-theme-quiet">
            <img src="https://cdn.jsdelivr.net/gh/duogongneng/MyBlogImg/imggithub.png" alt="Quiet主题">
        </a>
        
    </div>
</div>
<div class='shelter'>
</div>
<style>
    .shelter{
        background-color: #333;
        opacity:0.5;
        cursor: pointer;
        display: none; 
        position: fixed;
        left: 0;
        top: 0; 
        right: 0;
        bottom: 0;
        z-index: 1998;
    }
    .sidebar {
        width: 66%;
        height: 100%;
        position: fixed;
        top: 0;
        right: -100%;
        bottom: 0;
        background: #fff;
        z-index: 1999;
        text-align: center;
        box-shadow: -6px 0 20px rgba(98, 94, 94, .815);
    }

    .topo {
        width: 100%;
        height: 200px;
        background: url(https://api.ixiaowai.cn/gqapi/gqapi.php) no-repeat;
        background-size: 100% 100%;
        position: relative;
        display: flex;
        align-items: flex-end
    }

    .topo h2 {
        color: #fff;
        z-index: 1;
        position: relative;
        margin: 0 0 10px 10px;
        font-size: 1.2em;
        box-sizing: border-box
    }

    .topo:before {
        content: '';
        background-image: url(/image/pattern.png);
        background-repeat: repeat;
        height: 100%;
        left: 0;
        position: absolute;
        top: 0;
        width: 100%;
        z-index: 1
    }

    .sidebar ul {
        width: 100%;
        margin-top: 50px
    }

    .sidebar ul li {
        height: 50px;
        list-style: none;
        font-size: 1.2em;
        text-align: right;
        margin-right: 10px
    }

    .sidebar ul li a {
        display: grid;
        color: #5d606a;
        text-overflow: ellipsis;
        width: 100%;
        text-decoration: none
    }

    .my_foot {
        width: 100%;
        padding: 10px;
        margin-bottom: 10px;
        position: absolute;
        bottom: 0
    }

    .my_foot a {
        text-decoration: none;
        margin-right: 10px;
        display: inline-block
    }

    .my_foot a img {
        width: 30px;
        height: 30px
    }
</style>

<script>
    $( function () {
	$( '.h-right-close>svg' )
		.click( function () {
			$( '.sidebar' )
				.animate( {
					right: "0"
				}, 500 );
			$( '.shelter' )
				.fadeIn( "slow" )
		} );
	$( '.shelter' )
		.click( function ( e ) {
			$( '.sidebar' )
				.animate( {
					right: "-100%"
				}, 500 );
			$( '.shelter' )
				.fadeOut( "slow" )
		} )
} )

</script>

<div class="post">
    <div class="post-header-background post-header-img"
    style="background: url('https://api.ixiaowai.cn/gqapi/gqapi.php')" 
>
    <div class="post-header-background-content">
        <ul class="post-header-tag">
            
        </ul>
        
        <h1>Vue-CLI</h1>
        <div class="post-header-info">
            <div class="post-header-info-author">
                
                    <svg t="1604839279282" class="icon" viewBox="0 0 1024 1024" version="1.1"
                        xmlns="http://www.w3.org/2000/svg" p-id="2901" width="20" height="20">
                        <path
                            d="M513 956.3c-247.7 0-448-200.3-448-448S265.3 66.2 513 66.2s448 200.3 448 448-200.3 442.1-448 442.1z m0-830.9c-212.2 0-388.8 170.7-388.8 388.8C124.2 726.3 294.9 903 513 903c212.2 0 388.8-170.7 388.8-388.8S725.2 125.4 513 125.4z m0 430.2c-94.2 0-170.7-76.5-170.7-170.7S418.8 207.8 513 207.8s170.7 76.5 170.7 170.7S607.2 555.6 513 555.6z m0-289.1c-64.6 0-112 52.8-112 112s47.4 117.9 112 117.9 112-52.8 112-112-47.4-117.9-112-117.9z m0 689.8c-135.7 0-259-58.7-341.9-158.9l-11.8-17.8 11.8-17.8c76.5-117.9 206.2-188.5 347.8-188.5 135.7 0 265 64.6 341.9 182.6l11.8 17.8-11.8 17.8C778 897.1 648.7 956.3 513 956.3zM230.3 773.2C300.9 849.7 406.9 897 513 897c112 0 218.1-47.4 288.6-129.8-70.5-88.2-170.7-135.6-282.7-135.6s-218.1 53.3-288.6 141.6z"
                            p-id="2902" fill="#ffffff"></path>
                    </svg>
                    
                <span class="post-header-info-author-text"> <a href="../../about">Joey</a></span>
                <div class="post-header-info-author-categories">
                    
                </div>
                <p>2022-11-24 19:17:16</p>
            </div>
        </div>
    </div>
</div>
    <div class="post-content" id="content">
  
  <div id="article" class="post-content-info">
    

    <h2 id="创建脚手架"><a href="#创建脚手架" class="headerlink" title="创建脚手架"></a>创建脚手架</h2><pre><code class="sql">1. 如出现下载缓慢请配置 npm 淘宝镜像：
npm config set registry https://registry.npm.taobao.org
</code></pre>
<p>脚手架官网<a target="_blank" rel="noopener" href="https://cli.vuejs.org/zh/">https://cli.vuejs.org/zh/</a><br>具体步骤:<br>第一步（仅第一次执行）：全局安装@vue&#x2F;cli。</p>
<pre><code class="sql">npm install -g @vue/cli
</code></pre>
<p>第二步：切换到你要创建项目的目录，然后使用命令创建项目</p>
<pre><code class="sql">vue create xxxx
</code></pre>
<p>第三步：启动项目</p>
<pre><code class="sql">npm run serve
</code></pre>
<p><img src="https://cdn.jsdelivr.net/gh/roudoukou/roudoukou.github.io/blog-img/Fm3qVRjLCTGc2B4gWx-Q4Gn6obIN.png"><br>访问<a target="_blank" rel="noopener" href="http://localhost:8080/">http://localhost:8080/</a>, 可以看见脚手架为我们默认创建一个 HelloWorld 组件<br><img src="https://cdn.jsdelivr.net/gh/roudoukou/roudoukou.github.io/blog-img/FuJydMREZN8xmlI3vLNNaufnQAY5.png"></p>
<p>脚手架文件结构</p>
<pre><code class="javascript">├── node_modules
├── public
│   ├── favicon.ico: 页签图标
│   └── index.html: 主页面
├── src
│   ├── assets: 存放静态资源
│   │   └── logo.png
│   │── component: 存放组件
│   │   └── HelloWorld.vue
│   │── App.vue: 汇总所有组件
│   │── main.js: 入口文件
├── .gitignore: git版本管制忽略的配置
├── babel.config.js: babel的配置文件
├── package.json: 应用包配置文件
├── README.md: 应用描述文件
├── package-lock.json：包版本控制文件
</code></pre>
<h2 id="脚手架运行项目的报错"><a href="#脚手架运行项目的报错" class="headerlink" title="脚手架运行项目的报错"></a>脚手架运行项目的报错</h2><p>xxx should always be multi-word vue&#x2F;multi-word-component-names 报错<br>修改 vue.config.js 文件</p>
<pre><code class="javascript">const &#123; defineConfig &#125; = require(&quot;@vue/cli-service&quot;);
module.exports = defineConfig(&#123;
  transpileDependencies: true,
  lintOnSave: false, // 关闭语法检查
&#125;);
</code></pre>
<p>如果编写了代码, 左侧行数会出现一个红色小箭头, 这是 git 在记录<br><img src="https://cdn.jsdelivr.net/gh/roudoukou/roudoukou.github.io/blog-img/FtYMeCzhXluCOq-ERGMnhB5_VQ29.png"><img src="https://cdn.jsdelivr.net/gh/roudoukou/roudoukou.github.io/blog-img/FuVbh3VjUr6Ppg1MJk8G5eyZfeyo.png"><br>可以按 Ctrl+, 打开设置, 搜索 git:Enabled, 关闭 Git<br><img src="https://cdn.jsdelivr.net/gh/roudoukou/roudoukou.github.io/blog-img/Flwk2uLUGWrpRA3WdYhnIVVNhVzW.png"></p>
<h2 id="部署自己的项目到脚手架"><a href="#部署自己的项目到脚手架" class="headerlink" title="部署自己的项目到脚手架"></a>部署自己的项目到脚手架</h2><p><img src="https://cdn.jsdelivr.net/gh/roudoukou/roudoukou.github.io/blog-img/FqY1hF_NE47kSXNRtact-6zQc4vs.png"><br>School.vue</p>
<pre><code class="vue">&lt;template&gt;
   
  &lt;div&gt;
       
    &lt;h2&gt;学校名称: &#123;&#123; name &#125;&#125;&lt;/h2&gt;
       
    &lt;h2&gt;学校地址: &#123;&#123; address &#125;&#125;&lt;/h2&gt;
        &lt;button @click=&quot;showName&quot;&gt;点我显示名称&lt;/button&gt;  
  &lt;/div&gt;
&lt;/template&gt;

&lt;script&gt;
export default &#123;
  name: &quot;School&quot;,
  data() &#123;
    return &#123;
      name: &quot;尚硅谷&quot;,
      address: &quot;北京&quot;,
    &#125;;
  &#125;,
  methods: &#123;
    showName() &#123;
      alert(this.name);
    &#125;,
  &#125;,
&#125;;
&lt;/script&gt;

&lt;style&gt;&lt;/style&gt;
</code></pre>
<p>Student.vue</p>
<pre><code class="vue">&lt;template&gt;
   
  &lt;div&gt;
       
    &lt;h2&gt;学生姓名: &#123;&#123; name &#125;&#125;&lt;/h2&gt;
       
    &lt;h2&gt;学生年龄: &#123;&#123; age &#125;&#125;&lt;/h2&gt;
     
  &lt;/div&gt;
&lt;/template&gt;

&lt;script&gt;
export default &#123;
  name: &quot;Student&quot;,
  data() &#123;
    return &#123;
      name: &quot;肉豆蔻&quot;,
      age: 18,
    &#125;;
  &#125;,
&#125;;
&lt;/script&gt;

&lt;style&gt;&lt;/style&gt;
</code></pre>
<p>App.vue</p>
<pre><code class="vue">&lt;template&gt;
   
  &lt;div&gt;    &lt;School&gt;&lt;/School&gt;     &lt;Student&gt;&lt;/Student&gt;  &lt;/div&gt;
&lt;/template&gt;

&lt;script&gt;
import Student from &quot;./components/Student.vue&quot;;
import School from &quot;./components/School.vue&quot;;

export default &#123;
  name: &quot;App&quot;,
  components: &#123;
    Student,
    School,
  &#125;,
&#125;;
&lt;/script&gt;

&lt;style&gt;&lt;/style&gt;
</code></pre>
<p>main.js</p>
<pre><code class="javascript">/* 
    该文件是整个项目的入口文件
*/
//引入Vue
import Vue from &quot;vue&quot;;
//引入App组件, 它是所有组件的父组件
import App from &quot;./App.vue&quot;;

//关闭Vue的生产提示
Vue.config.productionTip = false;

/* 
    关于不同版本的Vue：
    
        1.vue.js与vue.runtime.xxx.js的区别：
                (1).vue.js是完整版的Vue，包含：核心功能+模板解析器。
                (2).vue.runtime.xxx.js是运行版的Vue，只包含：核心功能；没有模板解析器。

        2.因为vue.runtime.xxx.js没有模板解析器，所以不能使用template配置项，需要使用
            render函数接收到的createElement函数去指定具体内容。
*/

//创建vm
new Vue(&#123;
  el: &quot;#app&quot;,
  //
  render: (h) =&gt; h(App),

  // render(createElement) &#123;
  //   return createElement(&#39;h1&#39;, &#39;你好啊&#39;)
  // &#125;

  // template: `
  // &lt;h1&gt;你好啊&lt;/h1&gt;
  // `,
  // components: &#123;
  //   app
  // &#125;
&#125;);
</code></pre>
<p>import Vue from ‘vue’中引入的是 vue 文件夹, 它是由 vue 文件夹中的 module 配置项来决定导入的是哪一个 vue.js<br>runtime.js 相比于 vue.js, 精简了模板解析器, 模板解析器也不会在 webpack 打包的时候被打包进去<br><img src="https://cdn.jsdelivr.net/gh/roudoukou/roudoukou.github.io/blog-img/FlLO83rqx3lhQUEGaWTt9Wpj2GfA.png"></p>
<p>关于不同版本的 Vue</p>
<ol>
<li>vue.js 与 vue.runtime.xxx.js 的区别：<ol>
<li>vue.js 是完整版的 Vue，包含：核心功能 + 模板解析器。</li>
<li>vue.runtime.xxx.js 是运行版的 Vue，只包含：核心功能；没有模板解析器。</li>
</ol>
</li>
<li>因为 vue.runtime.xxx.js 没有模板解析器，所以不能使用 template 这个配置项，需要使用 render 函数接收到的 createElement 函数去指定具体内容。</li>
</ol>
<h2 id="render-函数"><a href="#render-函数" class="headerlink" title="render 函数"></a>render 函数</h2><p>使用 render 渲染函数就可以在 runtime.js 的环境中解析模板, template 在 runtime.js 的环境中没法解析模板, 因为 runtime 剔除了模板引擎</p>
<pre><code class="javascript">// render: h =&gt; h(App),

// render(createElement) &#123;
//   return createElement(&#39;h1&#39;, &#39;你好啊&#39;)
// &#125;

// render: function(createElement) &#123;
//   return createElement(&#39;h1&#39;, &#39;你好啊&#39;)
// &#125;

// render:(createElement) =&gt; createElement(&#39;h1&#39;, &#39;你好啊&#39;)

render: (a) =&gt; a(&quot;h1&quot;, &quot;你好啊&quot;);
</code></pre>
<h2 id="修改默认配置-vue-config-js-配置文件"><a href="#修改默认配置-vue-config-js-配置文件" class="headerlink" title="修改默认配置(vue.config.js 配置文件)"></a>修改默认配置(vue.config.js 配置文件)</h2><p>vue.config.js<br>在 pages 选项中配置的 entry 可以指明 main.js 作为程序的入口, 当然可以设置成其他的, 一般保持默认既可</p>
<pre><code class="javascript">const &#123; defineConfig &#125; = require(&quot;@vue/cli-service&quot;);
module.exports = defineConfig(&#123;
  pages: &#123;
    index: &#123;
      // 配置入口
      entry: &quot;src/main.js&quot;,
    &#125;,
  &#125;,
  transpileDependencies: true,
  lintOnSave: false,
&#125;);
</code></pre>
<ol>
<li>使用 vue inspect &gt; output.js 可以查看到 Vue 脚手架的默认配置。</li>
<li>使用 vue.config.js 可以对脚手架进行个性化定制，详情见：<a target="_blank" rel="noopener" href="https://cli.vuejs.org/zh">https://cli.vuejs.org/zh</a></li>
</ol>
<h2 id="ref-属性"><a href="#ref-属性" class="headerlink" title="ref 属性"></a>ref 属性</h2><ol>
<li>被用来给元素或子组件注册引用信息（id 的替代者）</li>
<li>应用在 html 标签上获取的是真实 DOM 元素，应用在组件标签上是组件实例对象（vc）</li>
<li>使用方式：<ol>
<li>打标识：<h1 ref="xxx">…..</h1> 或 <School ref="xxx"></School></li>
<li>获取：this.$refs.xxx</li>
</ol>
</li>
</ol>
<p>Student.vue</p>
<pre><code class="vue">&lt;template&gt;
   
  &lt;div class=&quot;school&quot;&gt;
       
    &lt;h2&gt;学校名称：&#123;&#123; name &#125;&#125;&lt;/h2&gt;
       
    &lt;h2&gt;学校地址：&#123;&#123; address &#125;&#125;&lt;/h2&gt;
     
  &lt;/div&gt;
&lt;/template&gt;

&lt;script&gt;
export default &#123;
  name: &quot;School&quot;,
  data() &#123;
    return &#123;
      name: &quot;尚硅谷&quot;,
      address: &quot;北京·昌平&quot;,
    &#125;;
  &#125;,
&#125;;
&lt;/script&gt;

&lt;style&gt;
  .school&#123;
    background-color: gray;
  &#125;
&lt;/style&gt;
</code></pre>
<p>App.vue</p>
<pre><code class="vue">&lt;template&gt;
   
  &lt;div&gt;
       
    &lt;h1 v-text=&quot;msg&quot; ref=&quot;title&quot;&gt;&lt;/h1&gt;
        &lt;button ref=&quot;btn&quot; @click=&quot;showDOM&quot;&gt;点我输出上方的DOM元素&lt;/button&gt;    
    &lt;School ref=&quot;sch&quot; /&gt;  
  &lt;/div&gt;
&lt;/template&gt;

&lt;script&gt;
//引入School组件
import School from &quot;./components/School&quot;;

export default &#123;
  name: &quot;App&quot;,
  components: &#123; School &#125;,
  data() &#123;
    return &#123;
      msg: &quot;欢迎学习Vue！&quot;,
    &#125;;
  &#125;,
  methods: &#123;
    showDOM() &#123;
      console.log(this.$refs.title); //真实DOM元素
      console.log(this.$refs.btn); //真实DOM元素
      console.log(this.$refs.sch); //School组件的实例对象（vc）
    &#125;,
  &#125;,
&#125;;
&lt;/script&gt;
</code></pre>
<h2 id="props-配置"><a href="#props-配置" class="headerlink" title="props 配置"></a>props 配置</h2><ol>
<li>功能：让组件接收外部传过来的数据</li>
<li>传递数据：<code>&lt;Demo name=&quot;xxx&quot;/&gt;</code></li>
<li>接收数据：</li>
<li>第一种方式（只接收）：<code>props:[&#39;name&#39;]</code></li>
<li>第二种方式（限制类型）：<code>props:&#123;name:String&#125;</code></li>
<li>第三种方式（限制类型、限制必要性、指定默认值）：</li>
</ol>
<pre><code class="javascript">props:&#123;
    name:&#123;
    type:String, //类型
    required:true, //必要性
    default:&#39;老王&#39; //默认值
    &#125;
&#125;
</code></pre>
<blockquote>
<p>备注：props 是只读的，Vue 底层会监测你对 props 的修改，如果进行了修改，就会发出警告，若业务需求确实需要修改，那么请复制 props 的内容到 data 中一份，然后去修改 data 中的数据。</p>
</blockquote>
<p>Student.vue</p>
<pre><code class="vue">&lt;template&gt;
   
  &lt;div&gt;
       
    &lt;h1&gt;&#123;&#123; msg &#125;&#125;&lt;/h1&gt;
       
    &lt;h2&gt;学生姓名: &#123;&#123; name &#125;&#125;&lt;/h2&gt;
       
    &lt;h2&gt;学生性别: &#123;&#123; sex &#125;&#125;&lt;/h2&gt;
       
    &lt;h2&gt;学生年龄: &#123;&#123; MyAge + 1 &#125;&#125;&lt;/h2&gt;
        &lt;button @click=&quot;updateAge&quot;&gt;点我修改年龄&lt;/button&gt;  
  &lt;/div&gt;
&lt;/template&gt;

&lt;script&gt;
export default &#123;
  name: &quot;Student&quot;,
  data() &#123;
    return &#123;
      msg: &quot;我是一个尚硅谷的学生&quot;,
      MyAge: this.age,
    &#125;;
  &#125;,
  methods: &#123;
    updateAge() &#123;
      this.MyAge++;
    &#125;,
  &#125;, //简单声明接收 // props: [&#39;name&#39;, &#39;sex&#39;, &#39;age&#39;] //接收的同时对数据进行类型限制 // props: &#123; //   name: String, //   sex: String, //   age: Number // &#125; //接收的同时对数据：进行类型限制+默认值的指定+必要性的限制
  props: &#123;
    name: &#123;
      type: String, //name的类型是字符串
      required: true, //name是必要的
    &#125;,
    sex: &#123;
      type: String,
      default: &quot;男&quot;, //默认值
    &#125;,
    age: &#123;
      type: Number,
      default: 20,
    &#125;,
  &#125;,
&#125;;
&lt;/script&gt;
</code></pre>
<p>App.vue</p>
<pre><code class="vue">&lt;template&gt;
   
  &lt;div&gt;    &lt;Student :age=&quot;18&quot; name=&quot;尚硅谷&quot; sex=&quot;男&quot; /&gt;  &lt;/div&gt;
&lt;/template&gt;

&lt;script&gt;
import Student from &quot;./components/Student.vue&quot;;
export default &#123;
  name: &quot;App&quot;,
  components: &#123;
    Student,
  &#125;,
&#125;;
&lt;/script&gt;

&lt;style&gt;&lt;/style&gt;
</code></pre>
<h2 id="mixin-混入"><a href="#mixin-混入" class="headerlink" title="mixin 混入"></a>mixin 混入</h2><ol>
<li>功能：可以把多个组件共用的配置提取成一个混入对象</li>
<li>使用方式：<br>第一步定义混合：</li>
</ol>
<pre><code>&#123;
    data()&#123;....&#125;,
    methods:&#123;....&#125;
    ....
&#125;
</code></pre>
<p>第二步使用混入：<br>全局混入：<code>Vue.mixin(xxx)</code><br>局部混入：<code>mixins:[&#39;xxx&#39;]</code><br>School.vue</p>
<pre><code class="vue">&lt;template&gt;
   
  &lt;div&gt;
       
    &lt;h2 @click=&quot;showName&quot;&gt;学校名称: &#123;&#123; name &#125;&#125;&lt;/h2&gt;
       
    &lt;h2&gt;学校地址: &#123;&#123; address &#125;&#125;&lt;/h2&gt;
     
  &lt;/div&gt;
&lt;/template&gt;

&lt;script&gt;
// import &#123;mixin&#125; from &quot;../mixin&quot;
export default &#123;
  name: &quot;School&quot;,
  data() &#123;
    return &#123;
      name: &quot;尚硅谷&quot;,
      address: &quot;北京&quot;,
    &#125;;
  &#125;, // mixins: [mixin]
&#125;;
&lt;/script&gt;
</code></pre>
<p>Student.vue</p>
<pre><code class="vue">&lt;template&gt;
   
  &lt;div&gt;
       
    &lt;h2 @click=&quot;showName&quot;&gt;学生姓名: &#123;&#123; name &#125;&#125;&lt;/h2&gt;
       
    &lt;h2&gt;学生性别: &#123;&#123; sex &#125;&#125;&lt;/h2&gt;
     
  &lt;/div&gt;
&lt;/template&gt;

&lt;script&gt;
// import &#123;mixin&#125; from &quot;../mixin&quot;
export default &#123;
  name: &quot;Student&quot;,
  data() &#123;
    return &#123;
      name: &quot;张三&quot;,
      sex: &quot;男&quot;,
    &#125;;
  &#125;, // mixins: [mixin],
  mounted() &#123;
    // console.log(&quot;你好啊!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!&quot;);
  &#125;,
&#125;;
&lt;/script&gt;
</code></pre>
<p>App.vue</p>
<pre><code class="vue">&lt;template&gt;
   
  &lt;div&gt;
        &lt;Student /&gt;    
    &lt;hr /&gt;
        &lt;School /&gt;  
  &lt;/div&gt;
&lt;/template&gt;

&lt;script&gt;
import Student from &quot;./components/Student.vue&quot;;
import School from &quot;./components/School.vue&quot;;

export default &#123;
  name: &quot;App&quot;,
  components: &#123;
    Student,
    School,
  &#125;,
&#125;;
&lt;/script&gt;

&lt;style&gt;&lt;/style&gt;
</code></pre>
<p>mixin.js</p>
<pre><code class="javascript">export const mixin = &#123;
  methods: &#123;
    showName() &#123;
      alert(this.name);
    &#125;,
  &#125;,
  mounted() &#123;
    // console.log(&#39;你好啊！&#39;)
  &#125;,
&#125;;

export const mixin2 = &#123;
  data() &#123;
    return &#123;
      x: 999,
      y: 666,
    &#125;;
  &#125;,
&#125;;
</code></pre>
<p>main.js</p>
<pre><code class="javascript">import Vue from &quot;vue&quot;;
import App from &quot;./App&quot;;

import &#123; mixin, mixin2 &#125; from &quot;./mixin&quot;;
Vue.config.productionTip = false;
Vue.mixin(mixin);
Vue.mixin(mixin2);

new Vue(&#123;
  el: &quot;#app&quot;,
  render: (h) =&gt; h(App),
&#125;);
</code></pre>
<h2 id="插件"><a href="#插件" class="headerlink" title="插件"></a>插件</h2><ol>
<li>功能：用于增强 Vue</li>
<li>本质：包含 install 方法的一个对象，install 的第一个参数是 Vue，第二个以后的参数是插件使用者传递的数据。</li>
<li>定义插件：</li>
</ol>
<pre><code class="javascript">对象.install = function (Vue, options) &#123;
    // 1. 添加全局过滤器
    Vue.filter(....)

    // 2. 添加全局指令
    Vue.directive(....)

    // 3. 配置全局混入(合)
    Vue.mixin(....)

    // 4. 添加实例方法
    Vue.prototype.$myMethod = function () &#123;...&#125;
    Vue.prototype.$myProperty = xxxx
&#125;
</code></pre>
<ol start="4">
<li>使用插件：<code>Vue.use()</code></li>
</ol>
<p>Student.vue</p>
<pre><code class="vue">&lt;template&gt;
   
  &lt;div&gt;
       
    &lt;h2&gt;学生姓名: &#123;&#123; name &#125;&#125;&lt;/h2&gt;
       
    &lt;h2&gt;学生性别: &#123;&#123; sex &#125;&#125;&lt;/h2&gt;
            &lt;input type=&quot;text&quot; v-fbind:value=&quot;name&quot; /&gt;  
  &lt;/div&gt;
&lt;/template&gt;

&lt;script&gt;
export default &#123;
  name: &quot;Student&quot;,
  data() &#123;
    return &#123;
      name: &quot;张三&quot;,
      sex: &quot;男&quot;,
    &#125;;
  &#125;,
&#125;;
&lt;/script&gt;
</code></pre>
<p>School.vue</p>
<pre><code class="vue">&lt;template&gt;
   
  &lt;div&gt;
       
    &lt;h2 @click=&quot;test&quot;&gt;学校名称: &#123;&#123; name | mySlice &#125;&#125;&lt;/h2&gt;
       
    &lt;h2&gt;学校地址: &#123;&#123; address &#125;&#125;&lt;/h2&gt;
     
  &lt;/div&gt;
&lt;/template&gt;

&lt;script&gt;
export default &#123;
  name: &quot;School&quot;,
  data() &#123;
    return &#123;
      name: &quot;尚硅谷atguigu&quot;,
      address: &quot;北京&quot;,
    &#125;;
  &#125;,
  methods: &#123;
    test() &#123;
      this.hello();
    &#125;,
  &#125;,
&#125;;
&lt;/script&gt;
</code></pre>
<p>App.vue</p>
<pre><code class="vue">&lt;template&gt;
   
  &lt;div&gt;
        &lt;Student /&gt;    
    &lt;hr /&gt;
        &lt;School /&gt;  
  &lt;/div&gt;
&lt;/template&gt;

&lt;script&gt;
import Student from &quot;./components/Student.vue&quot;;
import School from &quot;./components/School.vue&quot;;

export default &#123;
  name: &quot;App&quot;,
  components: &#123;
    Student,
    School,
  &#125;,
&#125;;
&lt;/script&gt;

&lt;style&gt;&lt;/style&gt;
</code></pre>
<p>main.js</p>
<pre><code class="javascript">import Vue from &quot;vue&quot;;
import App from &quot;./App.vue&quot;;
// 引入插件
import plugins from &quot;./plugins&quot;;

// 应用(使用)插件
Vue.use(plugins, 1, 2, 3);

Vue.config.productionTip = false;

new Vue(&#123;
  el: &quot;#app&quot;,
  render: (h) =&gt; h(App),
&#125;);
</code></pre>
<p>plugins.js</p>
<pre><code class="javascript">export default &#123;
  install(Vue, x, y, z) &#123;
    console.log(x, y, z); // 全局过滤器
    Vue.filter(&quot;mySlice&quot;, function (value) &#123;
      return value.slice(0, 4);
    &#125;); //定义全局指令

    Vue.directive(&quot;fbind&quot;, &#123;
      //指令与元素成功绑定时（一上来）
      bind(element, binding) &#123;
        element.value = binding.value;
      &#125;, //指令所在元素被插入页面时
      inserted(element, binding) &#123;
        element.focus();
      &#125;, //指令所在的模板被重新解析时
      update(element, binding) &#123;
        element.value = binding.value;
      &#125;,
    &#125;); //定义混入

    Vue.mixin(&#123;
      data() &#123;
        return &#123;
          x: 100,
          y: 200,
        &#125;;
      &#125;,
    &#125;); //给Vue原型上添加一个方法（vm和vc就都能用了）

    Vue.prototype.hello = () =&gt; &#123;
      alert(&quot;你好啊&quot;);
    &#125;;
  &#125;,
&#125;;
</code></pre>
<h2 id="scoped-样式"><a href="#scoped-样式" class="headerlink" title="scoped 样式"></a>scoped 样式</h2><ol>
<li>作用：让样式在局部生效，防止冲突。</li>
<li>写法：<code>&lt;style scoped&gt;</code></li>
</ol>
<p>School.vue</p>
<pre><code class="vue">&lt;template&gt;
   
  &lt;div class=&quot;demo&quot;&gt;
       
    &lt;h2 class=&quot;title&quot;&gt;学校名称: &#123;&#123; name &#125;&#125;&lt;/h2&gt;
       
    &lt;h2&gt;学校地址: &#123;&#123; address &#125;&#125;&lt;/h2&gt;
     
  &lt;/div&gt;
&lt;/template&gt;

&lt;script&gt;
export default &#123;
  name: &quot;School&quot;,
  data() &#123;
    return &#123;
      name: &quot;尚硅谷atguigu&quot;,
      address: &quot;北京&quot;,
    &#125;;
  &#125;,
&#125;;
&lt;/script&gt;

&lt;style scoped&gt;
  .demo &#123;
    background-color: lightpink;
  &#125;
&lt;/style&gt;
</code></pre>
<p>Student.vue</p>
<pre><code class="vue">&lt;template&gt;
  &lt;div class=&quot;demo&quot;&gt;
    &lt;h2 class=&quot;title&quot;&gt;学校名称: &#123;&#123; name &#125;&#125;&lt;/h2&gt;
    &lt;h2 class=&quot;qwe&quot;&gt;学校地址: &#123;&#123; address &#125;&#125;&lt;/h2&gt;
  &lt;/div&gt;
&lt;/template&gt;

&lt;script&gt;
export default &#123;
  name: &quot;School&quot;,
  data() &#123;
    return &#123;
      name: &quot;尚硅谷atguigu&quot;,
      address: &quot;北京&quot;,
    &#125;;
  &#125;,
&#125;;
&lt;/script&gt;

&lt;style lang=&quot;less&quot; scoped&gt;
.demo &#123;
  background-color: lightpink;
  .qwe &#123;
    font-size: 50px;
  &#125;
&#125;
&lt;/style&gt;
</code></pre>
<p>App.vue</p>
<pre><code class="vue">&lt;template&gt;
   
  &lt;div&gt;
       
    &lt;h2 class=&quot;title&quot;&gt;标题&lt;/h2&gt;
        &lt;School /&gt;    
    &lt;hr /&gt;
        &lt;Student /&gt;  
  &lt;/div&gt;
&lt;/template&gt;

&lt;script&gt;
import Student from &quot;./components/Student.vue&quot;;
import School from &quot;./components/School.vue&quot;;

export default &#123;
  name: &quot;App&quot;,
  components: &#123;
    Student,
    School,
  &#125;,
&#125;;
&lt;/script&gt;

&lt;style scoped&gt;
  .title &#123;
    color: red;
  &#125;
&lt;/style&gt;

&lt;style&gt;&lt;/style&gt;
</code></pre>
<p>main.js</p>
<pre><code class="javascript">import Vue from &quot;vue&quot;;
import App from &quot;./App.vue&quot;;

Vue.config.productionTip = false;

new Vue(&#123;
  el: &quot;#app&quot;,
  render: (h) =&gt; h(App),
&#125;);
</code></pre>
<p>在组件中的 style 标签中定义了 scoped, 会在使用的 class 类上加上随机的 id, 在选择器中配合 id 来选择, 用来解决 css 选择器重名的问题<br><img src="https://cdn.jsdelivr.net/gh/roudoukou/roudoukou.github.io/blog-img/FhY45jbXhTpc14Igihiq6gAUlZ7h.png"><br>但是在 App.vue 组件中, 一般不用这个, 主要是 App 组件中写了样式, 就说明是很多组件都在使用的, 就不需要用 scoped 的</p>
<h3 id=""><a href="#" class="headerlink" title=""></a><style lang="less"></h3><p>Module not found: Error: Can’t resolve ‘less-loader’ in ‘E:\Code\Vue\vue_test’<br><img src="https://cdn.jsdelivr.net/gh/roudoukou/roudoukou.github.io/blog-img/FsSKSQLOE9EoIiCnX4Bj4i9laztj.png"><br>PS E:\Code\Vue\vue_test&gt; npm i less-loader<br>只需要安装 less-loader 就行了<br>webpack 4 应该安装 less-loader7 版本的<br>PS E:\Code\Vue\vue_test&gt; npm i less-loader@7<br>webpack 5 可以安装 less-loader 最新版(11)</p>
<pre><code class="javascript">查看版本的最新版
PS E:\Code\Vue\vue_test&gt; npm view webpack versions
[
  &#39;0.1.0&#39;,          &#39;0.1.1&#39;,          &#39;0.1.2&#39;,          &#39;0.1.3&#39;,
  ...
  ...
  ...
  &#39;5.73.0&#39;,         &#39;5.74.0&#39;,         &#39;5.75.0&#39;
]

PS E:\Code\Vue\vue_test&gt; npm view less-loader versions
[
  &#39;0.1.0&#39;,  &#39;0.1.1&#39;,  &#39;0.1.2&#39;,  &#39;0.1.3&#39;,  &#39;0.2.0&#39;,
  &#39;0.2.1&#39;,  &#39;0.2.2&#39;,  &#39;0.5.0&#39;,  &#39;0.5.1&#39;,  &#39;0.6.0&#39;,
  &#39;0.6.1&#39;,  &#39;0.6.2&#39;,  &#39;0.7.0&#39;,  &#39;0.7.1&#39;,  &#39;0.7.2&#39;,
  &#39;0.7.3&#39;,  &#39;0.7.4&#39;,  &#39;0.7.5&#39;,  &#39;0.7.6&#39;,  &#39;0.7.7&#39;,
  &#39;0.7.8&#39;,  &#39;2.0.0&#39;,  &#39;2.1.0&#39;,  &#39;2.2.0&#39;,  &#39;2.2.1&#39;,
  &#39;2.2.2&#39;,  &#39;2.2.3&#39;,  &#39;3.0.0&#39;,  &#39;4.0.0&#39;,  &#39;4.0.1&#39;,
  &#39;4.0.2&#39;,  &#39;4.0.3&#39;,  &#39;4.0.4&#39;,  &#39;4.0.5&#39;,  &#39;4.0.6&#39;,
  &#39;4.1.0&#39;,  &#39;5.0.0&#39;,  &#39;6.0.0&#39;,  &#39;6.1.0&#39;,  &#39;6.1.1&#39;,
  &#39;6.1.2&#39;,  &#39;6.1.3&#39;,  &#39;6.2.0&#39;,  &#39;7.0.0&#39;,  &#39;7.0.1&#39;,
  &#39;7.0.2&#39;,  &#39;7.1.0&#39;,  &#39;7.2.0&#39;,  &#39;7.2.1&#39;,  &#39;7.3.0&#39;,
  &#39;8.0.0&#39;,  &#39;8.1.0&#39;,  &#39;8.1.1&#39;,  &#39;9.0.0&#39;,  &#39;9.1.0&#39;,
  &#39;10.0.0&#39;, &#39;10.0.1&#39;, &#39;10.1.0&#39;, &#39;10.2.0&#39;, &#39;11.0.0&#39;,
  &#39;11.1.0&#39;
]
</code></pre>
<p>安装 nanoid 库 npm i nanoid</p>
<p>props 传进来的对象, 最好不要去做修改<br><img src="https://cdn.jsdelivr.net/gh/roudoukou/roudoukou.github.io/blog-img/FtDe2HR5AVFDLWdciHti9CdSQTfg.png"></p>
<h2 id="WebStore"><a href="#WebStore" class="headerlink" title="WebStore"></a>WebStore</h2><ol>
<li>存储内容大小一般支持 5MB 左右（不同浏览器可能还不一样）</li>
<li>浏览器端通过 Window.sessionStorage 和 Window.localStorage 属性来实现本地存储机制。</li>
<li>相关 API：</li>
<li><code>xxxxxStorage.setItem(&#39;key&#39;, &#39;value&#39;);</code><br>该方法接受一个键和值作为参数，会把键值对添加到存储中，如果键名存在，则更新其对应的值。</li>
<li><code>xxxxxStorage.getItem(&#39;person&#39;);</code><br>该方法接受一个键名作为参数，返回键名对应的值。</li>
<li><code>xxxxxStorage.removeItem(&#39;key&#39;);</code><br>该方法接受一个键名作为参数，并把该键名从存储中删除。</li>
<li><code>xxxxxStorage.clear()</code><br>该方法会清空存储中的所有数据。</li>
<li>备注：</li>
<li>SessionStorage 存储的内容会随着浏览器窗口关闭而消失。</li>
<li>LocalStorage 存储的内容，需要手动清除才会消失。</li>
<li><code>xxxxxStorage.getItem(xxx)</code>如果 xxx 对应的 value 获取不到，那么 getItem 的返回值是 null。</li>
<li><code>JSON.parse(null)</code>的结果依然是 null。</li>
</ol>
<p>localStore.html</p>
<pre><code class="html">&lt;!DOCTYPE html&gt;
&lt;html lang=&quot;en&quot;&gt;
  &lt;head&gt;
       
    &lt;meta charset=&quot;UTF-8&quot; /&gt;
       
    &lt;meta http-equiv=&quot;X-UA-Compatible&quot; content=&quot;IE=edge&quot; /&gt;
       
    &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot; /&gt;
       
    &lt;title&gt;localStore&lt;/title&gt;
  &lt;/head&gt;
  &lt;body&gt;
       
    &lt;h2&gt;localStore&lt;/h2&gt;
        &lt;button onclick=&quot;saveData()&quot;&gt;点我保存一个数据&lt;/button&gt;    
    &lt;button onclick=&quot;readData()&quot;&gt;点我读取一个数据&lt;/button&gt;    
    &lt;button onclick=&quot;deleteData()&quot;&gt;点我删除一个数据&lt;/button&gt;    
    &lt;button onclick=&quot;deleteAllData()&quot;&gt;点我清空所有数据&lt;/button&gt;    
    &lt;script&gt;
      const person = &#123; name: &quot;张三&quot;, age: 18 &#125;;

      function saveData() &#123;
        localStorage.setItem(&quot;msg1&quot;, &quot;Hello&quot;);
        localStorage.setItem(&quot;msg2&quot;, 123);
        localStorage.setItem(&quot;msg3&quot;, JSON.stringify(person));
      &#125;
      function readData() &#123;
        console.log(localStorage.getItem(&quot;msg1&quot;));
        console.log(localStorage.getItem(&quot;msg2&quot;));
        const result = localStorage.getItem(&quot;msg3&quot;);
        console.log(JSON.parse(result));

        console.log(localStorage.getItem(&quot;msg4&quot;));
      &#125;
      function deleteData() &#123;
        localStorage.removeItem(&quot;msg1&quot;);
      &#125;
      function deleteAllData() &#123;
        localStorage.clear();
      &#125;
    &lt;/script&gt;
  &lt;/body&gt;
&lt;/html&gt;
</code></pre>
<p>sessionStore.html</p>
<pre><code class="html">&lt;!DOCTYPE html&gt;
&lt;html lang=&quot;en&quot;&gt;
  &lt;head&gt;
       
    &lt;meta charset=&quot;UTF-8&quot; /&gt;
       
    &lt;meta http-equiv=&quot;X-UA-Compatible&quot; content=&quot;IE=edge&quot; /&gt;
       
    &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot; /&gt;
       
    &lt;title&gt;sessionStore&lt;/title&gt;
  &lt;/head&gt;
  &lt;body&gt;
       
    &lt;h2&gt;sessionStore&lt;/h2&gt;
        &lt;button onclick=&quot;saveData()&quot;&gt;点我保存一个数据&lt;/button&gt;    
    &lt;button onclick=&quot;readData()&quot;&gt;点我读取一个数据&lt;/button&gt;    
    &lt;button onclick=&quot;deleteData()&quot;&gt;点我删除一个数据&lt;/button&gt;    
    &lt;button onclick=&quot;deleteAllData()&quot;&gt;点我清空所有数据&lt;/button&gt;    
    &lt;script&gt;
      const person = &#123; name: &quot;张三&quot;, age: 18 &#125;;

      function saveData() &#123;
        sessionStorage.setItem(&quot;msg1&quot;, &quot;Hello&quot;);
        sessionStorage.setItem(&quot;msg2&quot;, 123);
        sessionStorage.setItem(&quot;msg3&quot;, JSON.stringify(person));
      &#125;
      function readData() &#123;
        console.log(sessionStorage.getItem(&quot;msg1&quot;));
        console.log(sessionStorage.getItem(&quot;msg2&quot;));
        const result = sessionStorage.getItem(&quot;msg3&quot;);
        console.log(JSON.parse(result));

        console.log(sessionStorage.getItem(&quot;msg4&quot;));
      &#125;
      function deleteData() &#123;
        sessionStorage.removeItem(&quot;msg1&quot;);
      &#125;
      function deleteAllData() &#123;
        sessionStorage.clear();
      &#125;
    &lt;/script&gt;
  &lt;/body&gt;
&lt;/html&gt;
</code></pre>
<h2 id="TodoList-案例"><a href="#TodoList-案例" class="headerlink" title="TodoList_案例"></a>TodoList_案例</h2><ol>
<li>组件化编码流程：<br>(1).拆分静态组件：组件要按照功能点拆分，命名不要与 html 元素冲突。<br>(2).实现动态组件：考虑好数据的存放位置，数据是一个组件在用，还是一些组件在用：<br>1).一个组件在用：放在组件自身即可。<br>2). 一些组件在用：放在他们共同的父组件上（状态提升）。<br>(3).实现交互：从绑定事件开始。</li>
<li>props 适用于：<br>(1).父组件 &#x3D;&#x3D;&gt; 子组件 通信<br>(2).子组件 &#x3D;&#x3D;&gt; 父组件 通信（要求父先给子一个函数）</li>
<li>使用 v-model 时要切记：v-model 绑定的值不能是 props 传过来的值，因为 props 是不可以修改的！</li>
<li>props 传过来的若是对象类型的值，修改对象中的属性时 Vue 不会报错，但不推荐这样做。</li>
</ol>
<p>MyHeader.vue</p>
<pre><code class="vue">&lt;template&gt;
   
  &lt;div class=&quot;todo-header&quot;&gt;
       
    &lt;input
      type=&quot;text&quot;
      v-model=&quot;todoName&quot;
      @keyup.enter=&quot;add&quot;
      placeholder=&quot;请输入你的任务名称，按回车键确认&quot;
    /&gt;
     
  &lt;/div&gt;
&lt;/template&gt;

&lt;script&gt;
import &#123; nanoid &#125; from &quot;nanoid&quot;;
export default &#123;
  name: &quot;MyHeader&quot;,
  props: [&quot;addTodoObj&quot;],
  data() &#123;
    return &#123;
      todoName: &quot;&quot;,
    &#125;;
  &#125;,
  methods: &#123;
    add() &#123;
      if (!this.todoName) &#123;
        alert(&quot;请输入点什么吧&quot;);
        return;
      &#125;
      const todoObj = &#123; id: nanoid(), title: this.todoName, done: false &#125;; // console.log(todoObj);
      this.addTodoObj(todoObj);
      this.todoName = &quot;&quot;;
    &#125;,
  &#125;,
&#125;;
&lt;/script&gt;

&lt;style scoped&gt;
/*header*/
.todo-header input &#123;
  width: 560px;
  height: 28px;
  font-size: 14px;
  border: 1px solid #ccc;
  border-radius: 4px;
  padding: 4px 7px;
&#125;


.todo-header input:focus &#123;
  outline: none;
  border-color: rgba(82, 168, 236, 0.8);
  box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.075),
    0 0 8px rgba(82, 168, 236, 0.6);
&#125;
&lt;/style&gt;
</code></pre>
<p>MyList.vue</p>
<pre><code class="vue">&lt;template&gt;
   
  &lt;ul class=&quot;todo-main&quot;&gt;
       
    &lt;MyItem
      v-for=&quot;todoObj in todos&quot;
      :key=&quot;todoObj.id&quot;
      :todoObj=&quot;todoObj&quot;
      :checkTodo=&quot;checkTodo&quot;
      :deleteTodoObj=&quot;deleteTodoObj&quot;
    /&gt;
     
  &lt;/ul&gt;
&lt;/template&gt;

&lt;script scoped&gt;
import MyItem from &quot;./MyItem.vue&quot;;
export default &#123;
  name: &quot;MyList&quot;,
  components: &#123;
    MyItem,
  &#125;,
  props: [&quot;todos&quot;, &quot;checkTodo&quot;, &quot;deleteTodoObj&quot;],
&#125;;
&lt;/script&gt;

&lt;style&gt;
/*main*/
.todo-main &#123;
  margin-left: 0px;
  border: 1px solid #ddd;
  border-radius: 2px;
  padding: 0px;
&#125;


.todo-empty &#123;
  height: 40px;
  line-height: 40px;
  border: 1px solid #ddd;
  border-radius: 2px;
  padding-left: 5px;
  margin-top: 10px;
&#125;
&lt;/style&gt;
</code></pre>
<p>MyItem.vue</p>
<pre><code class="vue">&lt;template&gt;
   
  &lt;li&gt;
       
    &lt;label&gt;
           
      &lt;input
        type=&quot;checkbox&quot;
        :checked=&quot;todoObj.done&quot;
        @change=&quot;handleCheck(todoObj.id)&quot;
      /&gt;
            &lt;span&gt;&#123;&#123; todoObj.title &#125;&#125;&lt;/span&gt;    
    &lt;/label&gt;
       
    &lt;!-- 如下代码也能实现功能，但是不太推荐，因为有点违反原则，因为修改了props --&gt;
       
    &lt;!-- &lt;input type=&quot;checkbox&quot; v-model=&quot;todoObj.done&quot;/&gt; --&gt;
       
    &lt;button class=&quot;btn btn-danger&quot; @click=&quot;handleDelete(todoObj.id)&quot;&gt;
      删除
    &lt;/button&gt;
     
  &lt;/li&gt;
&lt;/template&gt;

&lt;script&gt;
export default &#123;
  name: &quot;MyItem&quot;,
  props: [&quot;todoObj&quot;, &quot;checkTodo&quot;, &quot;deleteTodoObj&quot;],
  data() &#123;
    return &#123;&#125;;
  &#125;,
  methods: &#123;
    handleCheck(id) &#123;
      this.checkTodo(id);
    &#125;,
    handleDelete(id) &#123;
      this.deleteTodoObj(id);
    &#125;,
  &#125;,
&#125;;
&lt;/script&gt;

&lt;style scoped&gt;
/*item*/
li &#123;
  list-style: none;
  height: 36px;
  line-height: 36px;
  padding: 0 5px;
  border-bottom: 1px solid #ddd;
&#125;


li label &#123;
  float: left;
  cursor: pointer;
&#125;


li label li input &#123;
  vertical-align: middle;
  margin-right: 6px;
  position: relative;
  top: -1px;
&#125;


li button &#123;
  float: right;
  display: none;
  margin-top: 3px;
&#125;


li:before &#123;
  content: initial;
&#125;


li:last-child &#123;
  border-bottom: none;
&#125;


li:hover &#123;
    background-color: #ccc;
&#125;


li:hover button &#123;
    display: block;
&#125;
&lt;/style&gt;
</code></pre>
<p>MyFoot.vue</p>
<pre><code class="vue">&lt;template&gt;
   
  &lt;div class=&quot;todo-footer&quot; v-show=&quot;total&quot;&gt;
       
    &lt;label&gt;
           
      &lt;!-- &lt;input type=&quot;checkbox&quot; :checked=&quot;isAll&quot; @change=&quot;checkAll&quot; /&gt; --&gt;
            &lt;input type=&quot;checkbox&quot; v-model=&quot;isAll&quot; /&gt;    
    &lt;/label&gt;
       
    &lt;span&gt;
            &lt;span&gt;已完成&#123;&#123; calcTodoTotal &#125;&#125;&lt;/span&gt; / 全部&#123;&#123; total &#125;&#125;    
    &lt;/span&gt;
       
    &lt;button class=&quot;btn btn-danger&quot; @click=&quot;clearAll&quot;&gt;清除已完成任务&lt;/button&gt;  
  &lt;/div&gt;
&lt;/template&gt;

&lt;script&gt;
export default &#123;
  name: &quot;MyFooter&quot;,
  props: [&quot;todos&quot;, &quot;checkAllTodo&quot;, &quot;clearAllTodo&quot;],
  computed: &#123;
    // isAll() &#123;
    //   return this.total === this.calcTodoTotal &amp;&amp; this.total &gt; 0;
    // &#125;,
    total() &#123;
      return this.todos.length;
    &#125;,
    calcTodoTotal() &#123;
      /*       let i = 0
      this.todos.forEach((todo) =&gt; &#123;
        if (todo.done === true) i++
      &#125;);
      return i */
      /*       return this.todos.reduce((pre, current) =&gt; &#123;
        // console.log(current.done);
        return pre + (current.done ? 1 : 0)
      &#125;, 0) */
      return this.todos.reduce((pre, todo) =&gt; pre + (todo.done ? 1 : 0), 0);
    &#125;,
    isAll: &#123;
      get() &#123;
        return this.total === this.calcTodoTotal &amp;&amp; this.total &gt; 0;
      &#125;,
      set(value) &#123;
        this.checkAllTodo(value);
      &#125;,
    &#125;,
  &#125;,
  methods: &#123;
    checkAll(e) &#123;
      // console.log(e.target.checked);
      this.checkAllTodo(e.target.checked);
    &#125;,
    clearAll() &#123;
      this.clearAllTodo();
    &#125;,
  &#125;,
&#125;;
&lt;/script&gt;

&lt;style scoped&gt;
/*footer*/
.todo-footer &#123;
  height: 40px;
  line-height: 40px;
  padding-left: 6px;
  margin-top: 5px;
&#125;


.todo-footer label &#123;
  display: inline-block;
  margin-right: 20px;
  cursor: pointer;
&#125;


.todo-footer label input &#123;
  position: relative;
  top: -1px;
  vertical-align: middle;
  margin-right: 5px;
&#125;


.todo-footer button &#123;
  float: right;
  margin-top: 5px;
&#125;
&lt;/style&gt;
</code></pre>
<p>App.vue</p>
<pre><code class="vue">&lt;template&gt;
   
  &lt;div id=&quot;root&quot;&gt;
       
    &lt;div class=&quot;todo-container&quot;&gt;
           
      &lt;div class=&quot;todo-wrap&quot;&gt;
                &lt;MyHeader :addTodoObj=&quot;addTodoObj&quot; /&gt;        
        &lt;MyList
          :todos=&quot;todos&quot;
          :checkTodo=&quot;checkTodo&quot;
          :deleteTodoObj=&quot;deleteTodoObj&quot;
        /&gt;
               
        &lt;MyFooter
          :todos=&quot;todos&quot;
          :checkAllTodo=&quot;checkAllTodo&quot;
          :clearAllTodo=&quot;clearAllTodo&quot;
        /&gt;
             
      &lt;/div&gt;
         
    &lt;/div&gt;
     
  &lt;/div&gt;
&lt;/template&gt;

&lt;script&gt;
import MyHeader from &quot;./components/MyHeader.vue&quot;;
import MyList from &quot;./components/MyList.vue&quot;;
import MyFooter from &quot;./components/MyFooter.vue&quot;;

export default &#123;
  name: &quot;App&quot;,
  components: &#123;
    MyHeader,
    MyList,
    MyFooter,
  &#125;,
  data() &#123;
    return &#123;
      todos: JSON.parse(localStorage.getItem(&quot;todos&quot;)) || [],
    &#125;;
  &#125;,
  methods: &#123;
    addTodoObj(todoObj) &#123;
      this.todos.unshift(todoObj);
    &#125;,
    checkTodo(id) &#123;
      this.todos.forEach((todoObj) =&gt; &#123;
        if (todoObj.id === id) &#123;
          todoObj.done = !todoObj.done; // console.log(todoObj.done);
        &#125;
      &#125;);
    &#125;,
    deleteTodoObj(id) &#123;
      if (confirm(&quot;是否确定删除&quot;)) &#123;
        this.todos = this.todos.filter((todo) =&gt; &#123;
          return todo.id !== id;
        &#125;);
      &#125;
    &#125;,
    checkAllTodo(value) &#123;
      this.todos.forEach((todo) =&gt; &#123;
        todo.done = value;
      &#125;);
    &#125;,
    clearAllTodo() &#123;
      this.todos = this.todos.filter((todo) =&gt; &#123;
        return !todo.done;
      &#125;);
    &#125;,
  &#125;,
  watch: &#123;
    todos: &#123;
      deep: true,
      handler(value) &#123;
        localStorage.setItem(&quot;todos&quot;, JSON.stringify(value));
      &#125;,
    &#125;,
  &#125;,
&#125;;
&lt;/script&gt;

&lt;style&gt;
/*base*/
body &#123;
  background: #fff;
&#125;


.btn &#123;
  display: inline-block;
  padding: 4px 12px;
  margin-bottom: 0;
  font-size: 14px;
  line-height: 20px;
  text-align: center;
  vertical-align: middle;
  cursor: pointer;
  box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.2),
    0 1px 2px rgba(0, 0, 0, 0.05);
  border-radius: 4px;
&#125;


.btn-danger &#123;
  color: #fff;
  background-color: #da4f49;
  border: 1px solid #bd362f;
&#125;


.btn-danger:hover &#123;
  color: #fff;
  background-color: #bd362f;
&#125;


.btn:focus &#123;
  outline: none;
&#125;


.todo-container &#123;
  width: 600px;
  margin: 0 auto;
&#125;
.todo-container .todo-wrap &#123;
  padding: 10px;
  border: 1px solid #ddd;
  border-radius: 5px;
&#125;
&lt;/style&gt;
</code></pre>
<p>main.js</p>
<pre><code class="javascript">import Vue from &quot;vue&quot;;
import App from &quot;./App.vue&quot;;

Vue.config.productionTip = false;

new Vue(&#123;
  el: &quot;#app&quot;,
  render: (h) =&gt; h(App),
&#125;);
</code></pre>
<h2 id="组件的自定义事件"><a href="#组件的自定义事件" class="headerlink" title="组件的自定义事件"></a>组件的自定义事件</h2><ol>
<li>一种组件间通信的方式，适用于：<strong>子组件 &#x3D;&#x3D;&#x3D;&gt; 父组件</strong></li>
<li>使用场景：A 是父组件，B 是子组件，B 想给 A 传数据，那么就要在 A 中给 B 绑定自定义事件（事件的回调在 A 中）。</li>
<li>绑定自定义事件：</li>
<li>第一种方式，在父组件中：<code>&lt;Demo @atguigu=&quot;test&quot;/&gt;</code>   或 <code>&lt;Demo v-on:atguigu=&quot;test&quot;/&gt;</code></li>
<li>第二种方式，在父组件中：</li>
</ol>
<pre><code class="javascript">&lt;Demo ref=&quot;demo&quot;/&gt;
......
mounted()&#123;
   this.$refs.xxx.$on(&#39;atguigu&#39;,this.test)
&#125;
</code></pre>
<ol start="3">
<li>若想让自定义事件只能触发一次，可以使用<code>once</code>修饰符，或<code>$once</code>方法。</li>
<li>触发自定义事件：<code>this.$emit(&#39;atguigu&#39;,数据)</code></li>
<li>解绑自定义事件<code>this.$off(&#39;atguigu&#39;)</code></li>
<li>组件上也可以绑定原生 DOM 事件，需要使用<code>native</code>修饰符。</li>
<li>注意：通过<code>this.$refs.xxx.$on(&#39;atguigu&#39;,回调)</code>绑定自定义事件时，回调要么配置在 methods 中，要么用箭头函数，否则 this 指向会出问题！</li>
</ol>
<p>School.vue</p>
<pre><code class="vue">&lt;template&gt;
   
  &lt;div class=&quot;school&quot;&gt;
       
    &lt;h2&gt;学校名称: &#123;&#123; name &#125;&#125;&lt;/h2&gt;
       
    &lt;h2&gt;学校地址: &#123;&#123; address &#125;&#125;&lt;/h2&gt;
        &lt;button @click=&quot;sendSchoolName&quot;&gt;点我把学校名称发送给App&lt;/button&gt;  
  &lt;/div&gt;
&lt;/template&gt;

&lt;script&gt;
export default &#123;
  name: &quot;School&quot;,
  props: [&quot;getSchoolName&quot;],
  data() &#123;
    return &#123;
      name: &quot;尚硅谷&quot;,
      address: &quot;北京&quot;,
    &#125;;
  &#125;,
  methods: &#123;
    sendSchoolName() &#123;
      this.getSchoolName(this.name);
    &#125;,
  &#125;,
&#125;;
&lt;/script&gt;

&lt;style lang=&quot;less&quot; scoped&gt;
  .school &#123;
    background-color: lightpink;
    padding: 5px;
    margin-top: 30px;
  &#125;
&lt;/style&gt;
</code></pre>
<p>Student.vue</p>
<pre><code class="vue">&lt;template&gt;
   
  &lt;div class=&quot;student&quot;&gt;
       
    &lt;h2&gt;学生姓名: &#123;&#123; name &#125;&#125;&lt;/h2&gt;
       
    &lt;h2&gt;学生性别: &#123;&#123; sex &#125;&#125;&lt;/h2&gt;
       
    &lt;h2&gt;当前求和为: &#123;&#123; number &#125;&#125;&lt;/h2&gt;
        &lt;button @click=&quot;add&quot;&gt;点我number++&lt;/button&gt;    
    &lt;button @click=&quot;sendStudentName&quot;&gt;点我把学生名称发送给App&lt;/button&gt;    
    &lt;button @click=&quot;unbind&quot;&gt;解绑atguigu事件&lt;/button&gt;    
    &lt;button @click=&quot;death&quot;&gt;销毁当前Student组件的实例对象&lt;/button&gt;  
  &lt;/div&gt;
&lt;/template&gt;

&lt;script&gt;
export default &#123;
  name: &quot;Student&quot;,
  data() &#123;
    return &#123;
      name: &quot;张三&quot;,
      sex: &quot;男&quot;,
      number: 0,
    &#125;;
  &#125;,
  methods: &#123;
    add() &#123;
      console.log(&quot;add回调被调用了&quot;);
      this.number++;
    &#125;,
    sendStudentName() &#123;
      this.$emit(&quot;atguigu&quot;, this.name, 666, 777, 888, 999); // this.$emit(&#39;demo&#39;) // this.$emit(&#39;click&#39;)
    &#125;,
    unbind() &#123;
      // this.$off(&#39;atguigu&#39;) // 解绑一个自定义事件
      // this.$off([&#39;atguigu&#39;, &#39;demo&#39;]) // 解绑多个自定义事件
      this.$off(); // 解绑所有的自定义事件
    &#125;,
    death() &#123;
      this.$destroy(); // 销毁了当前Student组件的实例对象, 销毁后所有Student实例的自定义事件全部不奏效 // 现在绑定的时间都会不奏效, 之前的原生的事件也不会奏效
    &#125;,
  &#125;,
&#125;;
&lt;/script&gt;

&lt;style scoped&gt;
.student &#123;
  background-color: lightblue;
  padding: 5px;
  margin-top: 30px;
&#125;
&lt;/style&gt;
</code></pre>
<p>App.vue</p>
<pre><code class="vue">&lt;template&gt;
   
  &lt;div class=&quot;app&quot;&gt;
       
    &lt;h2&gt;&#123;&#123; msg &#125;&#125;, 学生姓名是: &#123;&#123; studentName &#125;&#125;&lt;/h2&gt;
       
    &lt;!-- 通过父组件给子组件传递函数类型的props实现: 子给父传递数据 --&gt;
        &lt;School :getSchoolName=&quot;getSchoolName&quot; /&gt;    
    &lt;hr /&gt;
       
    &lt;!-- 由于v-on在student组件标签上, 
    所以是给Student这个组件实例对象VC绑定了一个事件, 
    事件名字叫atguigu, 如果以后有人触发了atguigu事件, 
    demo函数就会被调用 --&gt;
       
    &lt;!-- 通过父组件给子组件绑定一个自定义事件实现: 子给父传递数据(第一种写法, 使用@或v-on) --&gt;
       
    &lt;!-- &lt;Student v-on:atguigu=&quot;getStudentName&quot; @demo=&quot;m1&quot; /&gt; --&gt;

       
    &lt;!-- 通过父组件给子组件绑定一个自定义事件实现: 子给父传递数据(第二种写法, 使用ref) --&gt;
        &lt;Student ref=&quot;student&quot; @click.native=&quot;show&quot; /&gt;  
  &lt;/div&gt;
&lt;/template&gt;

&lt;script&gt;
import Student from &quot;./components/Student.vue&quot;;
import School from &quot;./components/School.vue&quot;;

export default &#123;
  name: &quot;App&quot;,
  data() &#123;
    return &#123;
      msg: &quot;你好啊!&quot;,
      studentName: &quot;&quot;,
    &#125;;
  &#125;,
  components: &#123;
    Student,
    School,
  &#125;,
  methods: &#123;
    show() &#123;
      alert(123);
    &#125;,
    getSchoolName(name) &#123;
      console.log(&quot;App收到了School的name&quot;, name);
    &#125;,
    getStudentName(name, ...params) &#123;
      console.log(&quot;getStudentName被调用了&quot;, name, params);
      this.studentName = name;
    &#125;,
    m1() &#123;
      console.log(&quot;demo事件被触发了！&quot;);
    &#125;,
  &#125;,
  mounted() &#123;
    this.$refs.student.$on(&quot;atguigu&quot;, (name, params) =&gt; &#123;
      console.log(&quot;getStudentName被调用了&quot;, name, params);
      console.log(this);
      this.studentName = name;
    &#125;); // 绑定自定义事件 // this.$refs.student.$on(&quot;atguigu&quot;, this.getStudentName); // 绑定自定义事件 // this.$refs.student.$once(&quot;atguigu&quot;, this.getStudentName); // 绑定自定义事件(一次性) // 延迟三秒触发自定义事件 // setTimeout(() =&gt; &#123; //   this.$refs.student.$on(&quot;atguigu&quot;, this.getStudentName); // &#125;, 3000);
  &#125;,
&#125;;
&lt;/script&gt;

&lt;style scoped&gt;
.app &#123;
  background-color: gray;
&#125;
&lt;/style&gt;
</code></pre>
<p>main.js</p>
<pre><code class="javascript">import Vue from &quot;vue&quot;;
import App from &quot;./App.vue&quot;;

Vue.config.productionTip = false;

new Vue(&#123;
  el: &quot;#app&quot;,
  render: (h) =&gt; h(App), // mounted() &#123; //     setTimeout(() =&gt; &#123; //         this.$destroy() //     &#125;, 3000) // &#125;,
&#125;);
</code></pre>
<h3 id="TodoList-自定义事件"><a href="#TodoList-自定义事件" class="headerlink" title="TodoList_自定义事件"></a>TodoList_自定义事件</h3><p>MyHeader.vue</p>
<pre><code class="vue">&lt;template&gt;
   
  &lt;div class=&quot;todo-header&quot;&gt;
       
    &lt;input
      type=&quot;text&quot;
      v-model=&quot;todoName&quot;
      @keyup.enter=&quot;add&quot;
      placeholder=&quot;请输入你的任务名称，按回车键确认&quot;
    /&gt;
     
  &lt;/div&gt;
&lt;/template&gt;

&lt;script&gt;
import &#123; nanoid &#125; from &quot;nanoid&quot;;
export default &#123;
  name: &quot;MyHeader&quot;, // props: [&quot;addTodoObj&quot;],
  data() &#123;
    return &#123;
      todoName: &quot;&quot;,
    &#125;;
  &#125;,
  methods: &#123;
    add() &#123;
      if (!this.todoName) &#123;
        alert(&quot;请输入点什么吧&quot;);
        return;
      &#125;
      const todoObj = &#123; id: nanoid(), title: this.todoName, done: false &#125;; // console.log(todoObj); // this.addTodoObj(todoObj);
      this.$emit(&quot;addTodoObj&quot;, todoObj);
      this.todoName = &quot;&quot;;
    &#125;,
  &#125;,
&#125;;
&lt;/script&gt;

&lt;style scoped&gt;
/*header*/
.todo-header input &#123;
  width: 560px;
  height: 28px;
  font-size: 14px;
  border: 1px solid #ccc;
  border-radius: 4px;
  padding: 4px 7px;
&#125;


.todo-header input:focus &#123;
  outline: none;
  border-color: rgba(82, 168, 236, 0.8);
  box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.075),
    0 0 8px rgba(82, 168, 236, 0.6);
&#125;
&lt;/style&gt;
</code></pre>
<p>MyList.vue</p>
<pre><code class="vue">&lt;template&gt;
   
  &lt;ul class=&quot;todo-main&quot;&gt;
       
    &lt;MyItem
      v-for=&quot;todoObj in todos&quot;
      :key=&quot;todoObj.id&quot;
      :todoObj=&quot;todoObj&quot;
      :checkTodo=&quot;checkTodo&quot;
      :deleteTodoObj=&quot;deleteTodoObj&quot;
    /&gt;
     
  &lt;/ul&gt;
&lt;/template&gt;

&lt;script scoped&gt;
import MyItem from &quot;./MyItem.vue&quot;;
export default &#123;
  name: &quot;MyList&quot;,
  components: &#123;
    MyItem,
  &#125;,
  props: [&quot;todos&quot;, &quot;checkTodo&quot;, &quot;deleteTodoObj&quot;],
&#125;;
&lt;/script&gt;

&lt;style&gt;
/*main*/
.todo-main &#123;
  margin-left: 0px;
  border: 1px solid #ddd;
  border-radius: 2px;
  padding: 0px;
&#125;


.todo-empty &#123;
  height: 40px;
  line-height: 40px;
  border: 1px solid #ddd;
  border-radius: 2px;
  padding-left: 5px;
  margin-top: 10px;
&#125;
&lt;/style&gt;
</code></pre>
<p>MyItem.vue</p>
<pre><code class="vue">&lt;template&gt;
   
  &lt;li&gt;
       
    &lt;label&gt;
           
      &lt;input
        type=&quot;checkbox&quot;
        :checked=&quot;todoObj.done&quot;
        @change=&quot;handleCheck(todoObj.id)&quot;
      /&gt;
            &lt;span&gt;&#123;&#123; todoObj.title &#125;&#125;&lt;/span&gt;    
    &lt;/label&gt;
       
    &lt;!-- 如下代码也能实现功能，但是不太推荐，因为有点违反原则，因为修改了props --&gt;
       
    &lt;!-- &lt;input type=&quot;checkbox&quot; v-model=&quot;todoObj.done&quot;/&gt; --&gt;
       
    &lt;button class=&quot;btn btn-danger&quot; @click=&quot;handleDelete(todoObj.id)&quot;&gt;
      删除
    &lt;/button&gt;
     
  &lt;/li&gt;
&lt;/template&gt;

&lt;script&gt;
export default &#123;
  name: &quot;MyItem&quot;,
  props: [&quot;todoObj&quot;, &quot;checkTodo&quot;, &quot;deleteTodoObj&quot;],
  data() &#123;
    return &#123;&#125;;
  &#125;,
  methods: &#123;
    handleCheck(id) &#123;
      this.checkTodo(id);
    &#125;,
    handleDelete(id) &#123;
      this.deleteTodoObj(id);
    &#125;,
  &#125;,
&#125;;
&lt;/script&gt;

&lt;style scoped&gt;
/*item*/
li &#123;
  list-style: none;
  height: 36px;
  line-height: 36px;
  padding: 0 5px;
  border-bottom: 1px solid #ddd;
&#125;


li label &#123;
  float: left;
  cursor: pointer;
&#125;


li label li input &#123;
  vertical-align: middle;
  margin-right: 6px;
  position: relative;
  top: -1px;
&#125;


li button &#123;
  float: right;
  display: none;
  margin-top: 3px;
&#125;


li:before &#123;
  content: initial;
&#125;


li:last-child &#123;
  border-bottom: none;
&#125;


li:hover &#123;
    background-color: #ccc;
&#125;


li:hover button &#123;
    display: block;
&#125;
&lt;/style&gt;
</code></pre>
<p>MyFoot.vue</p>
<pre><code class="vue">&lt;template&gt;
   
  &lt;div class=&quot;todo-footer&quot; v-show=&quot;total&quot;&gt;
       
    &lt;label&gt;
           
      &lt;!-- &lt;input type=&quot;checkbox&quot; :checked=&quot;isAll&quot; @change=&quot;checkAll&quot; /&gt; --&gt;
            &lt;input type=&quot;checkbox&quot; v-model=&quot;isAll&quot; /&gt;    
    &lt;/label&gt;
       
    &lt;span&gt;
            &lt;span&gt;已完成&#123;&#123; calcTodoTotal &#125;&#125;&lt;/span&gt; / 全部&#123;&#123; total &#125;&#125;    
    &lt;/span&gt;
       
    &lt;button class=&quot;btn btn-danger&quot; @click=&quot;clearAll&quot;&gt;清除已完成任务&lt;/button&gt;  
  &lt;/div&gt;
&lt;/template&gt;

&lt;script&gt;
export default &#123;
  name: &quot;MyFooter&quot;,
  props: [&quot;todos&quot;],
  computed: &#123;
    // isAll() &#123;
    //   return this.total === this.calcTodoTotal &amp;&amp; this.total &gt; 0;
    // &#125;,
    total() &#123;
      return this.todos.length;
    &#125;,
    calcTodoTotal() &#123;
      /*       let i = 0
      this.todos.forEach((todo) =&gt; &#123;
        if (todo.done === true) i++
      &#125;);
      return i */
      /*       return this.todos.reduce((pre, current) =&gt; &#123;
        // console.log(current.done);
        return pre + (current.done ? 1 : 0)
      &#125;, 0) */
      return this.todos.reduce((pre, todo) =&gt; pre + (todo.done ? 1 : 0), 0);
    &#125;,
    isAll: &#123;
      get() &#123;
        return this.total === this.calcTodoTotal &amp;&amp; this.total &gt; 0;
      &#125;,
      set(value) &#123;
        // this.checkAllTodo(value)
        this.$emit(&quot;checkAllTodo&quot;, value);
      &#125;,
    &#125;,
  &#125;,
  methods: &#123;
    checkAll(e) &#123;
      // console.log(e.target.checked);
      this.checkAllTodo(e.target.checked);
    &#125;,
    clearAll() &#123;
      // this.clearAllTodo()
      this.$emit(&quot;clearAllTodo&quot;);
    &#125;,
  &#125;,
&#125;;
&lt;/script&gt;

&lt;style scoped&gt;
/*footer*/
.todo-footer &#123;
  height: 40px;
  line-height: 40px;
  padding-left: 6px;
  margin-top: 5px;
&#125;


.todo-footer label &#123;
  display: inline-block;
  margin-right: 20px;
  cursor: pointer;
&#125;


.todo-footer label input &#123;
  position: relative;
  top: -1px;
  vertical-align: middle;
  margin-right: 5px;
&#125;


.todo-footer button &#123;
  float: right;
  margin-top: 5px;
&#125;
&lt;/style&gt;
</code></pre>
<p>App.vue</p>
<pre><code class="vue">&lt;template&gt;
   
  &lt;div id=&quot;root&quot;&gt;
       
    &lt;div class=&quot;todo-container&quot;&gt;
           
      &lt;div class=&quot;todo-wrap&quot;&gt;
                &lt;MyHeader @addTodoObj=&quot;addTodoObj&quot; /&gt;        
        &lt;MyList
          :todos=&quot;todos&quot;
          :checkTodo=&quot;checkTodo&quot;
          :deleteTodoObj=&quot;deleteTodoObj&quot;
        /&gt;
               
        &lt;MyFooter
          :todos=&quot;todos&quot;
          @checkAllTodo=&quot;checkAllTodo&quot;
          @clearAllTodo=&quot;clearAllTodo&quot;
        /&gt;
             
      &lt;/div&gt;
         
    &lt;/div&gt;
     
  &lt;/div&gt;
&lt;/template&gt;

&lt;script&gt;
import MyHeader from &quot;./components/MyHeader.vue&quot;;
import MyList from &quot;./components/MyList.vue&quot;;
import MyFooter from &quot;./components/MyFooter.vue&quot;;

export default &#123;
  name: &quot;App&quot;,
  components: &#123;
    MyHeader,
    MyList,
    MyFooter,
  &#125;,
  data() &#123;
    return &#123;
      todos: JSON.parse(localStorage.getItem(&quot;todos&quot;)) || [],
    &#125;;
  &#125;,
  methods: &#123;
    addTodoObj(todoObj) &#123;
      this.todos.unshift(todoObj);
    &#125;,
    checkTodo(id) &#123;
      this.todos.forEach((todoObj) =&gt; &#123;
        if (todoObj.id === id) &#123;
          todoObj.done = !todoObj.done; // console.log(todoObj.done);
        &#125;
      &#125;);
    &#125;,
    deleteTodoObj(id) &#123;
      if (confirm(&quot;是否确定删除&quot;)) &#123;
        this.todos = this.todos.filter((todo) =&gt; &#123;
          return todo.id !== id;
        &#125;);
      &#125;
    &#125;,
    checkAllTodo(value) &#123;
      this.todos.forEach((todo) =&gt; &#123;
        todo.done = value;
      &#125;);
    &#125;,
    clearAllTodo() &#123;
      this.todos = this.todos.filter((todo) =&gt; &#123;
        return !todo.done;
      &#125;);
    &#125;,
  &#125;,
  watch: &#123;
    todos: &#123;
      deep: true,
      handler(value) &#123;
        localStorage.setItem(&quot;todos&quot;, JSON.stringify(value));
      &#125;,
    &#125;,
  &#125;,
&#125;;
&lt;/script&gt;

&lt;style&gt;
/*base*/
body &#123;
  background: #fff;
&#125;


.btn &#123;
  display: inline-block;
  padding: 4px 12px;
  margin-bottom: 0;
  font-size: 14px;
  line-height: 20px;
  text-align: center;
  vertical-align: middle;
  cursor: pointer;
  box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.2),
    0 1px 2px rgba(0, 0, 0, 0.05);
  border-radius: 4px;
&#125;


.btn-danger &#123;
  color: #fff;
  background-color: #da4f49;
  border: 1px solid #bd362f;
&#125;


.btn-danger:hover &#123;
  color: #fff;
  background-color: #bd362f;
&#125;


.btn:focus &#123;
  outline: none;
&#125;


.todo-container &#123;
  width: 600px;
  margin: 0 auto;
&#125;
.todo-container .todo-wrap &#123;
  padding: 10px;
  border: 1px solid #ddd;
  border-radius: 5px;
&#125;
&lt;/style&gt;
</code></pre>
<p>main.js</p>
<pre><code class="javascript">import Vue from &quot;vue&quot;;
import App from &quot;./App.vue&quot;;

Vue.config.productionTip = false;

new Vue(&#123;
  el: &quot;#app&quot;,
  render: (h) =&gt; h(App),
&#125;);
</code></pre>
<h2 id="全局事件总线"><a href="#全局事件总线" class="headerlink" title="全局事件总线"></a>全局事件总线</h2><ol>
<li>一种组件间通信的方式，适用于任意组件间通信。</li>
<li>安装全局事件总线：</li>
</ol>
<pre><code class="javascript">new Vue(&#123;
    ......
    beforeCreate() &#123;
        Vue.prototype.$bus = this //安装全局事件总线，$bus就是当前应用的vm
    &#125;,
    ......
&#125;)
</code></pre>
<ol start="3">
<li>使用事件总线：</li>
<li>接收数据：A 组件想接收数据，则在 A 组件中给$bus 绑定自定义事件，事件的回调留在 A 组件自身。</li>
</ol>
<pre><code class="javascript">methods()&#123;
  demo(data)&#123;......&#125;
&#125;
......
mounted() &#123;
  this.$bus.$on(&#39;xxxx&#39;,this.demo)
&#125;
</code></pre>
<ol start="2">
<li>提供数据：<code>this.$bus.$emit(&#39;xxxx&#39;,数据)</code></li>
<li>最好在 beforeDestroy 钩子中，用$off 去解绑当前组件所用到的事件。</li>
</ol>
<p>全局事件总线: 任意组件间通信<br><img src="https://cdn.jsdelivr.net/gh/roudoukou/roudoukou.github.io/blog-img/FufykFAdFQQAq1XdURkZCZTfMR4d.png"><br>School.vue</p>
<pre><code class="vue">&lt;template&gt;
   
  &lt;div class=&quot;school&quot;&gt;
       
    &lt;h2&gt;学校名称: &#123;&#123; name &#125;&#125;&lt;/h2&gt;
       
    &lt;h2&gt;学校地址: &#123;&#123; address &#125;&#125;&lt;/h2&gt;
     
  &lt;/div&gt;
&lt;/template&gt;

&lt;script&gt;
export default &#123;
  name: &quot;School&quot;,
  data() &#123;
    return &#123;
      name: &quot;尚硅谷&quot;,
      address: &quot;北京&quot;,
    &#125;;
  &#125;,
  mounted() &#123;
    // console.log(&#39;School&#39;, this.x);
    this.$bus.$on(&quot;hello&quot;, (data) =&gt; &#123;
      console.log(&quot;我是School组件，收到了数据&quot;, data);
    &#125;);
  &#125;,
  beforeDestroy() &#123;
    this.$bus.$off(&quot;bus&quot;);
  &#125;,
&#125;;
&lt;/script&gt;

&lt;style lang=&quot;less&quot; scoped&gt;
.school &#123;
  background-color: lightpink;
  padding: 5px;
  margin-top: 30px;
&#125;
&lt;/style&gt;
</code></pre>
<p>Student.vue</p>
<pre><code class="vue">&lt;template&gt;
   
  &lt;div class=&quot;student&quot;&gt;
       
    &lt;h2&gt;学生姓名: &#123;&#123; name &#125;&#125;&lt;/h2&gt;
       
    &lt;h2&gt;学生性别: &#123;&#123; sex &#125;&#125;&lt;/h2&gt;
        &lt;button @click=&quot;sendStudentName&quot;&gt;把学生名给School组件&lt;/button&gt;  
  &lt;/div&gt;
&lt;/template&gt;

&lt;script&gt;
export default &#123;
  name: &quot;Student&quot;,
  data() &#123;
    return &#123;
      name: &quot;张三&quot;,
      sex: &quot;男&quot;,
    &#125;;
  &#125;,
  methods: &#123;
    sendStudentName() &#123;
      // console.log(&quot;Student&quot;, this.x);
      this.$bus.$emit(&quot;hello&quot;, this.name);
    &#125;,
  &#125;, // mounted() &#123; //   console.log(&quot;Student&quot;, this.x); //   this.x.$on(&#39;hello&#39;, (data) =&gt; &#123; //     console.log(&#39;我是School组件, 收到了数据&#39;, data); //   &#125;) // &#125;,
&#125;;
&lt;/script&gt;

&lt;style scoped&gt;
.student &#123;
  background-color: lightblue;
  padding: 5px;
  margin-top: 30px;
&#125;
&lt;/style&gt;
</code></pre>
<p>App.vue</p>
<pre><code class="vue">&lt;template&gt;
   
  &lt;div class=&quot;app&quot;&gt;
       
    &lt;h2&gt;&#123;&#123; msg &#125;&#125;&lt;/h2&gt;
        &lt;School /&gt;    
    &lt;hr /&gt;
        &lt;Student /&gt;  
  &lt;/div&gt;
&lt;/template&gt;

&lt;script&gt;
import Student from &quot;./components/Student.vue&quot;;
import School from &quot;./components/School.vue&quot;;

export default &#123;
  name: &quot;App&quot;,
  components: &#123;
    Student,
    School,
  &#125;,
  data() &#123;
    return &#123;
      msg: &quot;你好啊!&quot;,
    &#125;;
  &#125;,
&#125;;
&lt;/script&gt;

&lt;style scoped&gt;
.app &#123;
  background-color: gray;
&#125;
&lt;/style&gt;
</code></pre>
<p>main.js</p>
<pre><code class="javascript">import Vue from &quot;vue&quot;;
import App from &quot;./App.vue&quot;;

Vue.config.productionTip = false;

/* window.x = &#123;a: 1, b: 2&#125; */

/* Vue.prototype.x = &#123; a: 1, b: 2 &#125;
console.log(Vue.prototype); */

/* const Demo = Vue.extend(&#123;
    a: 1,
    b: 2
&#125;)
const d = new Demo()
Vue.prototype.x = d */

new Vue(&#123;
  el: &quot;#app&quot;,
  render: (h) =&gt; h(App),
  beforeCreate() &#123;
    Vue.prototype.$bus = this;
  &#125;,
&#125;);
</code></pre>
<h3 id="TodoList-事件总线"><a href="#TodoList-事件总线" class="headerlink" title="TodoList_事件总线"></a>TodoList_事件总线</h3><p>MyHeader.vue</p>
<pre><code class="vue">&lt;template&gt;
   
  &lt;div class=&quot;todo-header&quot;&gt;
       
    &lt;input
      type=&quot;text&quot;
      v-model=&quot;todoName&quot;
      @keyup.enter=&quot;add&quot;
      placeholder=&quot;请输入你的任务名称，按回车键确认&quot;
    /&gt;
     
  &lt;/div&gt;
&lt;/template&gt;

&lt;script&gt;
import &#123; nanoid &#125; from &quot;nanoid&quot;;
export default &#123;
  name: &quot;MyHeader&quot;, // props: [&quot;addTodoObj&quot;],
  data() &#123;
    return &#123;
      todoName: &quot;&quot;,
    &#125;;
  &#125;,
  methods: &#123;
    add() &#123;
      if (!this.todoName) &#123;
        alert(&quot;请输入点什么吧&quot;);
        return;
      &#125;
      const todoObj = &#123; id: nanoid(), title: this.todoName, done: false &#125;; // console.log(todoObj); // this.addTodoObj(todoObj);
      this.$emit(&quot;addTodoObj&quot;, todoObj);
      this.todoName = &quot;&quot;;
    &#125;,
  &#125;,
&#125;;
&lt;/script&gt;

&lt;style scoped&gt;
/*header*/
.todo-header input &#123;
  width: 560px;
  height: 28px;
  font-size: 14px;
  border: 1px solid #ccc;
  border-radius: 4px;
  padding: 4px 7px;
&#125;


.todo-header input:focus &#123;
  outline: none;
  border-color: rgba(82, 168, 236, 0.8);
  box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.075),
    0 0 8px rgba(82, 168, 236, 0.6);
&#125;
&lt;/style&gt;
</code></pre>
<p>MyList.vue</p>
<pre><code class="vue">&lt;template&gt;
   
  &lt;ul class=&quot;todo-main&quot;&gt;
       
    &lt;MyItem v-for=&quot;todoObj in todos&quot; :key=&quot;todoObj.id&quot; :todoObj=&quot;todoObj&quot; /&gt;
     
  &lt;/ul&gt;
&lt;/template&gt;

&lt;script scoped&gt;
import MyItem from &quot;./MyItem.vue&quot;;
export default &#123;
  name: &quot;MyList&quot;,
  components: &#123;
    MyItem,
  &#125;,
  props: [&quot;todos&quot;],
&#125;;
&lt;/script&gt;

&lt;style&gt;
/*main*/
.todo-main &#123;
  margin-left: 0px;
  border: 1px solid #ddd;
  border-radius: 2px;
  padding: 0px;
&#125;


.todo-empty &#123;
  height: 40px;
  line-height: 40px;
  border: 1px solid #ddd;
  border-radius: 2px;
  padding-left: 5px;
  margin-top: 10px;
&#125;
&lt;/style&gt;
</code></pre>
<p>MyItem.vue</p>
<pre><code class="vue">&lt;template&gt;
   
  &lt;li&gt;
       
    &lt;label&gt;
           
      &lt;input
        type=&quot;checkbox&quot;
        :checked=&quot;todoObj.done&quot;
        @change=&quot;handleCheck(todoObj.id)&quot;
      /&gt;
            &lt;span&gt;&#123;&#123; todoObj.title &#125;&#125;&lt;/span&gt;    
    &lt;/label&gt;
       
    &lt;!-- 如下代码也能实现功能，但是不太推荐，因为有点违反原则，因为修改了props --&gt;
       
    &lt;!-- &lt;input type=&quot;checkbox&quot; v-model=&quot;todoObj.done&quot;/&gt; --&gt;
       
    &lt;button class=&quot;btn btn-danger&quot; @click=&quot;handleDelete(todoObj.id)&quot;&gt;
            删除    
    &lt;/button&gt;
     
  &lt;/li&gt;
&lt;/template&gt;

&lt;script&gt;
export default &#123;
  name: &quot;MyItem&quot;,
  props: [&quot;todoObj&quot;],
  data() &#123;
    return &#123;&#125;;
  &#125;,
  methods: &#123;
    handleCheck(id) &#123;
      // this.checkTodo(id);
      this.$bus.$emit(&quot;checkTodo&quot;, id);
    &#125;,
    handleDelete(id) &#123;
      // this.deleteTodoObj(id);

      this.$bus.$emit(&quot;deleteTodoObj&quot;, id);
    &#125;,
  &#125;,
&#125;;
&lt;/script&gt;

&lt;style scoped&gt;
/*item*/
li &#123;
  list-style: none;
  height: 36px;
  line-height: 36px;
  padding: 0 5px;
  border-bottom: 1px solid #ddd;
&#125;


li label &#123;
  float: left;
  cursor: pointer;
&#125;


li label li input &#123;
  vertical-align: middle;
  margin-right: 6px;
  position: relative;
  top: -1px;
&#125;


li button &#123;
  float: right;
  display: none;
  margin-top: 3px;
&#125;


li:before &#123;
  content: initial;
&#125;


li:last-child &#123;
  border-bottom: none;
&#125;


li:hover &#123;
  background-color: #ccc;
&#125;


li:hover button &#123;
  display: block;
&#125;
&lt;/style&gt;
</code></pre>
<p>MyFoot.vue</p>
<pre><code class="vue">&lt;template&gt;
   
  &lt;div class=&quot;todo-footer&quot; v-show=&quot;total&quot;&gt;
       
    &lt;label&gt;
           
      &lt;!-- &lt;input type=&quot;checkbox&quot; :checked=&quot;isAll&quot; @change=&quot;checkAll&quot; /&gt; --&gt;
            &lt;input type=&quot;checkbox&quot; v-model=&quot;isAll&quot; /&gt;    
    &lt;/label&gt;
       
    &lt;span&gt;
            &lt;span&gt;已完成&#123;&#123; calcTodoTotal &#125;&#125;&lt;/span&gt; / 全部&#123;&#123; total &#125;&#125;    
    &lt;/span&gt;
       
    &lt;button class=&quot;btn btn-danger&quot; @click=&quot;clearAll&quot;&gt;清除已完成任务&lt;/button&gt;  
  &lt;/div&gt;
&lt;/template&gt;

&lt;script&gt;
export default &#123;
  name: &quot;MyFooter&quot;,
  props: [&quot;todos&quot;],
  computed: &#123;
    // isAll() &#123;
    //   return this.total === this.calcTodoTotal &amp;&amp; this.total &gt; 0;
    // &#125;,
    total() &#123;
      return this.todos.length;
    &#125;,
    calcTodoTotal() &#123;
      /*       let i = 0
      this.todos.forEach((todo) =&gt; &#123;
        if (todo.done === true) i++
      &#125;);
      return i */
      /*       return this.todos.reduce((pre, current) =&gt; &#123;
        // console.log(current.done);
        return pre + (current.done ? 1 : 0)
      &#125;, 0) */
      return this.todos.reduce((pre, todo) =&gt; pre + (todo.done ? 1 : 0), 0);
    &#125;,
    isAll: &#123;
      get() &#123;
        return this.total === this.calcTodoTotal &amp;&amp; this.total &gt; 0;
      &#125;,
      set(value) &#123;
        // this.checkAllTodo(value)
        this.$emit(&quot;checkAllTodo&quot;, value);
      &#125;,
    &#125;,
  &#125;,
  methods: &#123;
    checkAll(e) &#123;
      // console.log(e.target.checked);
      this.checkAllTodo(e.target.checked);
    &#125;,
    clearAll() &#123;
      // this.clearAllTodo()
      this.$emit(&quot;clearAllTodo&quot;);
    &#125;,
  &#125;,
&#125;;
&lt;/script&gt;

&lt;style scoped&gt;
/*footer*/
.todo-footer &#123;
  height: 40px;
  line-height: 40px;
  padding-left: 6px;
  margin-top: 5px;
&#125;


.todo-footer label &#123;
  display: inline-block;
  margin-right: 20px;
  cursor: pointer;
&#125;


.todo-footer label input &#123;
  position: relative;
  top: -1px;
  vertical-align: middle;
  margin-right: 5px;
&#125;


.todo-footer button &#123;
  float: right;
  margin-top: 5px;
&#125;
&lt;/style&gt;
</code></pre>
<p>App.vue</p>
<pre><code class="vue">&lt;template&gt;
   
  &lt;div id=&quot;root&quot;&gt;
       
    &lt;div class=&quot;todo-container&quot;&gt;
           
      &lt;div class=&quot;todo-wrap&quot;&gt;
                &lt;MyHeader @addTodoObj=&quot;addTodoObj&quot; /&gt;        
        &lt;MyList :todos=&quot;todos&quot; /&gt;        
        &lt;MyFooter
          :todos=&quot;todos&quot;
          @checkAllTodo=&quot;checkAllTodo&quot;
          @clearAllTodo=&quot;clearAllTodo&quot;
        /&gt;
             
      &lt;/div&gt;
         
    &lt;/div&gt;
     
  &lt;/div&gt;
&lt;/template&gt;

&lt;script&gt;
import MyHeader from &quot;./components/MyHeader.vue&quot;;
import MyList from &quot;./components/MyList.vue&quot;;
import MyFooter from &quot;./components/MyFooter.vue&quot;;

export default &#123;
  name: &quot;App&quot;,
  components: &#123;
    MyHeader,
    MyList,
    MyFooter,
  &#125;,
  data() &#123;
    return &#123;
      todos: JSON.parse(localStorage.getItem(&quot;todos&quot;)) || [],
    &#125;;
  &#125;,
  methods: &#123;
    addTodoObj(todoObj) &#123;
      this.todos.unshift(todoObj);
    &#125;,
    checkTodo(id) &#123;
      this.todos.forEach((todoObj) =&gt; &#123;
        if (todoObj.id === id) &#123;
          todoObj.done = !todoObj.done; // console.log(todoObj.done);
        &#125;
      &#125;);
    &#125;,
    deleteTodoObj(id) &#123;
      if (confirm(&quot;是否确定删除&quot;)) &#123;
        this.todos = this.todos.filter((todo) =&gt; &#123;
          return todo.id !== id;
        &#125;);
      &#125;
    &#125;,
    checkAllTodo(value) &#123;
      this.todos.forEach((todo) =&gt; &#123;
        todo.done = value;
      &#125;);
    &#125;,
    clearAllTodo() &#123;
      this.todos = this.todos.filter((todo) =&gt; &#123;
        return !todo.done;
      &#125;);
    &#125;,
  &#125;,
  watch: &#123;
    todos: &#123;
      deep: true,
      handler(value) &#123;
        localStorage.setItem(&quot;todos&quot;, JSON.stringify(value));
      &#125;,
    &#125;,
  &#125;,
  mounted() &#123;
    this.$bus.$on(&quot;checkTodo&quot;, this.checkTodo);
    this.$bus.$on(&quot;deleteTodoObj&quot;, this.deleteTodoObj);
  &#125;,
&#125;;
&lt;/script&gt;

&lt;style&gt;
/*base*/
body &#123;
  background: #fff;
&#125;


.btn &#123;
  display: inline-block;
  padding: 4px 12px;
  margin-bottom: 0;
  font-size: 14px;
  line-height: 20px;
  text-align: center;
  vertical-align: middle;
  cursor: pointer;
  box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.2),
    0 1px 2px rgba(0, 0, 0, 0.05);
  border-radius: 4px;
&#125;


.btn-danger &#123;
  color: #fff;
  background-color: #da4f49;
  border: 1px solid #bd362f;
&#125;


.btn-danger:hover &#123;
  color: #fff;
  background-color: #bd362f;
&#125;


.btn:focus &#123;
  outline: none;
&#125;


.todo-container &#123;
  width: 600px;
  margin: 0 auto;
&#125;
.todo-container .todo-wrap &#123;
  padding: 10px;
  border: 1px solid #ddd;
  border-radius: 5px;
&#125;
&lt;/style&gt;
</code></pre>
<p>main.js</p>
<pre><code class="javascript">import Vue from &quot;vue&quot;;
import App from &quot;./App.vue&quot;;

Vue.config.productionTip = false;

new Vue(&#123;
  el: &quot;#app&quot;,
  render: (h) =&gt; h(App),
  beforeCreate() &#123;
    Vue.prototype.$bus = this;
  &#125;,
&#125;);
</code></pre>
<h2 id="消息的订阅与发布"><a href="#消息的订阅与发布" class="headerlink" title="消息的订阅与发布"></a>消息的订阅与发布</h2><ol>
<li>一种组件间通信的方式，适用于任意组件间通信。</li>
<li>使用步骤：</li>
<li>安装 pubsub：<code>npm i pubsub-js</code></li>
<li>引入: <code>import pubsub from &#39;pubsub-js&#39;</code></li>
<li>接收数据：A 组件想接收数据，则在 A 组件中订阅消息，订阅的回调留在 A 组件自身。</li>
</ol>
<pre><code class="javascript">methods()&#123;
  demo(data)&#123;......&#125;
&#125;
......
mounted() &#123;
  this.pid = pubsub.subscribe(&#39;xxx&#39;,this.demo) //订阅消息
&#125;
</code></pre>
<ol start="4">
<li>提供数据：<code>pubsub.publish(&#39;xxx&#39;,数据)</code></li>
<li>最好在 beforeDestroy 钩子中，用<code>PubSub.unsubscribe(pid)</code>去取消订阅。</li>
</ol>
<p>报纸订阅与发布 1.订阅报纸: 住址 2.邮递员送报纸: 报纸<br>报纸订阅与发布 1.订阅消息: 消息名 2.发布消息: 消息内容<br><img src="https://cdn.jsdelivr.net/gh/roudoukou/roudoukou.github.io/blog-img/FguaN3hLVDII1E688Nlk0u3z6boY.png"><br>安装 pubsub 库<br>PS E:\Code\Vue\vue_test&gt; npm i pubsub-js<br>added 1 package in 3s<br>School.vue</p>
<pre><code class="vue">&lt;template&gt;
   
  &lt;div class=&quot;school&quot;&gt;
       
    &lt;h2&gt;学校名称: &#123;&#123; name &#125;&#125;&lt;/h2&gt;
       
    &lt;h2&gt;学校地址: &#123;&#123; address &#125;&#125;&lt;/h2&gt;
     
  &lt;/div&gt;
&lt;/template&gt;

&lt;script&gt;
import pubsub from &quot;pubsub-js&quot;;
export default &#123;
  name: &quot;School&quot;,
  data() &#123;
    return &#123;
      name: &quot;尚硅谷&quot;,
      address: &quot;北京&quot;,
    &#125;;
  &#125;,
  mounted() &#123;
    pubsub.subscribe(&quot;hello&quot;, function (msgName, data) &#123;
      console.log(&quot;有人发布了hello消息, hello下次的回调执行了&quot;, msgName, data);
    &#125;);
  &#125;,
  beforeDestroy() &#123;&#125;,
&#125;;
&lt;/script&gt;

&lt;style lang=&quot;less&quot; scoped&gt;
.school &#123;
  background-color: lightpink;
  padding: 5px;
  margin-top: 30px;
&#125;
&lt;/style&gt;
</code></pre>
<p>Student.vue</p>
<pre><code class="vue">&lt;template&gt;
   
  &lt;div class=&quot;student&quot;&gt;
       
    &lt;h2&gt;学生姓名: &#123;&#123; name &#125;&#125;&lt;/h2&gt;
       
    &lt;h2&gt;学生性别: &#123;&#123; sex &#125;&#125;&lt;/h2&gt;
        &lt;button @click=&quot;sendStudentName&quot;&gt;把学生名给School组件&lt;/button&gt;  
  &lt;/div&gt;
&lt;/template&gt;

&lt;script&gt;
import pubsub from &quot;pubsub-js&quot;;
export default &#123;
  name: &quot;Student&quot;,
  data() &#123;
    return &#123;
      name: &quot;张三&quot;,
      sex: &quot;男&quot;,
    &#125;;
  &#125;,
  methods: &#123;
    sendStudentName() &#123;
      pubsub.publish(&quot;hello&quot;, 666);
    &#125;,
  &#125;,
  mounted() &#123;&#125;,
&#125;;
&lt;/script&gt;

&lt;style scoped&gt;
.student &#123;
  background-color: lightblue;
  padding: 5px;
  margin-top: 30px;
&#125;
&lt;/style&gt;
</code></pre>
<p>App.vue</p>
<pre><code class="vue">&lt;template&gt;
   
  &lt;div class=&quot;app&quot;&gt;
       
    &lt;h2&gt;&#123;&#123; msg &#125;&#125;&lt;/h2&gt;
        &lt;School /&gt;     &lt;Student /&gt;  
  &lt;/div&gt;
&lt;/template&gt;

&lt;script&gt;
import Student from &quot;./components/Student.vue&quot;;
import School from &quot;./components/School.vue&quot;;

export default &#123;
  name: &quot;App&quot;,
  components: &#123;
    Student,
    School,
  &#125;,
  data() &#123;
    return &#123;
      msg: &quot;你好啊!&quot;,
    &#125;;
  &#125;,
&#125;;
&lt;/script&gt;

&lt;style scoped&gt;
.app &#123;
  background-color: gray;
&#125;
&lt;/style&gt;
</code></pre>
<p>main.js</p>
<pre><code class="javascript">import Vue from &quot;vue&quot;;
import App from &quot;./App.vue&quot;;

Vue.config.productionTip = false;

new Vue(&#123;
  el: &quot;#app&quot;,
  render: (h) =&gt; h(App),
&#125;);
</code></pre>
<h3 id="TodoList-pubsub"><a href="#TodoList-pubsub" class="headerlink" title="TodoList_pubsub"></a>TodoList_pubsub</h3><p>MyHeader.vue</p>
<pre><code class="vue">&lt;template&gt;
   
  &lt;div class=&quot;todo-header&quot;&gt;
       
    &lt;input
      type=&quot;text&quot;
      v-model=&quot;todoName&quot;
      @keyup.enter=&quot;add&quot;
      placeholder=&quot;请输入你的任务名称，按回车键确认&quot;
    /&gt;
     
  &lt;/div&gt;
&lt;/template&gt;

&lt;script&gt;
import &#123; nanoid &#125; from &quot;nanoid&quot;;
export default &#123;
  name: &quot;MyHeader&quot;, // props: [&quot;addTodoObj&quot;],
  data() &#123;
    return &#123;
      todoName: &quot;&quot;,
    &#125;;
  &#125;,
  methods: &#123;
    add() &#123;
      if (!this.todoName) &#123;
        alert(&quot;请输入点什么吧&quot;);
        return;
      &#125;
      const todoObj = &#123; id: nanoid(), title: this.todoName, done: false &#125;; // console.log(todoObj); // this.addTodoObj(todoObj);
      this.$emit(&quot;addTodoObj&quot;, todoObj);
      this.todoName = &quot;&quot;;
    &#125;,
  &#125;,
&#125;;
&lt;/script&gt;

&lt;style scoped&gt;
/*header*/
.todo-header input &#123;
  width: 560px;
  height: 28px;
  font-size: 14px;
  border: 1px solid #ccc;
  border-radius: 4px;
  padding: 4px 7px;
&#125;


.todo-header input:focus &#123;
  outline: none;
  border-color: rgba(82, 168, 236, 0.8);
  box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.075),
    0 0 8px rgba(82, 168, 236, 0.6);
&#125;
&lt;/style&gt;
</code></pre>
<p>MyList.vue</p>
<pre><code class="vue">&lt;template&gt;
   
  &lt;ul class=&quot;todo-main&quot;&gt;
       
    &lt;MyItem v-for=&quot;todoObj in todos&quot; :key=&quot;todoObj.id&quot; :todoObj=&quot;todoObj&quot; /&gt;
     
  &lt;/ul&gt;
&lt;/template&gt;

&lt;script scoped&gt;
import MyItem from &quot;./MyItem.vue&quot;;
export default &#123;
  name: &quot;MyList&quot;,
  components: &#123;
    MyItem,
  &#125;,
  props: [&quot;todos&quot;],
&#125;;
&lt;/script&gt;

&lt;style&gt;
/*main*/
.todo-main &#123;
  margin-left: 0px;
  border: 1px solid #ddd;
  border-radius: 2px;
  padding: 0px;
&#125;


.todo-empty &#123;
  height: 40px;
  line-height: 40px;
  border: 1px solid #ddd;
  border-radius: 2px;
  padding-left: 5px;
  margin-top: 10px;
&#125;
&lt;/style&gt;
</code></pre>
<p>MyItem.vue</p>
<pre><code class="vue">&lt;template&gt;
   
  &lt;li&gt;
       
    &lt;label&gt;
           
      &lt;input
        type=&quot;checkbox&quot;
        :checked=&quot;todoObj.done&quot;
        @change=&quot;handleCheck(todoObj.id)&quot;
      /&gt;
            &lt;span&gt;&#123;&#123; todoObj.title &#125;&#125;&lt;/span&gt;    
    &lt;/label&gt;
       
    &lt;!-- 如下代码也能实现功能，但是不太推荐，因为有点违反原则，因为修改了props --&gt;
       
    &lt;!-- &lt;input type=&quot;checkbox&quot; v-model=&quot;todoObj.done&quot;/&gt; --&gt;
       
    &lt;button class=&quot;btn btn-danger&quot; @click=&quot;handleDelete(todoObj.id)&quot;&gt;
            删除    
    &lt;/button&gt;
     
  &lt;/li&gt;
&lt;/template&gt;

&lt;script&gt;
import pubsub from &quot;pubsub-js&quot;;
export default &#123;
  name: &quot;MyItem&quot;,
  props: [&quot;todoObj&quot;],
  data() &#123;
    return &#123;&#125;;
  &#125;,
  methods: &#123;
    handleCheck(id) &#123;
      // this.checkTodo(id);
      this.$bus.$emit(&quot;checkTodo&quot;, id);
    &#125;,
    handleDelete(id) &#123;
      // this.deleteTodoObj(id);
      // this.$bus.$emit(&quot;deleteTodoObj&quot;, id);
      pubsub.publish(&quot;deleteTodoObj&quot;, id);
    &#125;,
  &#125;,
&#125;;
&lt;/script&gt;

&lt;style scoped&gt;
/*item*/
li &#123;
  list-style: none;
  height: 36px;
  line-height: 36px;
  padding: 0 5px;
  border-bottom: 1px solid #ddd;
&#125;


li label &#123;
  float: left;
  cursor: pointer;
&#125;


li label li input &#123;
  vertical-align: middle;
  margin-right: 6px;
  position: relative;
  top: -1px;
&#125;


li button &#123;
  float: right;
  display: none;
  margin-top: 3px;
&#125;


li:before &#123;
  content: initial;
&#125;


li:last-child &#123;
  border-bottom: none;
&#125;


li:hover &#123;
  background-color: #ccc;
&#125;


li:hover button &#123;
  display: block;
&#125;
&lt;/style&gt;
</code></pre>
<p>MyFooter.vue</p>
<pre><code class="vue">&lt;template&gt;
   
  &lt;div class=&quot;todo-footer&quot; v-show=&quot;total&quot;&gt;
       
    &lt;label&gt;
           
      &lt;!-- &lt;input type=&quot;checkbox&quot; :checked=&quot;isAll&quot; @change=&quot;checkAll&quot; /&gt; --&gt;
            &lt;input type=&quot;checkbox&quot; v-model=&quot;isAll&quot; /&gt;    
    &lt;/label&gt;
       
    &lt;span&gt;
            &lt;span&gt;已完成&#123;&#123; calcTodoTotal &#125;&#125;&lt;/span&gt; / 全部&#123;&#123; total &#125;&#125;    
    &lt;/span&gt;
       
    &lt;button class=&quot;btn btn-danger&quot; @click=&quot;clearAll&quot;&gt;清除已完成任务&lt;/button&gt;  
  &lt;/div&gt;
&lt;/template&gt;

&lt;script&gt;
export default &#123;
  name: &quot;MyFooter&quot;,
  props: [&quot;todos&quot;],
  computed: &#123;
    // isAll() &#123;
    //   return this.total === this.calcTodoTotal &amp;&amp; this.total &gt; 0;
    // &#125;,
    total() &#123;
      return this.todos.length;
    &#125;,
    calcTodoTotal() &#123;
      /*       let i = 0
      this.todos.forEach((todo) =&gt; &#123;
        if (todo.done === true) i++
      &#125;);
      return i */
      /*       return this.todos.reduce((pre, current) =&gt; &#123;
        // console.log(current.done);
        return pre + (current.done ? 1 : 0)
      &#125;, 0) */
      return this.todos.reduce((pre, todo) =&gt; pre + (todo.done ? 1 : 0), 0);
    &#125;,
    isAll: &#123;
      get() &#123;
        return this.total === this.calcTodoTotal &amp;&amp; this.total &gt; 0;
      &#125;,
      set(value) &#123;
        // this.checkAllTodo(value)
        this.$emit(&quot;checkAllTodo&quot;, value);
      &#125;,
    &#125;,
  &#125;,
  methods: &#123;
    checkAll(e) &#123;
      // console.log(e.target.checked);
      this.checkAllTodo(e.target.checked);
    &#125;,
    clearAll() &#123;
      // this.clearAllTodo()
      this.$emit(&quot;clearAllTodo&quot;);
    &#125;,
  &#125;,
&#125;;
&lt;/script&gt;

&lt;style scoped&gt;
/*footer*/
.todo-footer &#123;
  height: 40px;
  line-height: 40px;
  padding-left: 6px;
  margin-top: 5px;
&#125;


.todo-footer label &#123;
  display: inline-block;
  margin-right: 20px;
  cursor: pointer;
&#125;


.todo-footer label input &#123;
  position: relative;
  top: -1px;
  vertical-align: middle;
  margin-right: 5px;
&#125;


.todo-footer button &#123;
  float: right;
  margin-top: 5px;
&#125;
&lt;/style&gt;
</code></pre>
<p>App.vue</p>
<pre><code class="vue">&lt;template&gt;
   
  &lt;div id=&quot;root&quot;&gt;
       
    &lt;div class=&quot;todo-container&quot;&gt;
           
      &lt;div class=&quot;todo-wrap&quot;&gt;
                &lt;MyHeader @addTodoObj=&quot;addTodoObj&quot; /&gt;        
        &lt;MyList :todos=&quot;todos&quot; /&gt;        
        &lt;MyFooter
          :todos=&quot;todos&quot;
          @checkAllTodo=&quot;checkAllTodo&quot;
          @clearAllTodo=&quot;clearAllTodo&quot;
        /&gt;
             
      &lt;/div&gt;
         
    &lt;/div&gt;
     
  &lt;/div&gt;
&lt;/template&gt;

&lt;script&gt;
import pubsub from &quot;pubsub-js&quot;;
import MyHeader from &quot;./components/MyHeader.vue&quot;;
import MyList from &quot;./components/MyList.vue&quot;;
import MyFooter from &quot;./components/MyFooter.vue&quot;;

export default &#123;
  name: &quot;App&quot;,
  components: &#123;
    MyHeader,
    MyList,
    MyFooter,
  &#125;,
  data() &#123;
    return &#123;
      todos: JSON.parse(localStorage.getItem(&quot;todos&quot;)) || [],
    &#125;;
  &#125;,
  methods: &#123;
    addTodoObj(todoObj) &#123;
      this.todos.unshift(todoObj);
    &#125;,
    checkTodo(id) &#123;
      this.todos.forEach((todoObj) =&gt; &#123;
        if (todoObj.id === id) &#123;
          todoObj.done = !todoObj.done; // console.log(todoObj.done);
        &#125;
      &#125;);
    &#125;, // 下划线只是用来占位的, _表示订阅名
    deleteTodoObj(_, id) &#123;
      if (confirm(&quot;是否确定删除&quot;)) &#123;
        this.todos = this.todos.filter((todo) =&gt; &#123;
          return todo.id !== id;
        &#125;);
      &#125;
    &#125;,
    checkAllTodo(value) &#123;
      this.todos.forEach((todo) =&gt; &#123;
        todo.done = value;
      &#125;);
    &#125;,
    clearAllTodo() &#123;
      this.todos = this.todos.filter((todo) =&gt; &#123;
        return !todo.done;
      &#125;);
    &#125;,
  &#125;,
  watch: &#123;
    todos: &#123;
      deep: true,
      handler(value) &#123;
        localStorage.setItem(&quot;todos&quot;, JSON.stringify(value));
      &#125;,
    &#125;,
  &#125;,
  mounted() &#123;
    this.$bus.$on(&quot;checkTodo&quot;, this.checkTodo); // this.$bus.$on(&#39;deleteTodoObj&#39;, this.deleteTodoObj)
    this.pubId = pubsub.subscribe(&quot;deleteTodoObj&quot;, this.deleteTodoObj);
  &#125;,
  beforeDestroy() &#123;
    pubsub.unsubscribe(this.pubId);
  &#125;,
&#125;;
&lt;/script&gt;

&lt;style&gt;
/*base*/
body &#123;
  background: #fff;
&#125;


.btn &#123;
  display: inline-block;
  padding: 4px 12px;
  margin-bottom: 0;
  font-size: 14px;
  line-height: 20px;
  text-align: center;
  vertical-align: middle;
  cursor: pointer;
  box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.2),
    0 1px 2px rgba(0, 0, 0, 0.05);
  border-radius: 4px;
&#125;


.btn-danger &#123;
  color: #fff;
  background-color: #da4f49;
  border: 1px solid #bd362f;
&#125;


.btn-danger:hover &#123;
  color: #fff;
  background-color: #bd362f;
&#125;


.btn:focus &#123;
  outline: none;
&#125;


.todo-container &#123;
  width: 600px;
  margin: 0 auto;
&#125;
.todo-container .todo-wrap &#123;
  padding: 10px;
  border: 1px solid #ddd;
  border-radius: 5px;
&#125;
&lt;/style&gt;
</code></pre>
<p>main.js</p>
<pre><code class="javascript">import Vue from &quot;vue&quot;;
import App from &quot;./App.vue&quot;;

Vue.config.productionTip = false;

new Vue(&#123;
  el: &quot;#app&quot;,
  render: (h) =&gt; h(App),
  beforeCreate() &#123;
    Vue.prototype.$bus = this;
  &#125;,
&#125;);
</code></pre>
<h2 id="TodoList-nextTick"><a href="#TodoList-nextTick" class="headerlink" title="TodoList_nextTick"></a>TodoList_nextTick</h2><ol>
<li>语法：<code>this.$nextTick(回调函数)</code></li>
<li>作用：在下一次 DOM 更新结束后执行其指定的回调。</li>
<li>什么时候用：当改变数据后，要基于更新后的新 DOM 进行某些操作时，要在 nextTick 所指定的回调函数中执行。</li>
</ol>
<p>MyHeader.vue</p>
<pre><code class="vue">&lt;template&gt;
   
  &lt;div class=&quot;todo-header&quot;&gt;
       
    &lt;input
      type=&quot;text&quot;
      v-model=&quot;todoName&quot;
      @keyup.enter=&quot;add&quot;
      placeholder=&quot;请输入你的任务名称，按回车键确认&quot;
    /&gt;
     
  &lt;/div&gt;
&lt;/template&gt;

&lt;script&gt;
import &#123; nanoid &#125; from &quot;nanoid&quot;;
export default &#123;
  name: &quot;MyHeader&quot;, // props: [&quot;addTodoObj&quot;],
  data() &#123;
    return &#123;
      todoName: &quot;&quot;,
    &#125;;
  &#125;,
  methods: &#123;
    add() &#123;
      if (!this.todoName) &#123;
        alert(&quot;请输入点什么吧&quot;);
        return;
      &#125;
      const todoObj = &#123; id: nanoid(), title: this.todoName, done: false &#125;; // console.log(todoObj); // this.addTodoObj(todoObj);
      this.$emit(&quot;addTodoObj&quot;, todoObj);
      this.todoName = &quot;&quot;;
    &#125;,
  &#125;,
&#125;;
&lt;/script&gt;

&lt;style scoped&gt;
/*header*/
.todo-header input &#123;
  width: 560px;
  height: 28px;
  font-size: 14px;
  border: 1px solid #ccc;
  border-radius: 4px;
  padding: 4px 7px;
&#125;


.todo-header input:focus &#123;
  outline: none;
  border-color: rgba(82, 168, 236, 0.8);
  box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.075),
    0 0 8px rgba(82, 168, 236, 0.6);
&#125;
&lt;/style&gt;
</code></pre>
<p>MyList.vue</p>
<pre><code class="vue">&lt;template&gt;
   
  &lt;ul class=&quot;todo-main&quot;&gt;
       
    &lt;MyItem v-for=&quot;todoObj in todos&quot; :key=&quot;todoObj.id&quot; :todoObj=&quot;todoObj&quot; /&gt;
     
  &lt;/ul&gt;
&lt;/template&gt;

&lt;script scoped&gt;
import MyItem from &quot;./MyItem.vue&quot;;
export default &#123;
  name: &quot;MyList&quot;,
  components: &#123;
    MyItem,
  &#125;,
  props: [&quot;todos&quot;],
&#125;;
&lt;/script&gt;

&lt;style&gt;
/*main*/
.todo-main &#123;
  margin-left: 0px;
  border: 1px solid #ddd;
  border-radius: 2px;
  padding: 0px;
&#125;


.todo-empty &#123;
  height: 40px;
  line-height: 40px;
  border: 1px solid #ddd;
  border-radius: 2px;
  padding-left: 5px;
  margin-top: 10px;
&#125;
&lt;/style&gt;
</code></pre>
<p>MyItem.vue</p>
<pre><code class="vue">&lt;template&gt;
   
  &lt;li&gt;
       
    &lt;label&gt;
           
      &lt;input
        type=&quot;checkbox&quot;
        :checked=&quot;todoObj.done&quot;
        @change=&quot;handleCheck(todoObj.id)&quot;
      /&gt;
            &lt;span v-show=&quot;!todoObj.isEdit&quot;&gt;&#123;&#123; todoObj.title &#125;&#125;&lt;/span&gt;      
      &lt;input
        v-show=&quot;todoObj.isEdit&quot;
        type=&quot;text&quot;
        :value=&quot;todoObj.title&quot;
        @blur=&quot;handleBlur(todoObj, $event)&quot;
        ref=&quot;inputTitle&quot;
      /&gt;
         
    &lt;/label&gt;
       
    &lt;!-- 如下代码也能实现功能，但是不太推荐，因为有点违反原则，因为修改了props --&gt;
       
    &lt;!-- &lt;input type=&quot;checkbox&quot; v-model=&quot;todoObj.done&quot;/&gt; --&gt;
       
    &lt;button class=&quot;btn btn-danger&quot; @click=&quot;handleDelete(todoObj.id)&quot;&gt;
            删除    
    &lt;/button&gt;
       
    &lt;button
      class=&quot;btn btn-edit&quot;
      @click=&quot;handleEdit(todoObj)&quot;
      v-show=&quot;!todoObj.isEdit&quot;
    &gt;
            编辑    
    &lt;/button&gt;
     
  &lt;/li&gt;
&lt;/template&gt;

&lt;script&gt;
import pubsub from &quot;pubsub-js&quot;;
export default &#123;
  name: &quot;MyItem&quot;,
  props: [&quot;todoObj&quot;],
  data() &#123;
    return &#123;&#125;;
  &#125;,
  methods: &#123;
    handleCheck(id) &#123;
      // this.checkTodo(id);
      this.$bus.$emit(&quot;checkTodo&quot;, id);
    &#125;,
    handleDelete(id) &#123;
      // this.deleteTodoObj(id);
      // this.$bus.$emit(&quot;deleteTodoObj&quot;, id);
      pubsub.publish(&quot;deleteTodoObj&quot;, id);
    &#125;, //编辑
    handleEdit(todoObj) &#123;
      if (todoObj.hasOwnProperty(&quot;isEdit&quot;)) &#123;
        todoObj.isEdit = true;
      &#125; else &#123;
        this.$set(todoObj, &quot;isEdit&quot;, true);
      &#125; /* setTimeout(() =&gt; &#123; // 设置定时器
        this.$refs.inputTitle.focus();
      &#125;, 200); */ /* setTimeout(() =&gt; &#123; // 不正规写法(定时器里面不写时间)
        this.$refs.inputTitle.focus();
      &#125;); */

      this.$nextTick(function () &#123;
        this.$refs.inputTitle.focus();
      &#125;);
    &#125;, //失去焦点回调（真正执行修改逻辑）
    handleBlur(todoObj, e) &#123;
      todoObj.isEdit = false;
      if (!e.target.value.trim()) &#123;
        return alert(&quot;输入不能为空&quot;);
      &#125; // console.log(e.target.value);

      this.todoObj.title = e.target.value;
    &#125;,
  &#125;,
&#125;;
&lt;/script&gt;

&lt;style scoped&gt;
/*item*/
li &#123;
  list-style: none;
  height: 36px;
  line-height: 36px;
  padding: 0 5px;
  border-bottom: 1px solid #ddd;
&#125;


li label &#123;
  float: left;
  cursor: pointer;
&#125;


li label li input &#123;
  vertical-align: middle;
  margin-right: 6px;
  position: relative;
  top: -1px;
&#125;


li button &#123;
  float: right;
  display: none;
  margin-top: 3px;
&#125;


li:before &#123;
  content: initial;
&#125;


li:last-child &#123;
  border-bottom: none;
&#125;


li:hover &#123;
  background-color: #ccc;
&#125;


li:hover button &#123;
  display: block;
&#125;
&lt;/style&gt;
</code></pre>
<p>MyFooter.vue</p>
<pre><code class="vue">&lt;template&gt;
   
  &lt;div class=&quot;todo-footer&quot; v-show=&quot;total&quot;&gt;
       
    &lt;label&gt;
           
      &lt;!-- &lt;input type=&quot;checkbox&quot; :checked=&quot;isAll&quot; @change=&quot;checkAll&quot; /&gt; --&gt;
            &lt;input type=&quot;checkbox&quot; v-model=&quot;isAll&quot; /&gt;    
    &lt;/label&gt;
       
    &lt;span&gt;
            &lt;span&gt;已完成&#123;&#123; calcTodoTotal &#125;&#125;&lt;/span&gt; / 全部&#123;&#123; total &#125;&#125;    
    &lt;/span&gt;
       
    &lt;button class=&quot;btn btn-danger&quot; @click=&quot;clearAll&quot;&gt;清除已完成任务&lt;/button&gt;  
  &lt;/div&gt;
&lt;/template&gt;

&lt;script&gt;
export default &#123;
  name: &quot;MyFooter&quot;,
  props: [&quot;todos&quot;],
  computed: &#123;
    // isAll() &#123;
    //   return this.total === this.calcTodoTotal &amp;&amp; this.total &gt; 0;
    // &#125;,
    total() &#123;
      return this.todos.length;
    &#125;,
    calcTodoTotal() &#123;
      /*       let i = 0
      this.todos.forEach((todo) =&gt; &#123;
        if (todo.done === true) i++
      &#125;);
      return i */
      /*       return this.todos.reduce((pre, current) =&gt; &#123;
        // console.log(current.done);
        return pre + (current.done ? 1 : 0)
      &#125;, 0) */
      return this.todos.reduce((pre, todo) =&gt; pre + (todo.done ? 1 : 0), 0);
    &#125;,
    isAll: &#123;
      get() &#123;
        return this.total === this.calcTodoTotal &amp;&amp; this.total &gt; 0;
      &#125;,
      set(value) &#123;
        // this.checkAllTodo(value)
        this.$emit(&quot;checkAllTodo&quot;, value);
      &#125;,
    &#125;,
  &#125;,
  methods: &#123;
    checkAll(e) &#123;
      // console.log(e.target.checked);
      this.checkAllTodo(e.target.checked);
    &#125;,
    clearAll() &#123;
      // this.clearAllTodo()
      this.$emit(&quot;clearAllTodo&quot;);
    &#125;,
  &#125;,
&#125;;
&lt;/script&gt;

&lt;style scoped&gt;
/*footer*/
.todo-footer &#123;
  height: 40px;
  line-height: 40px;
  padding-left: 6px;
  margin-top: 5px;
&#125;


.todo-footer label &#123;
  display: inline-block;
  margin-right: 20px;
  cursor: pointer;
&#125;


.todo-footer label input &#123;
  position: relative;
  top: -1px;
  vertical-align: middle;
  margin-right: 5px;
&#125;


.todo-footer button &#123;
  float: right;
  margin-top: 5px;
&#125;
&lt;/style&gt;
</code></pre>
<p>App.vue</p>
<pre><code class="vue">&lt;template&gt;
   
  &lt;div id=&quot;root&quot;&gt;
       
    &lt;div class=&quot;todo-container&quot;&gt;
           
      &lt;div class=&quot;todo-wrap&quot;&gt;
                &lt;MyHeader @addTodoObj=&quot;addTodoObj&quot; /&gt;        
        &lt;MyList :todos=&quot;todos&quot; /&gt;        
        &lt;MyFooter
          :todos=&quot;todos&quot;
          @checkAllTodo=&quot;checkAllTodo&quot;
          @clearAllTodo=&quot;clearAllTodo&quot;
        /&gt;
             
      &lt;/div&gt;
         
    &lt;/div&gt;
     
  &lt;/div&gt;
&lt;/template&gt;

&lt;script&gt;
import pubsub from &quot;pubsub-js&quot;;
import MyHeader from &quot;./components/MyHeader.vue&quot;;
import MyList from &quot;./components/MyList.vue&quot;;
import MyFooter from &quot;./components/MyFooter.vue&quot;;

export default &#123;
  name: &quot;App&quot;,
  components: &#123;
    MyHeader,
    MyList,
    MyFooter,
  &#125;,
  data() &#123;
    return &#123;
      todos: JSON.parse(localStorage.getItem(&quot;todos&quot;)) || [],
    &#125;;
  &#125;,
  methods: &#123;
    addTodoObj(todoObj) &#123;
      this.todos.unshift(todoObj);
    &#125;,
    checkTodo(id) &#123;
      this.todos.forEach((todoObj) =&gt; &#123;
        if (todoObj.id === id) &#123;
          todoObj.done = !todoObj.done; // console.log(todoObj.done);
        &#125;
      &#125;);
    &#125;, // 下划线只是用来占位的, _表示订阅名
    deleteTodoObj(_, id) &#123;
      if (confirm(&quot;是否确定删除&quot;)) &#123;
        this.todos = this.todos.filter((todo) =&gt; &#123;
          return todo.id !== id;
        &#125;);
      &#125;
    &#125;,
    checkAllTodo(value) &#123;
      this.todos.forEach((todo) =&gt; &#123;
        todo.done = value;
      &#125;);
    &#125;,
    clearAllTodo() &#123;
      this.todos = this.todos.filter((todo) =&gt; &#123;
        return !todo.done;
      &#125;);
    &#125;,
  &#125;,
  watch: &#123;
    todos: &#123;
      deep: true,
      handler(value) &#123;
        localStorage.setItem(&quot;todos&quot;, JSON.stringify(value));
      &#125;,
    &#125;,
  &#125;,
  mounted() &#123;
    this.$bus.$on(&quot;checkTodo&quot;, this.checkTodo); // this.$bus.$on(&#39;deleteTodoObj&#39;, this.deleteTodoObj)
    this.pubId = pubsub.subscribe(&quot;deleteTodoObj&quot;, this.deleteTodoObj);
  &#125;,
  beforeDestroy() &#123;
    pubsub.unsubscribe(this.pubId);
  &#125;,
&#125;;
&lt;/script&gt;

&lt;style&gt;
/*base*/
body &#123;
  background: #fff;
&#125;


.btn &#123;
  display: inline-block;
  padding: 4px 12px;
  margin-bottom: 0;
  font-size: 14px;
  line-height: 20px;
  text-align: center;
  vertical-align: middle;
  cursor: pointer;
  box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.2),
    0 1px 2px rgba(0, 0, 0, 0.05);
  border-radius: 4px;
&#125;


.btn-danger &#123;
  color: #fff;
  background-color: #da4f49;
  border: 1px solid #bd362f;
&#125;


.btn-edit &#123;
  color: #fff;
  background-color: skyblue;
  border: 1px solid rgb(103, 159, 180);
  margin-right: 5px;
&#125;


.btn-danger:hover &#123;
  color: #fff;
  background-color: #bd362f;
&#125;


.btn:focus &#123;
  outline: none;
&#125;


.todo-container &#123;
  width: 600px;
  margin: 0 auto;
&#125;
.todo-container .todo-wrap &#123;
  padding: 10px;
  border: 1px solid #ddd;
  border-radius: 5px;
&#125;
&lt;/style&gt;
</code></pre>
<p>main.js</p>
<pre><code class="javascript">import Vue from &quot;vue&quot;;
import App from &quot;./App.vue&quot;;

Vue.config.productionTip = false;

new Vue(&#123;
  el: &quot;#app&quot;,
  render: (h) =&gt; h(App),
  beforeCreate() &#123;
    Vue.prototype.$bus = this;
  &#125;,
&#125;);
</code></pre>
<h2 id="动画"><a href="#动画" class="headerlink" title="动画"></a>动画</h2><ol>
<li><p>作用：在插入、更新或移除 DOM 元素时，在合适的时候给元素添加样式类名。</p>
</li>
<li><p>图示：<img src="https://cdn.jsdelivr.net/gh/roudoukou/roudoukou.github.io/blog-img/FiiuK6ZczbWD15-FuMyVCfrml0k7.com/app/a/100520146/5990c1dff7dc7a8fb3b34b4462bd0105"></p>
</li>
<li><p>写法：</p>
</li>
<li><p>准备好样式：</p>
<ul>
<li>元素进入的样式：<ol>
<li>v-enter：进入的起点</li>
<li>v-enter-active：进入过程中</li>
<li>v-enter-to：进入的终点</li>
</ol>
</li>
<li>元素离开的样式：<ol>
<li>v-leave：离开的起点</li>
<li>v-leave-active：离开过程中</li>
<li>v-leave-to：离开的终点</li>
</ol>
</li>
</ul>
</li>
<li><p>使用<code>&lt;transition&gt;</code>包裹要过度的元素，并配置 name 属性：</p>
</li>
</ol>
<pre><code class="vue">&lt;transition name=&quot;hello&quot;&gt;
    &lt;h1 v-show=&quot;isShow&quot;&gt;你好啊！&lt;/h1&gt;
&lt;/transition&gt;
</code></pre>
<ol start="2">
<li>备注：若有多个元素需要过度，则需要使用：<code>&lt;transition-group&gt;</code>，且每个元素都要指定<code>key</code>值。</li>
</ol>
<p>集成第三方动画<br>$ npm install animate.css –save<br>main.js</p>
<pre><code class="javascript">import Vue from &quot;vue&quot;;
import App from &quot;./App.vue&quot;;

Vue.config.productionTip = false;

new Vue(&#123;
  el: &quot;#app&quot;,
  render: (h) =&gt; h(App),
  beforeCreate() &#123;
    Vue.prototype.$bus = this;
  &#125;,
&#125;);
</code></pre>
<p>App.vue</p>
<pre><code class="vue">&lt;template&gt;
   
  &lt;div id=&quot;root&quot;&gt;
       
    &lt;div class=&quot;todo-container&quot;&gt;
           
      &lt;div class=&quot;todo-wrap&quot;&gt;
                &lt;MyHeader @addTodoObj=&quot;addTodoObj&quot; /&gt;        
        &lt;MyList :todos=&quot;todos&quot; /&gt;        
        &lt;MyFooter
          :todos=&quot;todos&quot;
          @checkAllTodo=&quot;checkAllTodo&quot;
          @clearAllTodo=&quot;clearAllTodo&quot;
        /&gt;
             
      &lt;/div&gt;
         
    &lt;/div&gt;
     
  &lt;/div&gt;
&lt;/template&gt;

&lt;script&gt;
import pubsub from &quot;pubsub-js&quot;;
import MyHeader from &quot;./components/MyHeader.vue&quot;;
import MyList from &quot;./components/MyList.vue&quot;;
import MyFooter from &quot;./components/MyFooter.vue&quot;;

export default &#123;
  name: &quot;App&quot;,
  components: &#123;
    MyHeader,
    MyList,
    MyFooter,
  &#125;,
  data() &#123;
    return &#123;
      todos: JSON.parse(localStorage.getItem(&quot;todos&quot;)) || [],
    &#125;;
  &#125;,
  methods: &#123;
    addTodoObj(todoObj) &#123;
      this.todos.unshift(todoObj);
    &#125;,
    checkTodo(id) &#123;
      this.todos.forEach((todoObj) =&gt; &#123;
        if (todoObj.id === id) &#123;
          todoObj.done = !todoObj.done; // console.log(todoObj.done);
        &#125;
      &#125;);
    &#125;, // 下划线只是用来占位的, _表示订阅名
    deleteTodoObj(_, id) &#123;
      if (confirm(&quot;是否确定删除&quot;)) &#123;
        this.todos = this.todos.filter((todo) =&gt; &#123;
          return todo.id !== id;
        &#125;);
      &#125;
    &#125;,
    checkAllTodo(value) &#123;
      this.todos.forEach((todo) =&gt; &#123;
        todo.done = value;
      &#125;);
    &#125;,
    clearAllTodo() &#123;
      this.todos = this.todos.filter((todo) =&gt; &#123;
        return !todo.done;
      &#125;);
    &#125;,
  &#125;,
  watch: &#123;
    todos: &#123;
      deep: true,
      handler(value) &#123;
        localStorage.setItem(&quot;todos&quot;, JSON.stringify(value));
      &#125;,
    &#125;,
  &#125;,
  mounted() &#123;
    this.$bus.$on(&quot;checkTodo&quot;, this.checkTodo); // this.$bus.$on(&#39;deleteTodoObj&#39;, this.deleteTodoObj)
    this.pubId = pubsub.subscribe(&quot;deleteTodoObj&quot;, this.deleteTodoObj);
  &#125;,
  beforeDestroy() &#123;
    pubsub.unsubscribe(this.pubId);
  &#125;,
&#125;;
&lt;/script&gt;

&lt;style&gt;
/*base*/
body &#123;
  background: #fff;
&#125;


.btn &#123;
  display: inline-block;
  padding: 4px 12px;
  margin-bottom: 0;
  font-size: 14px;
  line-height: 20px;
  text-align: center;
  vertical-align: middle;
  cursor: pointer;
  box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.2),
    0 1px 2px rgba(0, 0, 0, 0.05);
  border-radius: 4px;
&#125;


.btn-danger &#123;
  color: #fff;
  background-color: #da4f49;
  border: 1px solid #bd362f;
&#125;


.btn-edit &#123;
  color: #fff;
  background-color: skyblue;
  border: 1px solid rgb(103, 159, 180);
  margin-right: 5px;
&#125;


.btn-danger:hover &#123;
  color: #fff;
  background-color: #bd362f;
&#125;


.btn:focus &#123;
  outline: none;
&#125;


.todo-container &#123;
  width: 600px;
  margin: 0 auto;
&#125;
.todo-container .todo-wrap &#123;
  padding: 10px;
  border: 1px solid #ddd;
  border-radius: 5px;
&#125;
&lt;/style&gt;
</code></pre>
<p>MyHeader.vue</p>
<pre><code class="vue">&lt;template&gt;
   
  &lt;div class=&quot;todo-header&quot;&gt;
       
    &lt;input
      type=&quot;text&quot;
      v-model=&quot;todoName&quot;
      @keyup.enter=&quot;add&quot;
      placeholder=&quot;请输入你的任务名称，按回车键确认&quot;
    /&gt;
     
  &lt;/div&gt;
&lt;/template&gt;

&lt;script&gt;
import &#123; nanoid &#125; from &quot;nanoid&quot;;
export default &#123;
  name: &quot;MyHeader&quot;, // props: [&quot;addTodoObj&quot;],
  data() &#123;
    return &#123;
      todoName: &quot;&quot;,
    &#125;;
  &#125;,
  methods: &#123;
    add() &#123;
      if (!this.todoName) &#123;
        alert(&quot;请输入点什么吧&quot;);
        return;
      &#125;
      const todoObj = &#123; id: nanoid(), title: this.todoName, done: false &#125;; // console.log(todoObj); // this.addTodoObj(todoObj);
      this.$emit(&quot;addTodoObj&quot;, todoObj);
      this.todoName = &quot;&quot;;
    &#125;,
  &#125;,
&#125;;
&lt;/script&gt;

&lt;style scoped&gt;
/*header*/
.todo-header input &#123;
  width: 560px;
  height: 28px;
  font-size: 14px;
  border: 1px solid #ccc;
  border-radius: 4px;
  padding: 4px 7px;
&#125;


.todo-header input:focus &#123;
  outline: none;
  border-color: rgba(82, 168, 236, 0.8);
  box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.075),
    0 0 8px rgba(82, 168, 236, 0.6);
&#125;
&lt;/style&gt;
</code></pre>
<p>MyList.vue</p>
<pre><code class="vue">&lt;template&gt;
   
  &lt;ul class=&quot;todo-main&quot;&gt;
       
    &lt;!-- &lt;transition-group 
    appear
    name=&quot;todo&quot;
    &gt; --&gt;
       
    &lt;transition-group
      appear
      name=&quot;animate__animated animate__bounce&quot;
      enter-active-class=&quot;animate__headShake&quot;
      leave-active-class=&quot;animate__bounceOut&quot;
    &gt;
           
      &lt;MyItem v-for=&quot;todoObj in todos&quot; :key=&quot;todoObj.id&quot; :todoObj=&quot;todoObj&quot; /&gt;  
       
    &lt;/transition-group&gt;
     
  &lt;/ul&gt;
&lt;/template&gt;

&lt;script scoped&gt;
import &quot;animate.css&quot;;
import MyItem from &quot;./MyItem.vue&quot;;
export default &#123;
  name: &quot;MyList&quot;,
  components: &#123;
    MyItem,
  &#125;,
  props: [&quot;todos&quot;],
&#125;;
&lt;/script&gt;

&lt;style&gt;
/*main*/
.todo-main &#123;
  margin-left: 0px;
  border: 1px solid #ddd;
  border-radius: 2px;
  padding: 0px;
&#125;


.todo-empty &#123;
  height: 40px;
  line-height: 40px;
  border: 1px solid #ddd;
  border-radius: 2px;
  padding-left: 5px;
  margin-top: 10px;
&#125;


.todo-enter-active &#123;
  animation: atguigu 0.5s linear;
&#125;


.todo-leave-active &#123;
  animation: atguigu 0.5s linear reverse;
&#125;


@keyframes atguigu &#123;
  from &#123;
    transform: translateX(100%);
  &#125;
  to &#123;
    transform: translateX(0);
  &#125;
&#125;
&lt;/style&gt;
</code></pre>
<p>MyItem.vue</p>
<pre><code class="vue">&lt;template&gt;
   
  &lt;li&gt;
       
    &lt;label&gt;
           
      &lt;input
        type=&quot;checkbox&quot;
        :checked=&quot;todoObj.done&quot;
        @change=&quot;handleCheck(todoObj.id)&quot;
      /&gt;
            &lt;span v-show=&quot;!todoObj.isEdit&quot;&gt;&#123;&#123; todoObj.title &#125;&#125;&lt;/span&gt;      
      &lt;input
        v-show=&quot;todoObj.isEdit&quot;
        type=&quot;text&quot;
        :value=&quot;todoObj.title&quot;
        @blur=&quot;handleBlur(todoObj, $event)&quot;
        ref=&quot;inputTitle&quot;
      /&gt;
         
    &lt;/label&gt;
       
    &lt;!-- 如下代码也能实现功能，但是不太推荐，因为有点违反原则，因为修改了props --&gt;
       
    &lt;!-- &lt;input type=&quot;checkbox&quot; v-model=&quot;todoObj.done&quot;/&gt; --&gt;
       
    &lt;button class=&quot;btn btn-danger&quot; @click=&quot;handleDelete(todoObj.id)&quot;&gt;
            删除    
    &lt;/button&gt;
       
    &lt;button
      class=&quot;btn btn-edit&quot;
      @click=&quot;handleEdit(todoObj)&quot;
      v-show=&quot;!todoObj.isEdit&quot;
    &gt;
            编辑    
    &lt;/button&gt;
     
  &lt;/li&gt;
&lt;/template&gt;

&lt;script&gt;
import pubsub from &quot;pubsub-js&quot;;
export default &#123;
  name: &quot;MyItem&quot;,
  props: [&quot;todoObj&quot;],
  data() &#123;
    return &#123;&#125;;
  &#125;,
  methods: &#123;
    handleCheck(id) &#123;
      // this.checkTodo(id);
      this.$bus.$emit(&quot;checkTodo&quot;, id);
    &#125;,
    handleDelete(id) &#123;
      // this.deleteTodoObj(id);
      // this.$bus.$emit(&quot;deleteTodoObj&quot;, id);
      pubsub.publish(&quot;deleteTodoObj&quot;, id);
    &#125;, //编辑
    handleEdit(todoObj) &#123;
      if (todoObj.hasOwnProperty(&quot;isEdit&quot;)) &#123;
        todoObj.isEdit = true;
      &#125; else &#123;
        this.$set(todoObj, &quot;isEdit&quot;, true);
      &#125; /* setTimeout(() =&gt; &#123; // 设置定时器
        this.$refs.inputTitle.focus();
      &#125;, 200); */ /* setTimeout(() =&gt; &#123; // 不正规写法(定时器里面不写时间)
        this.$refs.inputTitle.focus();
      &#125;); */

      this.$nextTick(function () &#123;
        this.$refs.inputTitle.focus();
      &#125;);
    &#125;, //失去焦点回调（真正执行修改逻辑）
    handleBlur(todoObj, e) &#123;
      todoObj.isEdit = false;
      if (!e.target.value.trim()) &#123;
        return alert(&quot;输入不能为空&quot;);
      &#125; // console.log(e.target.value);

      this.todoObj.title = e.target.value;
    &#125;,
  &#125;,
&#125;;
&lt;/script&gt;

&lt;style scoped&gt;
/*item*/
li &#123;
  list-style: none;
  height: 36px;
  line-height: 36px;
  padding: 0 5px;
  border-bottom: 1px solid #ddd;
&#125;


li label &#123;
  float: left;
  cursor: pointer;
&#125;


li label li input &#123;
  vertical-align: middle;
  margin-right: 6px;
  position: relative;
  top: -1px;
&#125;


li button &#123;
  float: right;
  display: none;
  margin-top: 3px;
&#125;


li:before &#123;
  content: initial;
&#125;


li:last-child &#123;
  border-bottom: none;
&#125;


li:hover &#123;
  background-color: #ccc;
&#125;


li:hover button &#123;
  display: block;
&#125;
&lt;/style&gt;
</code></pre>
<p>MyFooter.vue</p>
<pre><code class="vue">&lt;template&gt;
   
  &lt;div class=&quot;todo-footer&quot; v-show=&quot;total&quot;&gt;
       
    &lt;label&gt;
           
      &lt;!-- &lt;input type=&quot;checkbox&quot; :checked=&quot;isAll&quot; @change=&quot;checkAll&quot; /&gt; --&gt;
            &lt;input type=&quot;checkbox&quot; v-model=&quot;isAll&quot; /&gt;    
    &lt;/label&gt;
       
    &lt;span&gt;
            &lt;span&gt;已完成&#123;&#123; calcTodoTotal &#125;&#125;&lt;/span&gt; / 全部&#123;&#123; total &#125;&#125;    
    &lt;/span&gt;
       
    &lt;button class=&quot;btn btn-danger&quot; @click=&quot;clearAll&quot;&gt;清除已完成任务&lt;/button&gt;  
  &lt;/div&gt;
&lt;/template&gt;

&lt;script&gt;
export default &#123;
  name: &quot;MyFooter&quot;,
  props: [&quot;todos&quot;],
  computed: &#123;
    // isAll() &#123;
    //   return this.total === this.calcTodoTotal &amp;&amp; this.total &gt; 0;
    // &#125;,
    total() &#123;
      return this.todos.length;
    &#125;,
    calcTodoTotal() &#123;
      /*       let i = 0
      this.todos.forEach((todo) =&gt; &#123;
        if (todo.done === true) i++
      &#125;);
      return i */
      /*       return this.todos.reduce((pre, current) =&gt; &#123;
        // console.log(current.done);
        return pre + (current.done ? 1 : 0)
      &#125;, 0) */
      return this.todos.reduce((pre, todo) =&gt; pre + (todo.done ? 1 : 0), 0);
    &#125;,
    isAll: &#123;
      get() &#123;
        return this.total === this.calcTodoTotal &amp;&amp; this.total &gt; 0;
      &#125;,
      set(value) &#123;
        // this.checkAllTodo(value)
        this.$emit(&quot;checkAllTodo&quot;, value);
      &#125;,
    &#125;,
  &#125;,
  methods: &#123;
    checkAll(e) &#123;
      // console.log(e.target.checked);
      this.checkAllTodo(e.target.checked);
    &#125;,
    clearAll() &#123;
      // this.clearAllTodo()
      this.$emit(&quot;clearAllTodo&quot;);
    &#125;,
  &#125;,
&#125;;
&lt;/script&gt;

&lt;style scoped&gt;
/*footer*/
.todo-footer &#123;
  height: 40px;
  line-height: 40px;
  padding-left: 6px;
  margin-top: 5px;
&#125;


.todo-footer label &#123;
  display: inline-block;
  margin-right: 20px;
  cursor: pointer;
&#125;


.todo-footer label input &#123;
  position: relative;
  top: -1px;
  vertical-align: middle;
  margin-right: 5px;
&#125;


.todo-footer button &#123;
  float: right;
  margin-top: 5px;
&#125;
&lt;/style&gt;
</code></pre>
<h2 id="代理服务器"><a href="#代理服务器" class="headerlink" title="代理服务器"></a>代理服务器</h2><p>PS E:\Code\Vue\vue_test&gt; npm i axios</p>
<p><img src="https://cdn.jsdelivr.net/gh/roudoukou/roudoukou.github.io/blog-img/FpFedqXkf05PvdyKsa_tftlNfyzr.png"><br>左边的 8080 是前端, 前端想跟 5000 后端要数据, 会产生跨域问题, 但是 8080 前端跟 8080 服务器是可以正常使用 AJAX 请求的, 8080 服务器跟 5000 服务器之间通信不会使用 AJAX 技术, 所以不存在所谓的跨域问题\</p>
<p>尽管 changeOrigin 设置 false 属性, F12 开发工具查看的 Referer 还是显示着 8080 端口的<br>这是因为浏览器只是将第一层请求显示给你（因为第一层请求是请求的本地服务器，域名、端口号和前端页面的域名、端口号都是一致的），第一层请求也就是发给代理服务器的请求，而修改 Host 的工作是代理服务器做的，浏览器当然不会显示 Host 已经被修改的状态！<br><img src="https://cdn.jsdelivr.net/gh/roudoukou/roudoukou.github.io/blog-img/FlhA41QkGDGgmKyssO0l2T6u38MT.png"><br>但是服务器中记录本地的端口来源于 8080 端口, 而不是 5000, 说明 changeOrigin 设置 false 已经生效了<br><img src="https://cdn.jsdelivr.net/gh/roudoukou/roudoukou.github.io/blog-img/FqNlH2I8WypRQW2XKLGxZWB4Frzk.png"></p>
<p>安装 vue-resource<br>E:\Code\Vue\vue_test&gt; npm i vue-resource</p>
<h3 id="方法一"><a href="#方法一" class="headerlink" title="方法一"></a>方法一</h3><pre><code>在vue.config.js中添加如下配置：
</code></pre>
<pre><code class="javascript">devServer: &#123;
  proxy: &quot;http://localhost:5000&quot;;
&#125;
</code></pre>
<p>说明：</p>
<ol>
<li>优点：配置简单，请求资源时直接发给前端（8080）即可。</li>
<li>缺点：不能配置多个代理，不能灵活的控制请求是否走代理。</li>
<li>工作方式：若按照上述配置代理，当请求了前端不存在的资源时，那么该请求会转发给服务器 （优先匹配前端资源）</li>
</ol>
<h3 id="方法二"><a href="#方法二" class="headerlink" title="方法二"></a>方法二</h3><pre><code>编写vue.config.js配置具体代理规则：
</code></pre>
<pre><code class="javascript">module.exports = &#123;
  devServer: &#123;
    proxy: &#123;
      &quot;/api1&quot;: &#123;
        // 匹配所有以 &#39;/api1&#39;开头的请求路径
        target: &quot;http://localhost:5000&quot;, // 代理目标的基础路径
        changeOrigin: true,
        pathRewrite: &#123; &quot;^/api1&quot;: &quot;&quot; &#125;,
      &#125;,
      &quot;/api2&quot;: &#123;
        // 匹配所有以 &#39;/api2&#39;开头的请求路径
        target: &quot;http://localhost:5001&quot;, // 代理目标的基础路径
        changeOrigin: true,
        pathRewrite: &#123; &quot;^/api2&quot;: &quot;&quot; &#125;,
      &#125;,
    &#125;,
  &#125;,
&#125;;
/*
   changeOrigin设置为true时，服务器收到的请求头中的host为：localhost:5000
   changeOrigin设置为false时，服务器收到的请求头中的host为：localhost:8080
   changeOrigin默认值为true
*/
</code></pre>
<p>说明：</p>
<ol>
<li>优点：可以配置多个代理，且可以灵活的控制请求是否走代理。</li>
<li>缺点：配置略微繁琐，请求资源时必须加前缀。</li>
</ol>
<h3 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h3><p>main.js</p>
<pre><code class="javascript">import Vue from &quot;vue&quot;;
import App from &quot;./App.vue&quot;;

Vue.config.productionTip = false;

new Vue(&#123;
  el: &quot;#app&quot;,
  render: (h) =&gt; h(App),
  beforeCreate() &#123;
    Vue.prototype.$bus = this;
  &#125;,
&#125;);
</code></pre>
<p>App.vue</p>
<pre><code class="vue">&lt;template&gt;
   
  &lt;div&gt;
        &lt;button @click=&quot;getStudents&quot;&gt;获取学生信息&lt;/button&gt;    
    &lt;button @click=&quot;getCars&quot;&gt;获取汽车信息&lt;/button&gt;  
  &lt;/div&gt;
&lt;/template&gt;

&lt;script&gt;
import axios from &quot;axios&quot;;
export default &#123;
  name: &quot;App&quot;,
  methods: &#123;
    getStudents() &#123;
      axios.get(&quot;http://localhost:8080/atguigu/students&quot;).then(
        (response) =&gt; &#123;
          console.log(response.data);
        &#125;,
        (error) =&gt; &#123;
          console.log(error.message);
        &#125;
      );
    &#125;,
    getCars() &#123;
      axios.get(&quot;http://localhost:8080/demo/cars&quot;).then(
        (response) =&gt; &#123;
          console.log(response.data);
        &#125;,
        (error) =&gt; &#123;
          console.log(error.message);
        &#125;
      );
    &#125;,
  &#125;,
&#125;;
&lt;/script&gt;
</code></pre>
<h2 id="github-搜索案例"><a href="#github-搜索案例" class="headerlink" title="github 搜索案例"></a>github 搜索案例</h2><h3 id="axios-实现"><a href="#axios-实现" class="headerlink" title="axios 实现"></a>axios 实现</h3><p>test.html</p>
<pre><code class="html">&lt;script type=&quot;text/javascript&quot;&gt;
  //编写一个javascript对象 ES6
  var user = &#123;
    name: &quot;小武&quot;,
    age: 18,
    sex: &quot;男&quot;,
  &#125;; //将JS对象转换为JSON对象
  var json = JSON.stringify(user);
  console.log(json);
  console.log(user);
  console.log(&quot;==================&quot;); //将JSON对象转换为JS对象 // var obj = JSON.parse(json);
  var obj = JSON.parse(json);
  console.log(obj);
&lt;/script&gt;
</code></pre>
<p>main.js</p>
<pre><code class="javascript">import Vue from &quot;vue&quot;;
import App from &quot;./App.vue&quot;;

Vue.config.productionTip = false;

new Vue(&#123;
  el: &quot;#app&quot;,
  render: (h) =&gt; h(App),
  beforeCreate() &#123;
    Vue.prototype.$bus = this;
  &#125;,
&#125;);
</code></pre>
<p>App.vue</p>
<pre><code class="vue">&lt;template&gt;
   
  &lt;div class=&quot;container&quot;&gt;    &lt;Search /&gt;     &lt;List /&gt;  &lt;/div&gt;
&lt;/template&gt;

&lt;script&gt;
import Search from &quot;./components/Search&quot;;
import List from &quot;./components/List&quot;;
export default &#123;
  name: &quot;App&quot;,
  components: &#123;
    Search,
    List,
  &#125;,
&#125;;
&lt;/script&gt;
</code></pre>
<p>Search.vue</p>
<pre><code class="vue">&lt;template&gt;
   
  &lt;section class=&quot;jumbotron&quot;&gt;
       
    &lt;h3 class=&quot;jumbotron-heading&quot;&gt;Search Github Users&lt;/h3&gt;
       
    &lt;div&gt;
           
      &lt;input
        type=&quot;text&quot;
        placeholder=&quot;enter the name you search&quot;
        v-model=&quot;keyWord&quot;
      /&gt;
                    &lt;button @click=&quot;searchUsers&quot;&gt;Search&lt;/button&gt;    
    &lt;/div&gt;
     
  &lt;/section&gt;
&lt;/template&gt;

&lt;script&gt;
import pubsub from &quot;pubsub-js&quot;;
import axios from &quot;axios&quot;;
export default &#123;
  name: &quot;Search&quot;,
  data() &#123;
    return &#123;
      keyWord: &quot;&quot;,
    &#125;;
  &#125;,
  methods: &#123;
    searchUsers() &#123;
      pubsub.publish(&quot;updateListData&quot;, &#123;
        isFirst: false,
        isLoading: true,
        errMsg: &quot;&quot;,
        users: [],
      &#125;); /*       this.$bus.$emit(&quot;updateListData&quot;, &#123;
        isFirst: false,
        isLoading: true,
        errMsg: &quot;&quot;,
        users: [],
      &#125;); */
      axios.get(`https://api.github.com/search/users?q=$&#123;this.keyWord&#125;`).then(
        (response) =&gt; &#123;
          console.log(
            &quot;请求成功了&quot;,
            response.data.items
          ); /* this.$bus.$emit(&quot;updateListData&quot;, &#123;
            isLoading: false,
            errMsg: &quot;&quot;,
            users: response.data.items,
          &#125;); */
          pubsub.publish(&quot;updateListData&quot;, &#123;
            isLoading: false,
            errMsg: &quot;&quot;,
            users: response.data.items,
          &#125;);
        &#125;,
        (error) =&gt; &#123;
          console.log(
            &quot;请求失败了&quot;,
            error.message
          ); /* this.$bus.$emit(&quot;updateListData&quot;, &#123;
            isLoading: false,
            errMsg: error.message,
            users: [],
          &#125;); */
          pubsub.publish(&quot;updateListData&quot;, &#123;
            isLoading: false,
            errMsg: error.message,
            users: [],
          &#125;);
        &#125;
      );
    &#125;,
  &#125;,
&#125;;
&lt;/script&gt;

&lt;style&gt;&lt;/style&gt;
</code></pre>
<p>List.vue</p>
<pre><code class="vue">&lt;template&gt;
   
  &lt;section class=&quot;jumbotron&quot;&gt;
       
    &lt;h3 class=&quot;jumbotron-heading&quot;&gt;Search Github Users&lt;/h3&gt;
       
    &lt;div&gt;
           
      &lt;input
        type=&quot;text&quot;
        placeholder=&quot;enter the name you search&quot;
        v-model=&quot;keyWord&quot;
      /&gt;
                    &lt;button @click=&quot;searchUsers&quot;&gt;Search&lt;/button&gt;    
    &lt;/div&gt;
     
  &lt;/section&gt;
&lt;/template&gt;

&lt;script&gt;
import pubsub from &quot;pubsub-js&quot;;
import axios from &quot;axios&quot;;
export default &#123;
  name: &quot;Search&quot;,
  data() &#123;
    return &#123;
      keyWord: &quot;&quot;,
    &#125;;
  &#125;,
  methods: &#123;
    searchUsers() &#123;
      pubsub.publish(&quot;updateListData&quot;, &#123;
        isFirst: false,
        isLoading: true,
        errMsg: &quot;&quot;,
        users: [],
      &#125;); /*       this.$bus.$emit(&quot;updateListData&quot;, &#123;
        isFirst: false,
        isLoading: true,
        errMsg: &quot;&quot;,
        users: [],
      &#125;); */
      axios.get(`https://api.github.com/search/users?q=$&#123;this.keyWord&#125;`).then(
        (response) =&gt; &#123;
          console.log(
            &quot;请求成功了&quot;,
            response.data.items
          ); /* this.$bus.$emit(&quot;updateListData&quot;, &#123;
            isLoading: false,
            errMsg: &quot;&quot;,
            users: response.data.items,
          &#125;); */
          pubsub.publish(&quot;updateListData&quot;, &#123;
            isLoading: false,
            errMsg: &quot;&quot;,
            users: response.data.items,
          &#125;);
        &#125;,
        (error) =&gt; &#123;
          console.log(
            &quot;请求失败了&quot;,
            error.message
          ); /* this.$bus.$emit(&quot;updateListData&quot;, &#123;
            isLoading: false,
            errMsg: error.message,
            users: [],
          &#125;); */
          pubsub.publish(&quot;updateListData&quot;, &#123;
            isLoading: false,
            errMsg: error.message,
            users: [],
          &#125;);
        &#125;
      );
    &#125;,
  &#125;,
&#125;;
&lt;/script&gt;

&lt;style&gt;&lt;/style&gt;
</code></pre>
<h3 id="vue-resource-实现"><a href="#vue-resource-实现" class="headerlink" title="vue-resource 实现"></a>vue-resource 实现</h3><p>test.html</p>
<pre><code class="html">&lt;script type=&quot;text/javascript&quot;&gt;
  //编写一个javascript对象 ES6
  var user = &#123;
    name: &quot;小武&quot;,
    age: 18,
    sex: &quot;男&quot;,
  &#125;; //将JS对象转换为JSON对象
  var json = JSON.stringify(user);
  console.log(json);
  console.log(user);
  console.log(&quot;==================&quot;); //将JSON对象转换为JS对象 // var obj = JSON.parse(json);
  var obj = JSON.parse(json);
  console.log(obj);
&lt;/script&gt;
</code></pre>
<p>main.js</p>
<pre><code class="javascript">import Vue from &quot;vue&quot;;
import App from &quot;./App.vue&quot;;
// 引入插件
import vueResource from &quot;vue-resource&quot;;

Vue.config.productionTip = false;
// 使用插件
Vue.use(vueResource);

new Vue(&#123;
  el: &quot;#app&quot;,
  render: (h) =&gt; h(App),
  beforeCreate() &#123;
    Vue.prototype.$bus = this;
  &#125;,
&#125;);
</code></pre>
<p>App.vue</p>
<pre><code class="vue">&lt;template&gt;
   
  &lt;div class=&quot;container&quot;&gt;    &lt;Search /&gt;     &lt;List /&gt;  &lt;/div&gt;
&lt;/template&gt;

&lt;script&gt;
import Search from &quot;./components/Search&quot;;
import List from &quot;./components/List&quot;;
export default &#123;
  name: &quot;App&quot;,
  components: &#123;
    Search,
    List,
  &#125;,
&#125;;
&lt;/script&gt;
</code></pre>
<p>Search.vue</p>
<pre><code class="vue">&lt;template&gt;
   
  &lt;section class=&quot;jumbotron&quot;&gt;
       
    &lt;h3 class=&quot;jumbotron-heading&quot;&gt;Search Github Users&lt;/h3&gt;
       
    &lt;div&gt;
           
      &lt;input
        type=&quot;text&quot;
        placeholder=&quot;enter the name you search&quot;
        v-model=&quot;keyWord&quot;
      /&gt;
                    &lt;button @click=&quot;searchUsers&quot;&gt;Search&lt;/button&gt;    
    &lt;/div&gt;
     
  &lt;/section&gt;
&lt;/template&gt;

&lt;script&gt;
import pubsub from &quot;pubsub-js&quot;;
export default &#123;
  name: &quot;Search&quot;,
  data() &#123;
    return &#123;
      keyWord: &quot;&quot;,
    &#125;;
  &#125;,
  methods: &#123;
    searchUsers() &#123;
      console.log(this);
      pubsub.publish(&quot;updateListData&quot;, &#123;
        isFirst: false,
        isLoading: true,
        errMsg: &quot;&quot;,
        users: [],
      &#125;); /*       this.$bus.$emit(&quot;updateListData&quot;, &#123;
        isFirst: false,
        isLoading: true,
        errMsg: &quot;&quot;,
        users: [],
      &#125;); */
      this.$http
        .get(`https://api.github.com/search/users?q=$&#123;this.keyWord&#125;`)
        .then(
          (response) =&gt; &#123;
            console.log(
              &quot;请求成功了&quot;,
              response.data.items
            ); /* this.$bus.$emit(&quot;updateListData&quot;, &#123;
            isLoading: false,
            errMsg: &quot;&quot;,
            users: response.data.items,
          &#125;); */
            pubsub.publish(&quot;updateListData&quot;, &#123;
              isLoading: false,
              errMsg: &quot;&quot;,
              users: response.data.items,
            &#125;);
          &#125;,
          (error) =&gt; &#123;
            console.log(
              &quot;请求失败了&quot;,
              error.message
            ); /* this.$bus.$emit(&quot;updateListData&quot;, &#123;
            isLoading: false,
            errMsg: error.message,
            users: [],
          &#125;); */
            pubsub.publish(&quot;updateListData&quot;, &#123;
              isLoading: false,
              errMsg: error.message,
              users: [],
            &#125;);
          &#125;
        );
    &#125;,
  &#125;,
&#125;;
&lt;/script&gt;

&lt;style&gt;&lt;/style&gt;
</code></pre>
<p>List.vue</p>
<pre><code class="vue">&lt;template&gt;
   
  &lt;div class=&quot;row&quot;&gt;
       
    &lt;!-- 展示用户列表 --&gt;
       
    &lt;div
      v-show=&quot;info.users.length&quot;
      class=&quot;card&quot;
      v-for=&quot;user in info.users&quot;
      :key=&quot;user.login&quot;
    &gt;
           
      &lt;a :href=&quot;user.html_url&quot; target=&quot;_blank&quot;&gt;
                &lt;img :src=&quot;user.avatar_url&quot; style=&quot;width: 100px&quot; /&gt;      
      &lt;/a&gt;
           
      &lt;p class=&quot;card-text&quot;&gt;&#123;&#123; user.login &#125;&#125;&lt;/p&gt;
         
    &lt;/div&gt;
       
    &lt;!-- 展示欢迎词 --&gt;
       
    &lt;h1 v-show=&quot;info.isFirst&quot;&gt;欢迎使用!&lt;/h1&gt;
       
    &lt;!-- 展示加载中 --&gt;
       
    &lt;h1 v-show=&quot;info.isLoading&quot;&gt;加载中...&lt;/h1&gt;
       
    &lt;!-- 展示错误信息 --&gt;
       
    &lt;h1 v-show=&quot;info.errMsg&quot;&gt;&#123;&#123; info.errMsg &#125;&#125;&lt;/h1&gt;
     
  &lt;/div&gt;
&lt;/template&gt;

&lt;script&gt;
import pubsub from &quot;pubsub-js&quot;;
export default &#123;
  name: &quot;List&quot;,
  data() &#123;
    return &#123;
      info: &#123;
        isFirst: true,
        isLoading: false,
        errMsg: &quot;&quot;,
        users: [],
      &#125;,
    &#125;;
  &#125;,
  mounted() &#123;
    pubsub.subscribe(&quot;updateListData&quot;, (_, dataObj) =&gt; &#123;
      console.log(&quot;List收到了数据&quot;, dataObj);
      this.info = &#123; ...this.info, ...dataObj &#125;;
    &#125;); /* this.$bus.$on(&quot;updateListData&quot;, (dataObj) =&gt; &#123;
      // console.log(&quot;List收到了数据&quot;, users);
      this.info = &#123; ...this.info, ...dataObj &#125;;
    &#125;); */
  &#125;,
&#125;;
&lt;/script&gt;

&lt;style scoped&gt;
.album &#123;
  min-height: 50rem; /* Can be removed; just added for demo purposes */
  padding-top: 3rem;
  padding-bottom: 3rem;
  background-color: #f7f7f7;
&#125;


.card &#123;
  float: left;
  width: 33.333%;
  padding: 0.75rem;
  margin-bottom: 2rem;
  border: 1px solid #efefef;
  text-align: center;
&#125;


.card &gt; img &#123;
  margin-bottom: 0.75rem;
  border-radius: 100px;
&#125;


.card-text &#123;
  font-size: 85%;
&#125;
&lt;/style&gt;
</code></pre>
<h2 id="插槽"><a href="#插槽" class="headerlink" title="插槽"></a>插槽</h2><ol>
<li>作用：让父组件可以向子组件指定位置插入 html 结构，也是一种组件间通信的方式，适用于 <strong>父组件 &#x3D;&#x3D;&#x3D;&gt; 子组件</strong> 。</li>
<li>分类：默认插槽、具名插槽、作用域插槽</li>
<li>使用方式：</li>
<li>默认插槽：</li>
</ol>
<pre><code class="vue">父组件中：
&lt;Category&gt;
           &lt;div&gt;html结构1&lt;/div&gt;
        &lt;/Category&gt;
子组件中：
&lt;template&gt;
  &lt;div&gt;
    &lt;!-- 定义插槽 --&gt;
    &lt;slot&gt;插槽默认内容...&lt;/slot&gt;
  &lt;/div&gt;
&lt;/template&gt;
</code></pre>
<ol start="2">
<li>具名插槽：</li>
</ol>
<pre><code class="vue">父组件中：
&lt;Category&gt;
            &lt;template slot=&quot;center&quot;&gt;
              &lt;div&gt;html结构1&lt;/div&gt;
            &lt;/template&gt;

            &lt;template v-slot:footer&gt;
               &lt;div&gt;html结构2&lt;/div&gt;
            &lt;/template&gt;
        &lt;/Category&gt;
子组件中：
&lt;template&gt;
  &lt;div&gt;
    &lt;!-- 定义插槽 --&gt;
    &lt;slot name=&quot;center&quot;&gt;插槽默认内容...&lt;/slot&gt;
    &lt;slot name=&quot;footer&quot;&gt;插槽默认内容...&lt;/slot&gt;
  &lt;/div&gt;
&lt;/template&gt;
</code></pre>
<ol start="3">
<li>作用域插槽：</li>
<li>理解：数据在组件的自身，但根据数据生成的结构需要组件的使用者来决定。（games 数据在 Category 组件中，但使用数据所遍历出来的结构由 App 组件决定）</li>
<li>具体编码：</li>
</ol>
<pre><code class="vue">父组件中：
&lt;Category&gt;
            &lt;template scope=&quot;scopeData&quot;&gt;
                &lt;!-- 生成的是ul列表 --&gt;
                &lt;ul&gt;
                    &lt;li v-for=&quot;g in scopeData.games&quot; :key=&quot;g&quot;&gt;&#123;&#123;g&#125;&#125;&lt;/li&gt;
                &lt;/ul&gt;
            &lt;/template&gt;
        &lt;/Category&gt;

&lt;Category&gt;
            &lt;template slot-scope=&quot;scopeData&quot;&gt;
                &lt;!-- 生成的是h4标题 --&gt;
                &lt;h4 v-for=&quot;g in scopeData.games&quot; :key=&quot;g&quot;&gt;&#123;&#123;g&#125;&#125;&lt;/h4&gt;
            &lt;/template&gt;
        &lt;/Category&gt;
子组件中：
&lt;template&gt;
  &lt;div&gt;
    &lt;slot :games=&quot;games&quot;&gt;&lt;/slot&gt;
  &lt;/div&gt;
&lt;/template&gt;

&lt;script&gt;
export default &#123;
  name: &quot;Category&quot;,
  props: [&quot;title&quot;],
  //数据在子组件自身
  data() &#123;
    return &#123;
      games: [&quot;红色警戒&quot;, &quot;穿越火线&quot;, &quot;劲舞团&quot;, &quot;超级玛丽&quot;],
    &#125;;
  &#125;,
&#125;;
&lt;/script&gt;
</code></pre>
<h3 id="代码-1"><a href="#代码-1" class="headerlink" title="代码:"></a>代码:</h3><h4 id="默认插槽"><a href="#默认插槽" class="headerlink" title="默认插槽"></a>默认插槽</h4><p>Category.vue</p>
<pre><code class="vue">&lt;template&gt;
   
  &lt;div class=&quot;category&quot;&gt;
       
    &lt;h3&gt;&#123;&#123; title &#125;&#125;分类&lt;/h3&gt;
       
    &lt;!-- 定义一个插槽(挖个坑, 等着组件的使用者进行填充) --&gt;
        &lt;slot&gt;我是一个默认值, 当使用者没有传递具体结构时, 我会出现&lt;/slot&gt;  
  &lt;/div&gt;
&lt;/template&gt;

&lt;script&gt;
export default &#123;
  name: &quot;Category&quot;,
  props: [&quot;title&quot;],
&#125;;
&lt;/script&gt;

&lt;style scoped&gt;
.category &#123;
  background-color: skyblue;
  width: 200px;
  height: 300px;
&#125;
h3 &#123;
  text-align: center;
  background-color: orange;
&#125;
&lt;/style&gt;
</code></pre>
<p>App.vue</p>
<pre><code class="vue">&lt;template&gt;
   
  &lt;div class=&quot;container&quot;&gt;
       
    &lt;Category title=&quot;美食&quot;&gt;
            &lt;img src=&quot;./美食.jpg&quot; alt=&quot;&quot; /&gt;    
    &lt;/Category&gt;
       
    &lt;Category title=&quot;游戏&quot;&gt;
           
      &lt;ul&gt;
               
        &lt;li v-for=&quot;(g, index) in games&quot; :key=&quot;index&quot;&gt;&#123;&#123; g &#125;&#125;&lt;/li&gt;
             
      &lt;/ul&gt;
         
    &lt;/Category&gt;
       
    &lt;Category title=&quot;电影&quot;&gt;
           
      &lt;video
        controls
        src=&quot;http://clips.vorwaerts-gmbh.de/big_buck_bunny.mp4&quot;
      &gt;&lt;/video&gt;
         
    &lt;/Category&gt;
     
  &lt;/div&gt;
&lt;/template&gt;

&lt;script&gt;
import Category from &quot;./components/Category&quot;;
export default &#123;
  name: &quot;App&quot;,
  components: &#123;
    Category,
  &#125;,
  data() &#123;
    return &#123;
      foods: [&quot;火锅&quot;, &quot;烧烤&quot;, &quot;小龙虾&quot;, &quot;牛排&quot;],
      games: [&quot;红色警戒&quot;, &quot;穿越火线&quot;, &quot;劲舞团&quot;, &quot;超级玛丽&quot;],
      films: [&quot;《教父》&quot;, &quot;《拆弹专家》&quot;, &quot;《你好，李焕英》&quot;, &quot;《尚硅谷》&quot;],
    &#125;;
  &#125;,
&#125;;
&lt;/script&gt;

&lt;style scoped&gt;
.container &#123;
  display: flex;
  justify-content: space-around;
&#125;


img &#123;
  width: 100%;
&#125;
video &#123;
  width: 100%;
&#125;
&lt;/style&gt;
</code></pre>
<p>main.js</p>
<pre><code class="javascript">import Vue from &quot;vue&quot;;
import App from &quot;./App.vue&quot;;
// 引入插件
import vueResource from &quot;vue-resource&quot;;

Vue.config.productionTip = false;
// 使用插件
Vue.use(vueResource);

new Vue(&#123;
  el: &quot;#app&quot;,
  render: (h) =&gt; h(App),
  beforeCreate() &#123;
    Vue.prototype.$bus = this;
  &#125;,
&#125;);
</code></pre>
<h4 id="具名插槽"><a href="#具名插槽" class="headerlink" title="具名插槽"></a>具名插槽</h4><p>Category.vue</p>
<pre><code class="vue">&lt;template&gt;
   
  &lt;div class=&quot;category&quot;&gt;
       
    &lt;h3&gt;&#123;&#123; title &#125;&#125;分类&lt;/h3&gt;
       
    &lt;!-- 定义一个插槽(挖个坑, 等着组件的使用者进行填充) --&gt;
       
    &lt;slot name=&quot;center&quot;
      &gt;我是一个默认值, 当使用者没有传递具体结构时, 我会出现1&lt;/slot
    &gt;
       
    &lt;slot name=&quot;footer&quot;
      &gt;我是一个默认值, 当使用者没有传递具体结构时, 我会出现2&lt;/slot
    &gt;
     
  &lt;/div&gt;
&lt;/template&gt;

&lt;script&gt;
export default &#123;
  name: &quot;Category&quot;,
  props: [&quot;title&quot;],
&#125;;
&lt;/script&gt;

&lt;style scoped&gt;
.category &#123;
  background-color: skyblue;
  width: 200px;
  height: 300px;
&#125;
h3 &#123;
  text-align: center;
  background-color: orange;
&#125;
&lt;/style&gt;
</code></pre>
<p>App.vue</p>
<pre><code class="vue">&lt;template&gt;
   
  &lt;div class=&quot;container&quot;&gt;
       
    &lt;Category title=&quot;美食&quot;&gt;
            &lt;img slot=&quot;center&quot; src=&quot;./美食.jpg&quot; alt=&quot;&quot; /&gt;      
      &lt;a slot=&quot;footer&quot; href=&quot;http://www.baidu.com&quot; target=&quot;_blank&quot;&gt;更多美食&lt;/a&gt;
         
    &lt;/Category&gt;
       
    &lt;Category title=&quot;游戏&quot;&gt;
           
      &lt;ul slot=&quot;center&quot;&gt;
               
        &lt;li v-for=&quot;(g, index) in games&quot; :key=&quot;index&quot;&gt;&#123;&#123; g &#125;&#125;&lt;/li&gt;
             
      &lt;/ul&gt;
           
      &lt;div slot=&quot;footer&quot; class=&quot;foot&quot;&gt;
                &lt;a href=&quot;http://www.baidu.com&quot; target=&quot;_blank&quot;&gt;单机游戏&lt;/a&gt;    
            &lt;a href=&quot;http://www.baidu.com&quot; target=&quot;_blank&quot;&gt;网络游戏&lt;/a&gt;      
      &lt;/div&gt;
         
    &lt;/Category&gt;
       
    &lt;Category title=&quot;电影&quot;&gt;
           
      &lt;video
        slot=&quot;center&quot;
        controls
        src=&quot;http://clips.vorwaerts-gmbh.de/big_buck_bunny.mp4&quot;
      &gt;&lt;/video&gt;
           
      &lt;!-- &lt;template slot=&quot;footer&quot;&gt; --&gt;
           
      &lt;!-- 注意v-slot:footer只能放在template上 --&gt;
           
      &lt;template v-slot:footer&gt;
               
        &lt;div class=&quot;foot&quot;&gt;
                    &lt;a href=&quot;http://www.baidu.com&quot; target=&quot;_blank&quot;&gt;经典&lt;/a&gt;    
                &lt;a href=&quot;http://www.baidu.com&quot; target=&quot;_blank&quot;&gt;热门&lt;/a&gt;        
            &lt;a href=&quot;http://www.baidu.com&quot; target=&quot;_blank&quot;&gt;推荐&lt;/a&gt;        
        &lt;/div&gt;
               
        &lt;h4&gt;欢迎前来观影&lt;/h4&gt;
             
      &lt;/template&gt;
         
    &lt;/Category&gt;
     
  &lt;/div&gt;
&lt;/template&gt;

&lt;script&gt;
import Category from &quot;./components/Category&quot;;
export default &#123;
  name: &quot;App&quot;,
  components: &#123;
    Category,
  &#125;,
  data() &#123;
    return &#123;
      foods: [&quot;火锅&quot;, &quot;烧烤&quot;, &quot;小龙虾&quot;, &quot;牛排&quot;],
      games: [&quot;红色警戒&quot;, &quot;穿越火线&quot;, &quot;劲舞团&quot;, &quot;超级玛丽&quot;],
      films: [&quot;《教父》&quot;, &quot;《拆弹专家》&quot;, &quot;《你好，李焕英》&quot;, &quot;《尚硅谷》&quot;],
    &#125;;
  &#125;,
&#125;;
&lt;/script&gt;

&lt;style scoped&gt;
.container,
.foot &#123;
  display: flex;
  justify-content: space-around;
&#125;


img &#123;
  width: 100%;
&#125;
video &#123;
  width: 100%;
&#125;
h4 &#123;
  text-align: center;
&#125;
&lt;/style&gt;
</code></pre>
<p>main.js</p>
<pre><code class="javascript">import Vue from &quot;vue&quot;;
import App from &quot;./App.vue&quot;;
// 引入插件
import vueResource from &quot;vue-resource&quot;;

Vue.config.productionTip = false;
// 使用插件
Vue.use(vueResource);

new Vue(&#123;
  el: &quot;#app&quot;,
  render: (h) =&gt; h(App),
  beforeCreate() &#123;
    Vue.prototype.$bus = this;
  &#125;,
&#125;);
</code></pre>
<h4 id="作用域插槽"><a href="#作用域插槽" class="headerlink" title="作用域插槽"></a>作用域插槽</h4><p>Category.vue</p>
<pre><code class="vue">&lt;template&gt;
   
  &lt;div class=&quot;category&quot;&gt;
       
    &lt;h3&gt;&#123;&#123; title &#125;&#125;分类&lt;/h3&gt;
       
    &lt;!-- 定义一个插槽(挖个坑, 等着组件的使用者进行填充) --&gt;
       
    &lt;slot :games=&quot;games&quot;
      &gt;我是一个默认值, 当使用者没有传递具体结构时, 我会出现1&lt;/slot
    &gt;
     
  &lt;/div&gt;
&lt;/template&gt;

&lt;script&gt;
export default &#123;
  name: &quot;Category&quot;,
  props: [&quot;title&quot;],
  data() &#123;
    return &#123;
      games: [&quot;红色警戒&quot;, &quot;穿越火线&quot;, &quot;劲舞团&quot;, &quot;超级玛丽&quot;],
    &#125;;
  &#125;,
&#125;;
&lt;/script&gt;

&lt;style scoped&gt;
.category &#123;
  background-color: skyblue;
  width: 200px;
  height: 300px;
&#125;
h3 &#123;
  text-align: center;
  background-color: orange;
&#125;
&lt;/style&gt;
</code></pre>
<p>App.vue</p>
<pre><code class="vue">&lt;template&gt;
   
  &lt;div class=&quot;container&quot;&gt;
       
    &lt;!-- 数据不在这个当前vue文件中, 而在别的组件中, 但是想要决定组件中的结构, 就要使用作用域插槽 --&gt;
       
    &lt;Category title=&quot;游戏&quot;&gt;
           
      &lt;template scope=&quot;atguigu&quot;&gt;
               
        &lt;ul&gt;
                   
          &lt;li v-for=&quot;(g, index) in atguigu.games&quot; :key=&quot;index&quot;&gt;&#123;&#123; g &#125;&#125;&lt;/li&gt;
                 
        &lt;/ul&gt;
             
      &lt;/template&gt;
         
    &lt;/Category&gt;

       
    &lt;Category title=&quot;游戏&quot;&gt;
           
      &lt;template scope=&quot;&#123;games&#125;&quot;&gt;
               
        &lt;ol&gt;
                   
          &lt;li style=&quot;color:red&quot; v-for=&quot;(g, index) in games&quot; :key=&quot;index&quot;&gt;
            &#123;&#123; g &#125;&#125;
          &lt;/li&gt;
                 
        &lt;/ol&gt;
             
      &lt;/template&gt;
         
    &lt;/Category&gt;

       
    &lt;Category title=&quot;游戏&quot;&gt;
           
      &lt;template slot-scope=&quot;&#123; games &#125;&quot;&gt;
               
        &lt;h4 v-for=&quot;(g, index) in games&quot; :key=&quot;index&quot;&gt;&#123;&#123; g &#125;&#125;&lt;/h4&gt;
             
      &lt;/template&gt;
         
    &lt;/Category&gt;
     
  &lt;/div&gt;
&lt;/template&gt;

&lt;script&gt;
import Category from &quot;./components/Category&quot;;
export default &#123;
  name: &quot;App&quot;,
  components: &#123;
    Category,
  &#125;,
&#125;;
&lt;/script&gt;

&lt;style scoped&gt;
.container,
.foot &#123;
  display: flex;
  justify-content: space-around;
&#125;


img &#123;
  width: 100%;
&#125;
video &#123;
  width: 100%;
&#125;
h4 &#123;
  text-align: center;
&#125;
&lt;/style&gt;
</code></pre>
<p>main.js</p>
<pre><code class="javascript">import Vue from &quot;vue&quot;;
import App from &quot;./App.vue&quot;;
// 引入插件
import vueResource from &quot;vue-resource&quot;;

Vue.config.productionTip = false;
// 使用插件
Vue.use(vueResource);

new Vue(&#123;
  el: &quot;#app&quot;,
  render: (h) =&gt; h(App),
  beforeCreate() &#123;
    Vue.prototype.$bus = this;
  &#125;,
&#125;);
</code></pre>
<h2 id="Vuex"><a href="#Vuex" class="headerlink" title="Vuex"></a>Vuex</h2><p>多组件共享数据–全局事件总线实现<br><img src="https://cdn.jsdelivr.net/gh/roudoukou/roudoukou.github.io/blog-img/FuMy4PDGENZU1TiC98Pdisx31xaq.png"><br>多组件共享数据–vuex 实现<br><img src="https://cdn.jsdelivr.net/gh/roudoukou/roudoukou.github.io/blog-img/FhetOor1f-3xp5dvNrzcRnlKttJq.png"></p>
<p>安装 vuex<br>PS E:\Code\Vue\vue_test&gt; npm i vuex@3<br><strong>注意 vue2 中, 要用 vuex 的 3 版本</strong><br><strong>vue3 中, 要用 vuex 的 4 版本</strong></p>
<h3 id="1-概念"><a href="#1-概念" class="headerlink" title="1.概念"></a>1.概念</h3><pre><code>    在Vue中实现集中式状态（数据）管理的一个Vue插件，对vue应用中多个组件的共享状态进行集中式的管理（读/写），也是一种组件间通信的方式，且适用于任意组件间通信。
</code></pre>
<h3 id="2-何时使用？"><a href="#2-何时使用？" class="headerlink" title="2.何时使用？"></a>2.何时使用？</h3><pre><code>    多个组件需要共享数据时
</code></pre>
<h3 id="3-搭建-vuex-环境"><a href="#3-搭建-vuex-环境" class="headerlink" title="3.搭建 vuex 环境"></a>3.搭建 vuex 环境</h3><ol>
<li>创建文件：<code>src/store/index.js</code></li>
</ol>
<pre><code class="javascript">//引入Vue核心库
import Vue from &quot;vue&quot;;
//引入Vuex
import Vuex from &quot;vuex&quot;;
//应用Vuex插件
Vue.use(Vuex);

//准备actions对象——响应组件中用户的动作
const actions = &#123;&#125;;
//准备mutations对象——修改state中的数据
const mutations = &#123;&#125;;
//准备state对象——保存具体的数据
const state = &#123;&#125;;

//创建并暴露store
export default new Vuex.Store(&#123;
  actions,
  mutations,
  state,
&#125;);
</code></pre>
<ol start="2">
<li>在<code>main.js</code>中创建 vm 时传入<code>store</code>配置项</li>
</ol>
<pre><code class="javascript">......
//引入store
import store from &#39;./store&#39;
......

//创建vm
new Vue(&#123;
    el:&#39;#app&#39;,
    render: h =&gt; h(App),
    store
&#125;)
</code></pre>
<h3 id="4-基本使用"><a href="#4-基本使用" class="headerlink" title="4.基本使用"></a>4.基本使用</h3><ol>
<li>初始化数据、配置<code>actions</code>、配置<code>mutations</code>，操作文件<code>store.js</code></li>
</ol>
<pre><code class="javascript">//引入Vue核心库
import Vue from &quot;vue&quot;;
//引入Vuex
import Vuex from &quot;vuex&quot;;
//引用Vuex
Vue.use(Vuex);

const actions = &#123;
  //响应组件中加的动作
  jia(context, value) &#123;
    // console.log(&#39;actions中的jia被调用了&#39;,miniStore,value)
    context.commit(&quot;JIA&quot;, value);
  &#125;,
&#125;;

const mutations = &#123;
  //执行加
  JIA(state, value) &#123;
    // console.log(&#39;mutations中的JIA被调用了&#39;,state,value)
    state.sum += value;
  &#125;,
&#125;;

//初始化数据
const state = &#123;
  sum: 0,
&#125;;

//创建并暴露store
export default new Vuex.Store(&#123;
  actions,
  mutations,
  state,
&#125;);
</code></pre>
<ol start="2">
<li>组件中读取 vuex 中的数据：<code>$store.state.sum</code></li>
<li>组件中修改 vuex 中的数据：<code>$store.dispatch(&#39;action中的方法名&#39;,数据)</code> 或 <code>$store.commit(&#39;mutations中的方法名&#39;,数据)</code><blockquote>
<p>备注：若没有网络请求或其他业务逻辑，组件中也可以越过 actions，即不写<code>dispatch</code>，直接编写<code>commit</code></p>
</blockquote>
</li>
</ol>
<h3 id="5-getters-的使用"><a href="#5-getters-的使用" class="headerlink" title="5.getters 的使用"></a>5.getters 的使用</h3><ol>
<li>概念：当 state 中的数据需要经过加工后再使用时，可以使用 getters 加工。</li>
<li>在<code>store.js</code>中追加<code>getters</code>配置</li>
</ol>
<pre><code class="javascript">......

const getters = &#123;
    bigSum(state)&#123;
        return state.sum * 10
    &#125;
&#125;

//创建并暴露store
export default new Vuex.Store(&#123;
    ......
    getters
&#125;)
</code></pre>
<ol start="3">
<li>组件中读取数据：<code>$store.getters.bigSum</code></li>
</ol>
<h3 id="6-四个-map-方法的使用"><a href="#6-四个-map-方法的使用" class="headerlink" title="6.四个 map 方法的使用"></a>6.四个 map 方法的使用</h3><ol>
<li><strong>mapState 方法：</strong>用于帮助我们映射<code>state</code>中的数据为计算属性</li>
</ol>
<pre><code class="javascript">computed: &#123;
    //借助mapState生成计算属性：sum、school、subject（对象写法）
     ...mapState(&#123;sum:&#39;sum&#39;,school:&#39;school&#39;,subject:&#39;subject&#39;&#125;),

    //借助mapState生成计算属性：sum、school、subject（数组写法）
    ...mapState([&#39;sum&#39;,&#39;school&#39;,&#39;subject&#39;]),
&#125;,
</code></pre>
<ol start="2">
<li><strong>mapGetters 方法：</strong>用于帮助我们映射<code>getters</code>中的数据为计算属性</li>
</ol>
<pre><code class="javascript">computed: &#123;
    //借助mapGetters生成计算属性：bigSum（对象写法）
    ...mapGetters(&#123;bigSum:&#39;bigSum&#39;&#125;),

    //借助mapGetters生成计算属性：bigSum（数组写法）
    ...mapGetters([&#39;bigSum&#39;])
&#125;,
</code></pre>
<ol start="3">
<li><strong>mapActions 方法：</strong>用于帮助我们生成与<code>actions</code>对话的方法，即：包含<code>$store.dispatch(xxx)</code>的函数</li>
</ol>
<pre><code class="javascript">methods:&#123;
    //靠mapActions生成：incrementOdd、incrementWait（对象形式）
    ...mapActions(&#123;incrementOdd:&#39;jiaOdd&#39;,incrementWait:&#39;jiaWait&#39;&#125;)

    //靠mapActions生成：incrementOdd、incrementWait（数组形式）
    ...mapActions([&#39;jiaOdd&#39;,&#39;jiaWait&#39;])
&#125;
</code></pre>
<ol start="4">
<li><strong>mapMutations 方法：</strong>用于帮助我们生成与<code>mutations</code>对话的方法，即：包含<code>$store.commit(xxx)</code>的函数</li>
</ol>
<pre><code class="javascript">methods:&#123;
    //靠mapActions生成：increment、decrement（对象形式）
    ...mapMutations(&#123;increment:&#39;JIA&#39;,decrement:&#39;JIAN&#39;&#125;),

    //靠mapMutations生成：JIA、JIAN（对象形式）
    ...mapMutations([&#39;JIA&#39;,&#39;JIAN&#39;]),
&#125;
</code></pre>
<blockquote>
<p>备注：mapActions 与 mapMutations 使用时，若需要传递参数需要：在模板中绑定事件时传递好参数，否则参数是事件对象。</p>
</blockquote>
<h3 id="7-模块化-命名空间"><a href="#7-模块化-命名空间" class="headerlink" title="7.模块化+命名空间"></a>7.模块化+命名空间</h3><ol>
<li>目的：让代码更好维护，让多种数据分类更加明确。</li>
<li>修改<code>store.js</code></li>
</ol>
<pre><code class="javascript">const countAbout = &#123;
  namespaced:true,//开启命名空间
  state:&#123;x:1&#125;,
  mutations: &#123; ... &#125;,
  actions: &#123; ... &#125;,
  getters: &#123;
    bigSum(state)&#123;
       return state.sum * 10
    &#125;
  &#125;
&#125;

const personAbout = &#123;
  namespaced:true,//开启命名空间
  state:&#123; ... &#125;,
  mutations: &#123; ... &#125;,
  actions: &#123; ... &#125;
&#125;

const store = new Vuex.Store(&#123;
  modules: &#123;
    countAbout,
    personAbout
  &#125;
&#125;)
</code></pre>
<ol start="3">
<li>开启命名空间后，组件中读取 state 数据：</li>
</ol>
<pre><code class="javascript">//方式一：自己直接读取
this.$store.state.personAbout.list
//方式二：借助mapState读取：
...mapState(&#39;countAbout&#39;,[&#39;sum&#39;,&#39;school&#39;,&#39;subject&#39;]),
</code></pre>
<ol start="4">
<li>开启命名空间后，组件中读取 getters 数据：</li>
</ol>
<pre><code class="javascript">//方式一：自己直接读取
this.$store.getters[&#39;personAbout/firstPersonName&#39;]
//方式二：借助mapGetters读取：
...mapGetters(&#39;countAbout&#39;,[&#39;bigSum&#39;])
</code></pre>
<ol start="5">
<li>开启命名空间后，组件中调用 dispatch</li>
</ol>
<pre><code class="javascript">//方式一：自己直接dispatch
this.$store.dispatch(&#39;personAbout/addPersonWang&#39;,person)
//方式二：借助mapActions：
...mapActions(&#39;countAbout&#39;,&#123;incrementOdd:&#39;jiaOdd&#39;,incrementWait:&#39;jiaWait&#39;&#125;)
</code></pre>
<ol start="6">
<li>开启命名空间后，组件中调用 commit</li>
</ol>
<pre><code class="javascript">//方式一：自己直接commit
this.$store.commit(&#39;personAbout/ADD_PERSON&#39;,person)
//方式二：借助mapMutations：
...mapMutations(&#39;countAbout&#39;,&#123;increment:&#39;JIA&#39;,decrement:&#39;JIAN&#39;&#125;),
</code></pre>
<h3 id="求和案例-纯-vue-版"><a href="#求和案例-纯-vue-版" class="headerlink" title="求和案例_纯 vue 版"></a>求和案例_纯 vue 版</h3><p>main.js</p>
<pre><code class="javascript">import Vue from &quot;vue&quot;;
import App from &quot;./App.vue&quot;;
// 引入插件
import vueResource from &quot;vue-resource&quot;;

Vue.config.productionTip = false;
// 使用插件
Vue.use(vueResource);

new Vue(&#123;
  el: &quot;#app&quot;,
  render: (h) =&gt; h(App),
  beforeCreate() &#123;
    Vue.prototype.$bus = this;
  &#125;,
&#125;);
</code></pre>
<p>App.vue</p>
<pre><code class="vue">&lt;template&gt;
   
  &lt;div class=&quot;container&quot;&gt;    &lt;Count /&gt;  &lt;/div&gt;
&lt;/template&gt;

&lt;script&gt;
import Count from &quot;./components/Count&quot;;
export default &#123;
  name: &quot;App&quot;,
  components: &#123;
    Count,
  &#125;,
&#125;;
&lt;/script&gt;
</code></pre>
<p>Count.vue</p>
<pre><code class="vue">&lt;template&gt;
   
  &lt;div class=&quot;category&quot;&gt;
       
    &lt;h2&gt;当前求和为:&#123;&#123; sum &#125;&#125;&lt;/h2&gt;
       
    &lt;select v-model.number=&quot;n&quot;&gt;
           
      &lt;option value=&quot;1&quot;&gt;1&lt;/option&gt;
           
      &lt;option value=&quot;2&quot;&gt;2&lt;/option&gt;
           
      &lt;option value=&quot;3&quot;&gt;3&lt;/option&gt;
         
    &lt;/select&gt;
        &lt;button @click=&quot;increament&quot;&gt;+&lt;/button&gt;    
    &lt;button @click=&quot;decreament&quot;&gt;-&lt;/button&gt;    
    &lt;button @click=&quot;increamentOdd&quot;&gt;当前求和为奇数再加&lt;/button&gt;    
    &lt;button @click=&quot;increamentWait&quot;&gt;等一等再加&lt;/button&gt;  
  &lt;/div&gt;
&lt;/template&gt;

&lt;script&gt;
export default &#123;
  name: &quot;Count&quot;,
  data() &#123;
    return &#123;
      n: 1,
      sum: 0,
    &#125;;
  &#125;,
  methods: &#123;
    increament() &#123;
      this.sum = this.sum + this.n;
    &#125;,
    decreament() &#123;
      this.sum = this.sum - this.n;
    &#125;,
    increamentOdd() &#123;
      if (this.sum % 2) &#123;
        this.sum = this.sum + this.n;
      &#125;
    &#125;,
    increamentWait() &#123;
      setTimeout(() =&gt; &#123;
        this.sum = this.sum + this.n;
      &#125;, 500);
    &#125;,
  &#125;,
&#125;;
&lt;/script&gt;

&lt;style scoped&gt;
button &#123;
  margin-left: 5px;
&#125;
&lt;/style&gt;
</code></pre>
<h3 id="求和案例-vuex-版"><a href="#求和案例-vuex-版" class="headerlink" title="求和案例_vuex 版"></a>求和案例_vuex 版</h3><p>main.js</p>
<pre><code class="javascript">// 引入Vue
import Vue from &quot;vue&quot;;
// 引入App
import App from &quot;./App.vue&quot;;
// 引入插件
import vueResource from &quot;vue-resource&quot;;

import store from &quot;./store&quot;;

Vue.config.productionTip = false;
// 使用插件
Vue.use(vueResource);

new Vue(&#123;
  el: &quot;#app&quot;,
  render: (h) =&gt; h(App),
  store: store,
  beforeCreate() &#123;
    Vue.prototype.$bus = this;
  &#125;,
&#125;);
</code></pre>
<p>App.vue</p>
<pre><code class="vue">&lt;template&gt;
   
  &lt;div class=&quot;container&quot;&gt;    &lt;Count /&gt;  &lt;/div&gt;
&lt;/template&gt;

&lt;script&gt;
import Count from &quot;./components/Count&quot;;
export default &#123;
  name: &quot;App&quot;,
  components: &#123;
    Count,
  &#125;,
  mounted() &#123;
    console.log(&quot;App&quot;, this);
  &#125;,
&#125;;
&lt;/script&gt;
</code></pre>
<p>store&#x2F;index.js</p>
<pre><code class="javascript">// 该文件用于创建Vuex中最为核心的store

import Vue from &quot;vue&quot;;
import Vuex from &quot;vuex&quot;;

Vue.use(Vuex);

// 准备actions--用于响应组件中的动作
const actions = &#123;
  // jia:function(context, value) &#123;
  //     console.log(&quot;actions中的jia被调用了&quot;, context, value);
  //     context.commit(&quot;JIA&quot;, value)
  // &#125;,
  // jian:function(context, value) &#123;
  //     console.log(&quot;actions中的jian被调用了&quot;, context, value);
  //     context.commit(&quot;JIAN&quot;, value)
  // &#125;,
  jiaOdd: function (context, value) &#123;
    console.log(&quot;actions中的jiaOdd被调用了&quot;, context, value);
    if (context.state.sum % 2) &#123;
      context.commit(&quot;JIA&quot;, value);
    &#125;
  &#125;,
  jiaWait: function (context, value) &#123;
    console.log(&quot;actions中的jiaWait被调用了&quot;, context, value);
    setTimeout(() =&gt; &#123;
      context.commit(&quot;JIA&quot;, value);
    &#125;, 500);
  &#125;,
&#125;;

// 准备actmutations--用于操作数据
const mutations = &#123;
  JIA: function (state, value) &#123;
    console.log(&quot;mutations中的JIA被调用了&quot;, state, value);
    state.sum = state.sum + value;
  &#125;,
  JIAN: function (state, value) &#123;
    console.log(&quot;mutations中的JIAN被调用了&quot;, state, value);
    state.sum = state.sum - value;
  &#125;,
&#125;;

// 准备state--用于存储数据
const state = &#123;
  sum: 0, // 当前的和
&#125;;

export default new Vuex.Store(&#123;
  actions,
  mutations,
  state,
&#125;);
</code></pre>
<p>components&#x2F;Count.js</p>
<pre><code class="javascript">// 该文件用于创建Vuex中最为核心的store

import Vue from &quot;vue&quot;;
import Vuex from &quot;vuex&quot;;

Vue.use(Vuex);

// 准备actions--用于响应组件中的动作
const actions = &#123;
  // jia:function(context, value) &#123;
  //     console.log(&quot;actions中的jia被调用了&quot;, context, value);
  //     context.commit(&quot;JIA&quot;, value)
  // &#125;,
  // jian:function(context, value) &#123;
  //     console.log(&quot;actions中的jian被调用了&quot;, context, value);
  //     context.commit(&quot;JIAN&quot;, value)
  // &#125;,
  jiaOdd: function (context, value) &#123;
    console.log(&quot;actions中的jiaOdd被调用了&quot;, context, value);
    if (context.state.sum % 2) &#123;
      context.commit(&quot;JIA&quot;, value);
    &#125;
  &#125;,
  jiaWait: function (context, value) &#123;
    console.log(&quot;actions中的jiaWait被调用了&quot;, context, value);
    setTimeout(() =&gt; &#123;
      context.commit(&quot;JIA&quot;, value);
    &#125;, 500);
  &#125;,
&#125;;

// 准备actmutations--用于操作数据
const mutations = &#123;
  JIA: function (state, value) &#123;
    console.log(&quot;mutations中的JIA被调用了&quot;, state, value);
    state.sum = state.sum + value;
  &#125;,
  JIAN: function (state, value) &#123;
    console.log(&quot;mutations中的JIAN被调用了&quot;, state, value);
    state.sum = state.sum - value;
  &#125;,
&#125;;

// 准备state--用于存储数据
const state = &#123;
  sum: 0, // 当前的和
&#125;;

export default new Vuex.Store(&#123;
  actions,
  mutations,
  state,
&#125;);
</code></pre>
<h3 id="求和案例-getters"><a href="#求和案例-getters" class="headerlink" title="求和案例_getters"></a>求和案例_getters</h3><p>main.js</p>
<pre><code class="javascript">// 引入Vue
import Vue from &quot;vue&quot;;
// 引入App
import App from &quot;./App.vue&quot;;
// 引入插件
import vueResource from &quot;vue-resource&quot;;

import store from &quot;./store&quot;;

Vue.config.productionTip = false;
// 使用插件
Vue.use(vueResource);

new Vue(&#123;
  el: &quot;#app&quot;,
  render: (h) =&gt; h(App),
  store: store,
  beforeCreate() &#123;
    Vue.prototype.$bus = this;
  &#125;,
&#125;);
</code></pre>
<p>App.vue</p>
<pre><code class="vue">&lt;template&gt;
   
  &lt;div class=&quot;container&quot;&gt;    &lt;Count /&gt;  &lt;/div&gt;
&lt;/template&gt;

&lt;script&gt;
import Count from &quot;./components/Count&quot;;
export default &#123;
  name: &quot;App&quot;,
  components: &#123;
    Count,
  &#125;,
  mounted() &#123;
    console.log(&quot;App&quot;, this);
  &#125;,
&#125;;
&lt;/script&gt;
</code></pre>
<p>store&#x2F;index.js</p>
<pre><code class="javascript">// 该文件用于创建Vuex中最为核心的store

import Vue from &quot;vue&quot;;
import Vuex from &quot;vuex&quot;;

Vue.use(Vuex);

// 准备actions--用于响应组件中的动作
const actions = &#123;
  // jia:function(context, value) &#123;
  //     console.log(&quot;actions中的jia被调用了&quot;, context, value);
  //     context.commit(&quot;JIA&quot;, value)
  // &#125;,
  // jian:function(context, value) &#123;
  //     console.log(&quot;actions中的jian被调用了&quot;, context, value);
  //     context.commit(&quot;JIAN&quot;, value)
  // &#125;,
  jiaOdd: function (context, value) &#123;
    console.log(&quot;actions中的jiaOdd被调用了&quot;, context, value);
    if (context.state.sum % 2) &#123;
      context.commit(&quot;JIA&quot;, value);
    &#125;
  &#125;,
  jiaWait: function (context, value) &#123;
    console.log(&quot;actions中的jiaWait被调用了&quot;, context, value);
    setTimeout(() =&gt; &#123;
      context.commit(&quot;JIA&quot;, value);
    &#125;, 500);
  &#125;,
&#125;;

// 准备actmutations--用于操作数据
const mutations = &#123;
  JIA: function (state, value) &#123;
    console.log(&quot;mutations中的JIA被调用了&quot;, state, value);
    state.sum = state.sum + value;
  &#125;,
  JIAN: function (state, value) &#123;
    console.log(&quot;mutations中的JIAN被调用了&quot;, state, value);
    state.sum = state.sum - value;
  &#125;,
&#125;;

// 准备state--用于存储数据
const state = &#123;
  sum: 0, // 当前的和
&#125;;

// 准备getters--用于将state中的数据进行加工
const getters = &#123;
  bigSum(state) &#123;
    return state.sum * 10;
  &#125;,
&#125;;

export default new Vuex.Store(&#123;
  actions,
  mutations,
  state,
  getters,
&#125;);
</code></pre>
<p>components&#x2F;Count.js</p>
<pre><code class="vue">&lt;template&gt;
   
  &lt;div class=&quot;category&quot;&gt;
       
    &lt;h2&gt;当前求和为:&#123;&#123; $store.state.sum &#125;&#125;&lt;/h2&gt;
       
    &lt;h2&gt;当前求和的10倍为:&#123;&#123; $store.getters.bigSum &#125;&#125;&lt;/h2&gt;
       
    &lt;select v-model.number=&quot;n&quot;&gt;
           
      &lt;option value=&quot;1&quot;&gt;1&lt;/option&gt;
           
      &lt;option value=&quot;2&quot;&gt;2&lt;/option&gt;
           
      &lt;option value=&quot;3&quot;&gt;3&lt;/option&gt;
         
    &lt;/select&gt;
        &lt;button @click=&quot;increament&quot;&gt;+&lt;/button&gt;    
    &lt;button @click=&quot;decreament&quot;&gt;-&lt;/button&gt;    
    &lt;button @click=&quot;increamentOdd&quot;&gt;当前求和为奇数再加&lt;/button&gt;    
    &lt;button @click=&quot;increamentWait&quot;&gt;等一等再加&lt;/button&gt;  
  &lt;/div&gt;
&lt;/template&gt;

&lt;script&gt;
export default &#123;
  name: &quot;Count&quot;,
  data() &#123;
    return &#123;
      n: 1,
    &#125;;
  &#125;,
  methods: &#123;
    increament() &#123;
      this.$store.commit(&quot;JIA&quot;, this.n);
    &#125;,
    decreament() &#123;
      this.$store.commit(&quot;JIAN&quot;, this.n);
    &#125;,
    increamentOdd() &#123;
      this.$store.dispatch(&quot;jiaOdd&quot;, this.n);
    &#125;,
    increamentWait() &#123;
      this.$store.dispatch(&quot;jiaWait&quot;, this.n);
    &#125;,
  &#125;,
  mounted() &#123;
    console.log(&quot;Count&quot;, this);
  &#125;,
&#125;;
&lt;/script&gt;

&lt;style scoped&gt;
button &#123;
  margin-left: 5px;
&#125;
&lt;/style&gt;
</code></pre>
<h3 id="求和案例-mapState-与-mapGetters"><a href="#求和案例-mapState-与-mapGetters" class="headerlink" title="求和案例_mapState 与 mapGetters"></a>求和案例_mapState 与 mapGetters</h3><p>main.js</p>
<pre><code class="javascript">// 引入Vue
import Vue from &quot;vue&quot;;
// 引入App
import App from &quot;./App.vue&quot;;
// 引入插件
import vueResource from &quot;vue-resource&quot;;

import store from &quot;./store&quot;;

Vue.config.productionTip = false;
// 使用插件
Vue.use(vueResource);

new Vue(&#123;
  el: &quot;#app&quot;,
  render: (h) =&gt; h(App),
  store: store,
  beforeCreate() &#123;
    Vue.prototype.$bus = this;
  &#125;,
&#125;);
</code></pre>
<p>App.vue</p>
<pre><code class="vue">&lt;template&gt;
   
  &lt;div class=&quot;container&quot;&gt;    &lt;Count /&gt;  &lt;/div&gt;
&lt;/template&gt;

&lt;script&gt;
import Count from &quot;./components/Count&quot;;
export default &#123;
  name: &quot;App&quot;,
  components: &#123;
    Count,
  &#125;,
  mounted() &#123;
    // console.log(&#39;App&#39;, this)
  &#125;,
&#125;;
&lt;/script&gt;
</code></pre>
<p>store&#x2F;index.js</p>
<pre><code class="javascript">// 该文件用于创建Vuex中最为核心的store

import Vue from &quot;vue&quot;;
import Vuex from &quot;vuex&quot;;

Vue.use(Vuex);

// 准备actions--用于响应组件中的动作
const actions = &#123;
  // jia:function(context, value) &#123;
  //     console.log(&quot;actions中的jia被调用了&quot;, context, value);
  //     context.commit(&quot;JIA&quot;, value)
  // &#125;,
  // jian:function(context, value) &#123;
  //     console.log(&quot;actions中的jian被调用了&quot;, context, value);
  //     context.commit(&quot;JIAN&quot;, value)
  // &#125;,
  jiaOdd: function (context, value) &#123;
    console.log(&quot;actions中的jiaOdd被调用了&quot;, context, value);
    if (context.state.sum % 2) &#123;
      context.commit(&quot;JIA&quot;, value);
    &#125;
  &#125;,
  jiaWait: function (context, value) &#123;
    console.log(&quot;actions中的jiaWait被调用了&quot;, context, value);
    setTimeout(() =&gt; &#123;
      context.commit(&quot;JIA&quot;, value);
    &#125;, 500);
  &#125;,
&#125;;

// 准备actmutations--用于操作数据
const mutations = &#123;
  JIA: function (state, value) &#123;
    console.log(&quot;mutations中的JIA被调用了&quot;, state, value);
    state.sum = state.sum + value;
  &#125;,
  JIAN: function (state, value) &#123;
    console.log(&quot;mutations中的JIAN被调用了&quot;, state, value);
    state.sum = state.sum - value;
  &#125;,
&#125;;

// 准备state--用于存储数据
const state = &#123;
  sum: 0, // 当前的和
  school: &quot;尚硅谷&quot;,
  subject: &quot;前端&quot;,
&#125;;

// 准备getters--用于将state中的数据进行加工
const getters = &#123;
  bigSum(state) &#123;
    return state.sum * 10;
  &#125;,
&#125;;

export default new Vuex.Store(&#123;
  actions,
  mutations,
  state,
  getters,
&#125;);
</code></pre>
<p>components&#x2F;Count.js</p>
<pre><code class="vue">&lt;template&gt;
   
  &lt;div class=&quot;category&quot;&gt;
       
    &lt;h2&gt;当前求和为:&#123;&#123; sum &#125;&#125;&lt;/h2&gt;
       
    &lt;h2&gt;当前求和的10倍为:&#123;&#123; bigSum &#125;&#125;&lt;/h2&gt;
       
    &lt;h2&gt;我在&#123;&#123; school &#125;&#125;, 学习&#123;&#123; subject &#125;&#125;&lt;/h2&gt;
       
    &lt;select v-model.number=&quot;n&quot;&gt;
           
      &lt;option value=&quot;1&quot;&gt;1&lt;/option&gt;
           
      &lt;option value=&quot;2&quot;&gt;2&lt;/option&gt;
           
      &lt;option value=&quot;3&quot;&gt;3&lt;/option&gt;
         
    &lt;/select&gt;
        &lt;button @click=&quot;increament&quot;&gt;+&lt;/button&gt;    
    &lt;button @click=&quot;decreament&quot;&gt;-&lt;/button&gt;    
    &lt;button @click=&quot;increamentOdd&quot;&gt;当前求和为奇数再加&lt;/button&gt;    
    &lt;button @click=&quot;increamentWait&quot;&gt;等一等再加&lt;/button&gt;  
  &lt;/div&gt;
&lt;/template&gt;

&lt;script&gt;
import &#123; mapState, mapGetters &#125; from &quot;vuex&quot;;
export default &#123;
  name: &quot;Count&quot;,
  data() &#123;
    return &#123;
      n: 1, //用户选择的数字
    &#125;;
  &#125;,
  computed: &#123;
    //靠程序员自己亲自去写计算属性
    /* sum() &#123;
      return this.$store.state.sum;
    &#125;,
    school() &#123;
      return this.$store.state.school;
    &#125;,
    subject() &#123;
      return this.$store.state.subject;
    &#125;, */

    //借助mapState生成计算属性，从state中读取数据。（对象写法）
    // ...mapState(&#123;sum: &#39;sum&#39;, school: &#39;school&#39;, subject: &#39;subject&#39;&#125;),

    //借助mapState生成计算属性，从state中读取数据。（数组写法）
    ...mapState([
      &quot;sum&quot;,
      &quot;school&quot;,
      &quot;subject&quot;,
    ]) /* ***************************************************** */ /* bigSum() &#123;
      return this.$store.getters.bigSum;
    &#125;, */, //借助mapGetters生成计算属性，从getters中读取数据。（对象写法） // ...mapGetters(&#123;&#39;bigSum&#39;: &#39;bigSum&#39;&#125;), //借助mapGetters生成计算属性，从getters中读取数据。（数组写法）

    ...mapGetters([&quot;bigSum&quot;]),
  &#125;,
  methods: &#123;
    increament() &#123;
      this.$store.commit(&quot;JIA&quot;, this.n);
    &#125;,
    decreament() &#123;
      this.$store.commit(&quot;JIAN&quot;, this.n);
    &#125;,
    increamentOdd() &#123;
      this.$store.dispatch(&quot;jiaOdd&quot;, this.n);
    &#125;,
    increamentWait() &#123;
      this.$store.dispatch(&quot;jiaWait&quot;, this.n);
    &#125;,
  &#125;,
  mounted() &#123;
    const x = mapState(&#123; sum: &quot;sum&quot;, school: &quot;school&quot;, subject: &quot;subject&quot; &#125;);
    console.log(x); // console.log(&quot;Count&quot;, this);
  &#125;,
&#125;;
&lt;/script&gt;

&lt;style scoped&gt;
button &#123;
  margin-left: 5px;
&#125;
&lt;/style&gt;
</code></pre>
<h3 id="求和案例-mapMutations-与-mapActions"><a href="#求和案例-mapMutations-与-mapActions" class="headerlink" title="求和案例_mapMutations 与 mapActions"></a>求和案例_mapMutations 与 mapActions</h3><p>main.js</p>
<pre><code class="javascript">// 引入Vue
import Vue from &quot;vue&quot;;
// 引入App
import App from &quot;./App.vue&quot;;
// 引入插件
import vueResource from &quot;vue-resource&quot;;

import store from &quot;./store&quot;;

Vue.config.productionTip = false;
// 使用插件
Vue.use(vueResource);

new Vue(&#123;
  el: &quot;#app&quot;,
  render: (h) =&gt; h(App),
  store: store,
  beforeCreate() &#123;
    Vue.prototype.$bus = this;
  &#125;,
&#125;);
</code></pre>
<p>App.vue</p>
<pre><code class="vue">&lt;template&gt;
   
  &lt;div class=&quot;container&quot;&gt;    &lt;Count /&gt;  &lt;/div&gt;
&lt;/template&gt;

&lt;script&gt;
import Count from &quot;./components/Count&quot;;
export default &#123;
  name: &quot;App&quot;,
  components: &#123;
    Count,
  &#125;,
  mounted() &#123;
    // console.log(&#39;App&#39;, this)
  &#125;,
&#125;;
&lt;/script&gt;
</code></pre>
<p>store&#x2F;index.js</p>
<pre><code class="javascript">// 该文件用于创建Vuex中最为核心的store

import Vue from &quot;vue&quot;;
import Vuex from &quot;vuex&quot;;

Vue.use(Vuex);

// 准备actions--用于响应组件中的动作
const actions = &#123;
  // jia:function(context, value) &#123;
  //     console.log(&quot;actions中的jia被调用了&quot;, context, value);
  //     context.commit(&quot;JIA&quot;, value)
  // &#125;,
  // jian:function(context, value) &#123;
  //     console.log(&quot;actions中的jian被调用了&quot;, context, value);
  //     context.commit(&quot;JIAN&quot;, value)
  // &#125;,
  jiaOdd: function (context, value) &#123;
    console.log(&quot;actions中的jiaOdd被调用了&quot;, context, value);
    if (context.state.sum % 2) &#123;
      context.commit(&quot;JIA&quot;, value);
    &#125;
  &#125;,
  jiaWait: function (context, value) &#123;
    console.log(&quot;actions中的jiaWait被调用了&quot;, context, value);
    setTimeout(() =&gt; &#123;
      context.commit(&quot;JIA&quot;, value);
    &#125;, 500);
  &#125;,
&#125;;

// 准备actmutations--用于操作数据
const mutations = &#123;
  JIA: function (state, value) &#123;
    console.log(&quot;mutations中的JIA被调用了&quot;, state, value);
    state.sum = state.sum + value;
  &#125;,
  JIAN: function (state, value) &#123;
    console.log(&quot;mutations中的JIAN被调用了&quot;, state, value);
    state.sum = state.sum - value;
  &#125;,
&#125;;

// 准备state--用于存储数据
const state = &#123;
  sum: 0, // 当前的和
  school: &quot;尚硅谷&quot;,
  subject: &quot;前端&quot;,
&#125;;

// 准备getters--用于将state中的数据进行加工
const getters = &#123;
  bigSum(state) &#123;
    return state.sum * 10;
  &#125;,
&#125;;

export default new Vuex.Store(&#123;
  actions,
  mutations,
  state,
  getters,
&#125;);
</code></pre>
<p>components&#x2F;Count.js</p>
<pre><code class="vue">&lt;template&gt;
   
  &lt;div class=&quot;category&quot;&gt;
       
    &lt;h2&gt;当前求和为:&#123;&#123; sum &#125;&#125;&lt;/h2&gt;
       
    &lt;h2&gt;当前求和的10倍为:&#123;&#123; bigSum &#125;&#125;&lt;/h2&gt;
       
    &lt;h2&gt;我在&#123;&#123; school &#125;&#125;, 学习&#123;&#123; subject &#125;&#125;&lt;/h2&gt;
       
    &lt;select v-model.number=&quot;n&quot;&gt;
           
      &lt;option value=&quot;1&quot;&gt;1&lt;/option&gt;
           
      &lt;option value=&quot;2&quot;&gt;2&lt;/option&gt;
           
      &lt;option value=&quot;3&quot;&gt;3&lt;/option&gt;
         
    &lt;/select&gt;
        &lt;button @click=&quot;increament(n)&quot;&gt;+&lt;/button&gt;    
    &lt;button @click=&quot;decreament(n)&quot;&gt;-&lt;/button&gt;    
    &lt;button @click=&quot;increamentOdd(n)&quot;&gt;当前求和为奇数再加&lt;/button&gt;    
    &lt;button @click=&quot;increamentWait(n)&quot;&gt;等一等再加&lt;/button&gt;  
  &lt;/div&gt;
&lt;/template&gt;

&lt;script&gt;
import &#123; mapState, mapGetters, mapMutations, mapActions &#125; from &quot;vuex&quot;;
export default &#123;
  name: &quot;Count&quot;,
  data() &#123;
    return &#123;
      n: 1, //用户选择的数字
    &#125;;
  &#125;,
  computed: &#123;
    //借助mapState生成计算属性，从state中读取数据。（对象写法）
    // ...mapState(&#123;sum: &#39;sum&#39;, school: &#39;school&#39;, subject: &#39;subject&#39;&#125;),

    //借助mapState生成计算属性，从state中读取数据。（数组写法）
    ...mapState([
      &quot;sum&quot;,
      &quot;school&quot;,
      &quot;subject&quot;,
    ]) /* ***************************************************** */, //借助mapGetters生成计算属性，从getters中读取数据。（对象写法） // ...mapGetters(&#123;&#39;bigSum&#39;: &#39;bigSum&#39;&#125;), //借助mapGetters生成计算属性，从getters中读取数据。（数组写法）

    ...mapGetters([&quot;bigSum&quot;]),
  &#125;,
  methods: &#123;
    //程序员亲自写方法
    /* increament() &#123;
      this.$store.commit(&quot;JIA&quot;, this.n);
    &#125;,
    decreament() &#123;
      this.$store.commit(&quot;JIAN&quot;, this.n);
    &#125;, */

    // 不推荐的写法
    /* increament() &#123;
      this.JIAJIA(this.n);
    &#125;,
    decreament() &#123;
      this.JIANJIAN(this.n);
    &#125;,
    ...mapMutations(&#123; JIAJIA: &quot;JIA&quot;, JIANJIAN: &quot;JIAN&quot; &#125;), */

    // 调用的时候需要传参, 不传参, 默认给的参数将会是鼠标点击事件
    //借助mapMutations生成对应的方法，方法中会调用commit去联系mutations(对象写法)
    ...mapMutations(&#123;
      increament: &quot;JIA&quot;,
      decreament: &quot;JIAN&quot;,
    &#125;) /* **************************************************************** */ /* increamentOdd() &#123; //借助mapMutations生成对应的方法，方法中会调用commit去联系mutations(数组写法) // ...mapMutations([&#39;JIA&#39;, &quot;JIAN&quot;]), //程序员亲自写方法
      this.$store.dispatch(&quot;jiaOdd&quot;, this.n);
    &#125;,
    increamentWait() &#123;
      this.$store.dispatch(&quot;jiaWait&quot;, this.n);
    &#125;, */, //借助mapActions生成对应的方法，方法中会调用dispatch去联系actions(对象写法)

    ...mapActions(&#123; increamentOdd: &quot;jiaOdd&quot;, increamentWait: &quot;jiaWait&quot; &#125;), //借助mapActions生成对应的方法，方法中会调用dispatch去联系actions(数组写法) // ...mapActions([&#39;jiaOdd&#39;, &#39;jiaWait&#39;]),
  &#125;,
  mounted() &#123;
    const x = mapState(&#123; sum: &quot;sum&quot;, school: &quot;school&quot;, subject: &quot;subject&quot; &#125;); // console.log(x);
  &#125;,
&#125;;
&lt;/script&gt;

&lt;style scoped&gt;
button &#123;
  margin-left: 5px;
&#125;
&lt;/style&gt;
</code></pre>
<h3 id="求和案例-多组件共享数据"><a href="#求和案例-多组件共享数据" class="headerlink" title="求和案例_多组件共享数据"></a>求和案例_多组件共享数据</h3><p>main.js</p>
<pre><code class="javascript">// 引入Vue
import Vue from &quot;vue&quot;;
// 引入App
import App from &quot;./App.vue&quot;;
// 引入插件
import vueResource from &quot;vue-resource&quot;;

import store from &quot;./store&quot;;

Vue.config.productionTip = false;
// 使用插件
Vue.use(vueResource);

new Vue(&#123;
  el: &quot;#app&quot;,
  render: (h) =&gt; h(App),
  store: store,
  beforeCreate() &#123;
    Vue.prototype.$bus = this;
  &#125;,
&#125;);
</code></pre>
<p>App.vue</p>
<pre><code class="vue">&lt;template&gt;
   
  &lt;div class=&quot;container&quot;&gt;
        &lt;Count /&gt;    
    &lt;hr /&gt;
        &lt;Person /&gt;  
  &lt;/div&gt;
&lt;/template&gt;

&lt;script&gt;
import Count from &quot;./components/Count&quot;;
import Person from &quot;./components/Person&quot;;
export default &#123;
  name: &quot;App&quot;,
  components: &#123;
    Count,
    Person,
  &#125;,
  mounted() &#123;
    // console.log(&#39;App&#39;, this)
  &#125;,
&#125;;
&lt;/script&gt;
</code></pre>
<p>store&#x2F;index.js</p>
<pre><code class="javascript">// 该文件用于创建Vuex中最为核心的store

import Vue from &quot;vue&quot;;
import Vuex from &quot;vuex&quot;;

Vue.use(Vuex);

// 准备actions--用于响应组件中的动作
const actions = &#123;
  // jia:function(context, value) &#123;
  //     console.log(&quot;actions中的jia被调用了&quot;, context, value);
  //     context.commit(&quot;JIA&quot;, value)
  // &#125;,
  // jian:function(context, value) &#123;
  //     console.log(&quot;actions中的jian被调用了&quot;, context, value);
  //     context.commit(&quot;JIAN&quot;, value)
  // &#125;,
  jiaOdd: function (context, value) &#123;
    console.log(&quot;actions中的jiaOdd被调用了&quot;, context, value);
    if (context.state.sum % 2) &#123;
      context.commit(&quot;JIA&quot;, value);
    &#125;
  &#125;,
  jiaWait: function (context, value) &#123;
    console.log(&quot;actions中的jiaWait被调用了&quot;, context, value);
    setTimeout(() =&gt; &#123;
      context.commit(&quot;JIA&quot;, value);
    &#125;, 500);
  &#125;,
&#125;;

// 准备actmutations--用于操作数据
const mutations = &#123;
  JIA: function (state, value) &#123;
    console.log(&quot;mutations中的JIA被调用了&quot;, state, value);
    state.sum = state.sum + value;
  &#125;,
  JIAN: function (state, value) &#123;
    console.log(&quot;mutations中的JIAN被调用了&quot;, state, value);
    state.sum = state.sum - value;
  &#125;,
  ADD_PERSON: function (state, value) &#123;
    console.log(&quot;mutations中的ADD_PERSON被调用了&quot;, state, value);
    state.personList.unshift(value);
  &#125;,
&#125;;

// 准备state--用于存储数据
const state = &#123;
  sum: 0, // 当前的和
  school: &quot;尚硅谷&quot;,
  subject: &quot;前端&quot;,
  personList: [&#123; id: &quot;001&quot;, name: &quot;张三&quot; &#125;],
&#125;;

// 准备getters--用于将state中的数据进行加工
const getters = &#123;
  bigSum(state) &#123;
    return state.sum * 10;
  &#125;,
&#125;;

export default new Vuex.Store(&#123;
  actions,
  mutations,
  state,
  getters,
&#125;);
</code></pre>
<p>components&#x2F;Count.js</p>
<pre><code class="vue">&lt;template&gt;
   
  &lt;div class=&quot;category&quot;&gt;
       
    &lt;h2&gt;当前求和为:&#123;&#123; sum &#125;&#125;&lt;/h2&gt;
       
    &lt;h2&gt;当前求和的10倍为:&#123;&#123; bigSum &#125;&#125;&lt;/h2&gt;
       
    &lt;h2&gt;我在&#123;&#123; school &#125;&#125;, 学习&#123;&#123; subject &#125;&#125;&lt;/h2&gt;
       
    &lt;h2 style=&quot;color:red&quot;&gt;Person组件的总人数是: &#123;&#123; personList.length &#125;&#125;&lt;/h2&gt;
       
    &lt;select v-model.number=&quot;n&quot;&gt;
           
      &lt;option value=&quot;1&quot;&gt;1&lt;/option&gt;
           
      &lt;option value=&quot;2&quot;&gt;2&lt;/option&gt;
           
      &lt;option value=&quot;3&quot;&gt;3&lt;/option&gt;
         
    &lt;/select&gt;
        &lt;button @click=&quot;increament(n)&quot;&gt;+&lt;/button&gt;    
    &lt;button @click=&quot;decreament(n)&quot;&gt;-&lt;/button&gt;    
    &lt;button @click=&quot;increamentOdd(n)&quot;&gt;当前求和为奇数再加&lt;/button&gt;    
    &lt;button @click=&quot;increamentWait(n)&quot;&gt;等一等再加&lt;/button&gt;  
  &lt;/div&gt;
&lt;/template&gt;

&lt;script&gt;
import &#123; mapState, mapGetters, mapMutations, mapActions &#125; from &quot;vuex&quot;;
export default &#123;
  name: &quot;Count&quot;,
  data() &#123;
    return &#123;
      n: 1, //用户选择的数字
    &#125;;
  &#125;,
  computed: &#123;
    //借助mapState生成计算属性，从state中读取数据。（对象写法）
    // ...mapState(&#123;sum: &#39;sum&#39;, school: &#39;school&#39;, subject: &#39;subject&#39;&#125;),

    //借助mapState生成计算属性，从state中读取数据。（数组写法）
    ...mapState([
      &quot;sum&quot;,
      &quot;school&quot;,
      &quot;subject&quot;,
      &quot;personList&quot;,
    ]) /* ***************************************************** */, //借助mapGetters生成计算属性，从getters中读取数据。（对象写法） // ...mapGetters(&#123;&#39;bigSum&#39;: &#39;bigSum&#39;&#125;), //借助mapGetters生成计算属性，从getters中读取数据。（数组写法）

    ...mapGetters([&quot;bigSum&quot;]),
  &#125;,
  methods: &#123;
    //借助mapMutations生成对应的方法，方法中会调用commit去联系mutations(对象写法)
    ...mapMutations(&#123; increament: &quot;JIA&quot;, decreament: &quot;JIAN&quot; &#125;), //借助mapMutations生成对应的方法，方法中会调用commit去联系mutations(数组写法) // ...mapMutations([&#39;JIA&#39;, &quot;JIAN&quot;]), //借助mapActions生成对应的方法，方法中会调用dispatch去联系actions(对象写法)

    ...mapActions(&#123; increamentOdd: &quot;jiaOdd&quot;, increamentWait: &quot;jiaWait&quot; &#125;), //借助mapActions生成对应的方法，方法中会调用dispatch去联系actions(数组写法) // ...mapActions([&#39;jiaOdd&#39;, &#39;jiaWait&#39;]),
  &#125;,
  mounted() &#123;
    const x = mapState(&#123; sum: &quot;sum&quot;, school: &quot;school&quot;, subject: &quot;subject&quot; &#125;); // console.log(x);
  &#125;,
&#125;;
&lt;/script&gt;

&lt;style scoped&gt;
button &#123;
  margin-left: 5px;
&#125;
&lt;/style&gt;
</code></pre>
<p>components&#x2F;Person.js</p>
<pre><code class="vue">&lt;template&gt;
   
  &lt;div&gt;
       
    &lt;h2&gt;人员列表&lt;/h2&gt;
       
    &lt;h2 style=&quot;color: red&quot;&gt;Count组件的求和为: &#123;&#123; sum &#125;&#125;&lt;/h2&gt;
        &lt;input type=&quot;text&quot; placeholder=&quot;请输入名字&quot; v-model=&quot;name&quot; /&gt;    
    &lt;button @click=&quot;add&quot;&gt;添加&lt;/button&gt;    
    &lt;ul&gt;
           
      &lt;li v-for=&quot;p in personList&quot; :key=&quot;p.id&quot;&gt;&#123;&#123; p.name &#125;&#125;&lt;/li&gt;
         
    &lt;/ul&gt;
     
  &lt;/div&gt;
&lt;/template&gt;

&lt;script&gt;
import &#123; nanoid &#125; from &quot;nanoid&quot;;
export default &#123;
  name: &quot;Person&quot;,
  data() &#123;
    return &#123;
      name: &quot;&quot;,
    &#125;;
  &#125;,
  computed: &#123;
    personList() &#123;
      return this.$store.state.personList;
    &#125;,
    sum() &#123;
      return this.$store.state.sum;
    &#125;,
  &#125;,
  methods: &#123;
    add() &#123;
      const personObj = &#123; id: nanoid(), name: this.name &#125;; // console.log(personObj);
      this.$store.commit(&quot;ADD_PERSON&quot;, personObj);
      this.name = &quot;&quot;;
    &#125;,
  &#125;,
&#125;;
&lt;/script&gt;
</code></pre>
<h3 id="求和案例-vuex-模块化编码"><a href="#求和案例-vuex-模块化编码" class="headerlink" title="求和案例_vuex 模块化编码"></a>求和案例_vuex 模块化编码</h3><p>main.js</p>
<pre><code class="javascript">// 引入Vue
import Vue from &quot;vue&quot;;
// 引入App
import App from &quot;./App.vue&quot;;
// 引入插件
import vueResource from &quot;vue-resource&quot;;

import store from &quot;./store&quot;;

Vue.config.productionTip = false;
// 使用插件
Vue.use(vueResource);

new Vue(&#123;
  el: &quot;#app&quot;,
  render: (h) =&gt; h(App),
  store: store,
  beforeCreate() &#123;
    Vue.prototype.$bus = this;
  &#125;,
&#125;);
</code></pre>
<p>App.vue</p>
<pre><code class="vue">&lt;template&gt;
   
  &lt;div class=&quot;container&quot;&gt;
        &lt;Count /&gt;    
    &lt;hr /&gt;
        &lt;Person /&gt;  
  &lt;/div&gt;
&lt;/template&gt;

&lt;script&gt;
import Count from &quot;./components/Count&quot;;
import Person from &quot;./components/Person&quot;;
export default &#123;
  name: &quot;App&quot;,
  components: &#123;
    Count,
    Person,
  &#125;,
  mounted() &#123;
    // console.log(&#39;App&#39;, this)
  &#125;,
&#125;;
&lt;/script&gt;
</code></pre>
<p>store&#x2F;index.js</p>
<pre><code class="javascript">// 该文件用于创建Vuex中最为核心的store

import Vue from &quot;vue&quot;;
import Vuex from &quot;vuex&quot;;
import countOptions from &quot;./count&quot;;
import personOptions from &quot;./person&quot;;

Vue.use(Vuex);

export default new Vuex.Store(&#123;
  modules: &#123;
    countAbout: countOptions,
    personAbout: personOptions,
  &#125;,
&#125;);
</code></pre>
<p>store&#x2F;count.js</p>
<pre><code class="javascript">//求和相关的配置
export default &#123;
  namespaced: true,
  actions: &#123;
    jiaOdd: function (context, value) &#123;
      console.log(&quot;actions中的jiaOdd被调用了&quot;, context, value);
      if (context.state.sum % 2) &#123;
        context.commit(&quot;JIA&quot;, value);
      &#125;
    &#125;,
    jiaWait: function (context, value) &#123;
      console.log(&quot;actions中的jiaWait被调用了&quot;, context, value);
      setTimeout(() =&gt; &#123;
        context.commit(&quot;JIA&quot;, value);
      &#125;, 500);
    &#125;,
  &#125;,
  mutations: &#123;
    JIA: function (state, value) &#123;
      console.log(&quot;mutations中的JIA被调用了&quot;, state, value);
      state.sum = state.sum + value;
    &#125;,
    JIAN: function (state, value) &#123;
      console.log(&quot;mutations中的JIAN被调用了&quot;, state, value);
      state.sum = state.sum - value;
    &#125;,
  &#125;,
  state: &#123;
    sum: 0, // 当前的和
    school: &quot;尚硅谷&quot;,
    subject: &quot;前端&quot;,
  &#125;,
  getters: &#123;
    bigSum(state) &#123;
      return state.sum * 10;
    &#125;,
  &#125;,
&#125;;
</code></pre>
<p>store&#x2F;person.js</p>
<pre><code class="javascript">//人员管理相关的配置
import &#123; nanoid &#125; from &quot;nanoid&quot;;
import axios from &quot;axios&quot;;
export default &#123;
  namespaced: true,
  actions: &#123;
    addPersonWang(context, value) &#123;
      if (value.name.indexOf(&quot;王&quot;) === 0) &#123;
        context.commit(&quot;ADD_PERSON&quot;, value);
      &#125; else &#123;
        alert(&quot;请添加一个姓王的人&quot;);
      &#125;
    &#125;,
    addPersonServer(context) &#123;
      axios.get(&quot;https://api.uixsj.cn/hitokoto/get?type=social&quot;).then(
        (response) =&gt; &#123;
          context.commit(&quot;ADD_PERSON&quot;, &#123; id: nanoid(), name: response.data &#125;);
        &#125;,
        (error) =&gt; &#123;
          alert(error.message);
        &#125;
      );
    &#125;,
  &#125;,
  mutations: &#123;
    ADD_PERSON: function (state, value) &#123;
      console.log(&quot;mutations中的ADD_PERSON被调用了&quot;, state, value);
      state.personList.unshift(value);
    &#125;,
  &#125;,
  state: &#123;
    personList: [&#123; id: &quot;001&quot;, name: &quot;张三&quot; &#125;],
  &#125;,
  getters: &#123;
    firstPersonName(state) &#123;
      return state.personList[0].name;
    &#125;,
  &#125;,
&#125;;
</code></pre>
<p>components&#x2F;Count.js</p>
<pre><code class="vue">&lt;template&gt;
   
  &lt;div class=&quot;category&quot;&gt;
       
    &lt;h2&gt;当前求和为:&#123;&#123; sum &#125;&#125;&lt;/h2&gt;
       
    &lt;!-- &lt;h2&gt;当前求和的10倍为:&#123;&#123; bigSum &#125;&#125;&lt;/h2&gt; --&gt;
       
    &lt;h2&gt;我在&#123;&#123; school &#125;&#125;, 学习&#123;&#123; subject &#125;&#125;&lt;/h2&gt;
       
    &lt;h2 style=&quot;color:red&quot;&gt;Person组件的总人数是: &#123;&#123; personList.length &#125;&#125;&lt;/h2&gt;
       
    &lt;select v-model.number=&quot;n&quot;&gt;
           
      &lt;option value=&quot;1&quot;&gt;1&lt;/option&gt;
           
      &lt;option value=&quot;2&quot;&gt;2&lt;/option&gt;
           
      &lt;option value=&quot;3&quot;&gt;3&lt;/option&gt;
         
    &lt;/select&gt;
        &lt;button @click=&quot;increament(n)&quot;&gt;+&lt;/button&gt;    
    &lt;button @click=&quot;decreament(n)&quot;&gt;-&lt;/button&gt;    
    &lt;button @click=&quot;increamentOdd(n)&quot;&gt;当前求和为奇数再加&lt;/button&gt;    
    &lt;button @click=&quot;increamentWait(n)&quot;&gt;等一等再加&lt;/button&gt;  
  &lt;/div&gt;
&lt;/template&gt;

&lt;script&gt;
import &#123; mapState, mapGetters, mapMutations, mapActions &#125; from &quot;vuex&quot;;
export default &#123;
  name: &quot;Count&quot;,
  data() &#123;
    return &#123;
      n: 1, //用户选择的数字
    &#125;;
  &#125;,
  computed: &#123;
    //借助mapState生成计算属性，从state中读取数据。（对象写法）
    // ...mapState(&#123;sum: &#39;sum&#39;, school: &#39;school&#39;, subject: &#39;subject&#39;&#125;),

    //借助mapState生成计算属性，从state中读取数据。（数组写法）
    ...mapState(&quot;countAbout&quot;, [&quot;sum&quot;, &quot;school&quot;, &quot;subject&quot;]),
    ...mapState(&quot;personAbout&quot;, [
      &quot;personList&quot;,
    ]) /* ***************************************************** */, //借助mapGetters生成计算属性，从getters中读取数据。（对象写法） // ...mapGetters(&#123;&#39;bigSum&#39;: &#39;bigSum&#39;&#125;), //借助mapGetters生成计算属性，从getters中读取数据。（数组写法） // ...mapGetters([&quot;bigSum&quot;]),
  &#125;,
  methods: &#123;
    //借助mapMutations生成对应的方法，方法中会调用commit去联系mutations(对象写法)
    ...mapMutations(&quot;countAbout&quot;, &#123; increament: &quot;JIA&quot;, decreament: &quot;JIAN&quot; &#125;), //借助mapMutations生成对应的方法，方法中会调用commit去联系mutations(数组写法) // ...mapMutations([&#39;JIA&#39;, &quot;JIAN&quot;]), //借助mapActions生成对应的方法，方法中会调用dispatch去联系actions(对象写法)

    ...mapActions(&quot;countAbout&quot;, &#123;
      increamentOdd: &quot;jiaOdd&quot;,
      increamentWait: &quot;jiaWait&quot;,
    &#125;), //借助mapActions生成对应的方法，方法中会调用dispatch去联系actions(数组写法) // ...mapActions([&#39;jiaOdd&#39;, &#39;jiaWait&#39;]),
  &#125;,
  mounted() &#123;
    // const x = mapState(&#123; sum: &quot;sum&quot;, school: &quot;school&quot;, subject: &quot;subject&quot; &#125;);
    console.log(this.$store);
  &#125;,
&#125;;
&lt;/script&gt;

&lt;style scoped&gt;
button &#123;
  margin-left: 5px;
&#125;
&lt;/style&gt;
</code></pre>
<p>components&#x2F;Person.js</p>
<h2 id="路由"><a href="#路由" class="headerlink" title="路由"></a>路由</h2><p><img src="https://cdn.jsdelivr.net/gh/roudoukou/roudoukou.github.io/blog-img/FiqIKtuzebXqZRSTvkn-aJAU8tMO.png"><br><img src="https://cdn.jsdelivr.net/gh/roudoukou/roudoukou.github.io/blog-img/Fpge1Ng9VZ77iS201NfdfyUhxb-f.png"><br><img src="https://cdn.jsdelivr.net/gh/roudoukou/roudoukou.github.io/blog-img/Fuv9vrT_ZH-JO_YVhWdP-thig-af.png"><br>引入 vue-router<br>vue 的一个插件库, 专门用来实现 SPA 应用</p>
<p>2022 年 2 月 7 日以后, vue-router 的默认版本, 为 4 版本<br>vue-router4 只能用在 vue3 中使用<br>vue-router3 才, 能用在 vue2 中<br>此时练习的环境是 vue2, 所以我们安装 vue-router3 版本<br>E:\Code\Vue\vue_test&gt; npm i vue-router@3</p>
<ol>
<li>理解： 一个路由（route）就是一组映射关系（key - value），多个路由需要路由器（router）进行管理。</li>
<li>前端路由：key 是路径，value 是组件。</li>
</ol>
<h3 id="1-基本使用"><a href="#1-基本使用" class="headerlink" title="1.基本使用"></a>1.基本使用</h3><ol>
<li>安装 vue-router，命令：<code>npm i vue-router</code></li>
<li>应用插件：<code>Vue.use(VueRouter)</code></li>
<li>编写 router 配置项:</li>
</ol>
<pre><code class="javascript">//引入VueRouter
import VueRouter from &quot;vue-router&quot;;
//引入Luyou 组件
import About from &quot;../components/About&quot;;
import Home from &quot;../components/Home&quot;;

//创建router实例对象，去管理一组一组的路由规则
const router = new VueRouter(&#123;
  routes: [
    &#123;
      path: &quot;/about&quot;,
      component: About,
    &#125;,
    &#123;
      path: &quot;/home&quot;,
      component: Home,
    &#125;,
  ],
&#125;);

//暴露router
export default router;
</code></pre>
<ol start="4">
<li>实现切换（active-class 可配置高亮样式）</li>
</ol>
<pre><code class="vue">&lt;router-link active-class=&quot;active&quot; to=&quot;/about&quot;&gt;About&lt;/router-link&gt;
</code></pre>
<ol start="5">
<li>指定展示位置</li>
</ol>
<pre><code class="vue">&lt;router-view&gt;&lt;/router-view&gt;
</code></pre>
<h3 id="2-几个注意点"><a href="#2-几个注意点" class="headerlink" title="2.几个注意点"></a>2.几个注意点</h3><ol>
<li>路由组件通常存放在<code>pages</code>文件夹，一般组件通常存放在<code>components</code>文件夹。</li>
<li>通过切换，“隐藏”了的路由组件，默认是被销毁掉的，需要的时候再去挂载。</li>
<li>每个组件都有自己的<code>$route</code>属性，里面存储着自己的路由信息。</li>
<li>整个应用只有一个 router，可以通过组件的<code>$router</code>属性获取到。</li>
</ol>
<h3 id="3-多级路由（多级路由）"><a href="#3-多级路由（多级路由）" class="headerlink" title="3.多级路由（多级路由）"></a>3.多级路由（多级路由）</h3><ol>
<li>配置路由规则，使用 children 配置项：</li>
</ol>
<pre><code class="javascript">routes: [
  &#123;
    path: &quot;/about&quot;,
    component: About,
  &#125;,
  &#123;
    path: &quot;/home&quot;,
    component: Home,
    children: [
      //通过children配置子级路由
      &#123;
        path: &quot;news&quot;, //此处一定不要写：/news
        component: News,
      &#125;,
      &#123;
        path: &quot;message&quot;, //此处一定不要写：/message
        component: Message,
      &#125;,
    ],
  &#125;,
];
</code></pre>
<ol start="2">
<li>跳转（要写完整路径）：</li>
</ol>
<pre><code class="vue">&lt;router-link to=&quot;/home/news&quot;&gt;News&lt;/router-link&gt;
</code></pre>
<h3 id="4-路由的-query-参数"><a href="#4-路由的-query-参数" class="headerlink" title="4.路由的 query 参数"></a>4.路由的 query 参数</h3><ol>
<li>传递参数</li>
</ol>
<pre><code class="vue">&lt;!-- 跳转并携带query参数，to的字符串写法 --&gt;
&lt;router-link :to=&quot;/home/message/detail?id=666&amp;title=你好&quot;&gt;跳转&lt;/router-link&gt;

&lt;!-- 跳转并携带query参数，to的对象写法 --&gt;
&lt;router-link
  :to=&quot;&#123;
    path: &#39;/home/message/detail&#39;,
    query: &#123;
      id: 666,
      title: &#39;你好&#39;,
    &#125;,
  &#125;&quot;
&gt;跳转&lt;/router-link&gt;
</code></pre>
<ol start="2">
<li>接收参数：</li>
</ol>
<pre><code class="javascript">$route.query.id;
$route.query.title;
</code></pre>
<h3 id="5-命名路由"><a href="#5-命名路由" class="headerlink" title="5.命名路由"></a>5.命名路由</h3><ol>
<li>作用：可以简化路由的跳转。</li>
<li>如何使用</li>
<li>给路由命名：</li>
</ol>
<pre><code class="javascript">&#123;
    path:&#39;/demo&#39;,
    component:Demo,
    children:[
        &#123;
            path:&#39;test&#39;,
            component:Test,
            children:[
                &#123;
                      name:&#39;hello&#39; //给路由命名
                    path:&#39;welcome&#39;,
                    component:Hello,
                &#125;
            ]
        &#125;
    ]
&#125;
</code></pre>
<ol start="2">
<li>简化跳转：</li>
</ol>
<pre><code class="vue">&lt;!--简化前，需要写完整的路径 --&gt;
&lt;router-link to=&quot;/demo/test/welcome&quot;&gt;跳转&lt;/router-link&gt;

&lt;!--简化后，直接通过名字跳转 --&gt;
&lt;router-link :to=&quot;&#123; name: &#39;hello&#39; &#125;&quot;&gt;跳转&lt;/router-link&gt;

&lt;!--简化写法配合传递参数 --&gt;
&lt;router-link
  :to=&quot;&#123;
    name: &#39;hello&#39;,
    query: &#123;
      id: 666,
      title: &#39;你好&#39;,
    &#125;,
  &#125;&quot;
&gt;跳转&lt;/router-link&gt;
</code></pre>
<h3 id="6-路由的-params-参数"><a href="#6-路由的-params-参数" class="headerlink" title="6.路由的 params 参数"></a>6.路由的 params 参数</h3><ol>
<li>配置路由，声明接收 params 参数</li>
</ol>
<pre><code class="javascript">&#123;
    path:&#39;/home&#39;,
    component:Home,
    children:[
        &#123;
            path:&#39;news&#39;,
            component:News
        &#125;,
        &#123;
            component:Message,
            children:[
                &#123;
                    name:&#39;xiangqing&#39;,
                    path:&#39;detail/:id/:title&#39;, //使用占位符声明接收params参数
                    component:Detail
                &#125;
            ]
        &#125;
    ]
&#125;
</code></pre>
<ol start="2">
<li>传递参数</li>
</ol>
<pre><code class="vue">&lt;!-- 跳转并携带params参数，to的字符串写法 --&gt;
&lt;router-link :to=&quot;/home/message/detail/666/你好&quot;&gt;跳转&lt;/router-link&gt;

&lt;!-- 跳转并携带params参数，to的对象写法 --&gt;
&lt;router-link
  :to=&quot;&#123;
    name: &#39;xiangqing&#39;,
    params: &#123;
      id: 666,
      title: &#39;你好&#39;,
    &#125;,
  &#125;&quot;
&gt;跳转&lt;/router-link&gt;
</code></pre>
<ol start="3">
<li>接收参数：</li>
</ol>
<pre><code class="javascript">$route.params.id;
$route.params.title;
</code></pre>
<h3 id="7-路由的-props-配置"><a href="#7-路由的-props-配置" class="headerlink" title="7.路由的 props 配置"></a>7.路由的 props 配置</h3><pre><code>作用：让路由组件更方便的收到参数
</code></pre>
<pre><code class="javascript">&#123;
    name:&#39;xiangqing&#39;,
    path:&#39;detail/:id&#39;,
    component:Detail,

    //第一种写法：props值为对象，该对象中所有的key-value的组合最终都会通过props传给Detail组件
    // props:&#123;a:900&#125;

    //第二种写法：props值为布尔值，布尔值为true，则把路由收到的所有params参数通过props传给Detail组件
    // props:true

    //第三种写法：props值为函数，该函数返回的对象中每一组key-value都会通过props传给Detail组件
    props(route)&#123;
        return &#123;
            id:route.query.id,
            title:route.query.title
        &#125;
    &#125;
&#125;
</code></pre>
<h3 id="8-lt-router-link-gt-的-replace-属性"><a href="#8-lt-router-link-gt-的-replace-属性" class="headerlink" title="8.&lt;router-link&gt;的 replace 属性"></a>8.<code>&lt;router-link&gt;</code>的 replace 属性</h3><ol>
<li>作用：控制路由跳转时操作浏览器历史记录的模式</li>
<li>浏览器的历史记录有两种写入方式：分别为<code>push</code>和<code>replace</code>，<code>push</code>是追加历史记录，<code>replace</code>是替换当前记录。路由跳转时候默认为<code>push</code></li>
<li>如何开启<code>replace</code>模式：<code>&lt;router-link replace .......&gt;News&lt;/router-link&gt;</code></li>
</ol>
<h3 id="9-编程式路由导航"><a href="#9-编程式路由导航" class="headerlink" title="9.编程式路由导航"></a>9.编程式路由导航</h3><ol>
<li>作用：不借助<code>&lt;router-link&gt;</code>实现路由跳转，让路由跳转更加灵活</li>
<li>具体编码：</li>
</ol>
<pre><code class="javascript">//$router的两个API
this.$router.push(&#123;
  name: &quot;xiangqing&quot;,
  params: &#123;
    id: xxx,
    title: xxx,
  &#125;,
&#125;);

this.$router.replace(&#123;
  name: &quot;xiangqing&quot;,
  params: &#123;
    id: xxx,
    title: xxx,
  &#125;,
&#125;);
this.$router.forward(); //前进
this.$router.back(); //后退
this.$router.go(); //可前进也可后退
</code></pre>
<h3 id="10-缓存路由组件"><a href="#10-缓存路由组件" class="headerlink" title="10.缓存路由组件"></a>10.缓存路由组件</h3><ol>
<li>作用：让不展示的路由组件保持挂载，不被销毁。</li>
<li>具体编码：</li>
</ol>
<pre><code class="vue">&lt;keep-alive include=&quot;News&quot;&gt; 
    &lt;router-view&gt;&lt;/router-view&gt;
&lt;/keep-alive&gt;
</code></pre>
<h3 id="11-两个新的生命周期钩子"><a href="#11-两个新的生命周期钩子" class="headerlink" title="11.两个新的生命周期钩子"></a>11.两个新的生命周期钩子</h3><ol>
<li>作用：路由组件所独有的两个钩子，用于捕获路由组件的激活状态。</li>
<li>具体名字：<ol>
<li><code>activated</code>路由组件被激活时触发。</li>
<li><code>deactivated</code>路由组件失活时触发。</li>
</ol>
</li>
</ol>
<h3 id="12-路由守卫"><a href="#12-路由守卫" class="headerlink" title="12.路由守卫"></a>12.路由守卫</h3><ol>
<li>作用：对路由进行权限控制</li>
<li>分类：全局守卫、独享守卫、组件内守卫</li>
<li>全局守卫:</li>
</ol>
<pre><code class="javascript">//全局前置守卫：初始化时执行、每次路由切换前执行
router.beforeEach((to, from, next) =&gt; &#123;
  console.log(&quot;beforeEach&quot;, to, from);
  if (to.meta.isAuth) &#123;
    //判断当前路由是否需要进行权限控制
    if (localStorage.getItem(&quot;school&quot;) === &quot;atguigu&quot;) &#123;
      //权限控制的具体规则
      next(); //放行
    &#125; else &#123;
      alert(&quot;暂无权限查看&quot;);
      // next(&#123;name:&#39;guanyu&#39;&#125;)
    &#125;
  &#125; else &#123;
    next(); //放行
  &#125;
&#125;);

//全局后置守卫：初始化时执行、每次路由切换后执行
router.afterEach((to, from) =&gt; &#123;
  console.log(&quot;afterEach&quot;, to, from);
  if (to.meta.title) &#123;
    document.title = to.meta.title; //修改网页的title
  &#125; else &#123;
    document.title = &quot;vue_test&quot;;
  &#125;
&#125;);
</code></pre>
<ol start="4">
<li>独享守卫:</li>
</ol>
<pre><code class="javascript">beforeEnter(to,from,next)&#123;
    console.log(&#39;beforeEnter&#39;,to,from)
    if(to.meta.isAuth)&#123; //判断当前路由是否需要进行权限控制
        if(localStorage.getItem(&#39;school&#39;) === &#39;atguigu&#39;)&#123;
            next()
        &#125;else&#123;
            alert(&#39;暂无权限查看&#39;)
            // next(&#123;name:&#39;guanyu&#39;&#125;)
        &#125;
    &#125;else&#123;
        next()
    &#125;
&#125;
</code></pre>
<ol start="5">
<li>组件内守卫：</li>
</ol>
<pre><code class="javascript">//进入守卫：通过路由规则，进入该组件时被调用
beforeRouteEnter (to, from, next) &#123;
&#125;,
//离开守卫：通过路由规则，离开该组件时被调用
beforeRouteLeave (to, from, next) &#123;
&#125;
</code></pre>
<h3 id="13-路由器的两种工作模式"><a href="#13-路由器的两种工作模式" class="headerlink" title="13.路由器的两种工作模式"></a>13.路由器的两种工作模式</h3><p>部署项目<br>npm run build<br>npm init<br>npm i express</p>
<ol>
<li>对于一个 url 来说，什么是 hash 值？—— #及其后面的内容就是 hash 值。</li>
<li>hash 值不会包含在 HTTP 请求中，即：hash 值不会带给服务器。</li>
<li>hash 模式：</li>
<li>地址中永远带着#号，不美观 。</li>
<li>若以后将地址通过第三方手机 app 分享，若 app 校验严格，则地址会被标记为不合法。</li>
<li>兼容性较好。</li>
<li>history 模式：</li>
<li>地址干净，美观 。</li>
<li>兼容性和 hash 模式相比略差。</li>
<li>应用部署上线时需要后端人员支持，解决刷新页面服务端 404 的问题。</li>
</ol>
<h2 id="使用-element-ui"><a href="#使用-element-ui" class="headerlink" title="使用 element-ui"></a>使用 element-ui</h2><p>安装 element-ui<br>npm i element-ui</p>
<p>按需引入<br>npm install babel-plugin-component -D</p>

  </div>
  <div id="gitalk-container"></div>
</div>

<script>
  
Fancybox.bind('[data-fancybox="fancybox-gallery-img"]', {
  dragToClose: true,
  Toolbar: true,
  closeButton: "top",
  Image: {
    zoom: true,
  },
  on: {
    initCarousel: (fancybox) => {
      const slide = fancybox.Carousel.slides[fancybox.Carousel.page];
      fancybox.$container.style.setProperty(
        "--bg-image",
        `url("${slide.$thumb.src}")`
      );
    },
    "Carousel.change": (fancybox, carousel, to, from) => {
      const slide = carousel.slides[to];
      fancybox.$container.style.setProperty(
        "--bg-image",
        `url("${slide.$thumb.src}")`
      );
    },
  },
});
</script>

<style>
    #noneimg img {
        display: none;
        z-index: 9999;
        /* width: 600px !important; */
        min-width: 0%;
        max-width: 90%;
        max-height: 80%;
        border-radius: 0px;
        position: fixed;
        box-shadow: 0 0 0px #c3c3c300 !important;
        left: 0;
        top: 0;
        right: 0;
        bottom: 0;
        margin: auto !important;
    }

    @media screen and (max-width:600px) {
        #noneimg img {
            max-width: 88%
        }
    }
</style>

    <div class="post-paging">
    
    <a href="/2022/11/30/%E7%90%86%E8%AE%BA%E5%AE%9E%E9%AA%8C%E6%95%99%E5%AD%A6%E4%B8%80/">
        <div class="post-paging-last">
            <span>上一篇</span>
            <p>理论实验教学一</p>
        </div>
    </a>
    

    
    <a href="/2022/11/22/%E5%AE%9E%E9%AA%8C%E9%A1%B9%E7%9B%AE%E4%B9%9D%EF%BC%9A%E6%88%90%E7%BB%A9%E6%9F%A5%E8%AF%A2/">
        <div class="post-paging-next">
            <span>下一篇</span>
            <p>实验项目九：成绩查询</p>
        </div>
    </a>
    
</div>
</div>
		
<div class="footer">
	<div class="Copyright">
		©2023 By Joey. 主题：<a
			style="text-decoration: none;display: contents; color: #898F9F;"
			target="_blank" rel="noopener" href="https://github.com/79e/hexo-theme-quiet">Quiet</a>
	</div>
	<div class="contact">
		
		<a target="_blank" rel="noopener" href="https://github.com/79E/hexo-theme-quiet">
			<img src="https://cdn.jsdelivr.net/gh/duogongneng/MyBlogImg/imggithub.png" alt="Quiet主题">
		</a>
		
	</div>
</div>

<script src="/js/gotop.js"></script>


<style type="text/css">
    @media screen and (min-width: 600px) {
        .goTop>span {
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 10px;
            width: 40px;
            height: 40px;
            cursor: pointer;
            opacity: 0.8;
            background: rgba(18, 24, 58, 0.06);
            text-align: center;
            transition: border .5s;
            border: 1px solid rgba(18, 24, 58, 0.06);

            -moz-transition: border .5s;
            /* Firefox 4 */
            -webkit-transition: border .5s;
            /* Safari 和 Chrome */
            -o-transition: border .5s;
            /* Opera */
        }

        .goTop>span:hover {
            border: 1px solid #6680B3;
        }


        .goTop {
            position: fixed;
            right: 30px;
            bottom: 80px;
        }

        .goTop>span>svg {
            width: 20px;
            height: 20px;
            opacity: 0.7;
        }

    }

    @media screen and (max-width: 600px) {
        .goTop {
            display: none;
        }
    }
</style>
<div class="goTop" id="js-go_top">
    <span>
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">
            <g>
                <path d="M13 12v8h-2v-8H4l8-8 8 8z"></path>
            </g>
        </svg>
    </span>
</div>
<script>
    $( '#js-go_top' )
	.gotoTop( {
		offset: 500,
		speed: 300,
		animationShow: {
			'transform': 'translate(0,0)',
			'transition': 'transform .5s ease-in-out'
		},
		animationHide: {
			'transform': 'translate(100px,0)',
			'transition': 'transform .5s ease-in-out'
		}
	} );
</script>


    <!-- Gitalk -->
    <script>
        const data = '{"clientID":"02b3c","clientSecret":"adfc7b4","repo":"gimment","owner":"duneng","admin":"duneng"}'
        const gitalk = new Gitalk({
            ...JSON.parse( data),
            id:location.pathname,
            distractionFreeMode:false
        })
        
        if(Boolean('true')){
            gitalk.render('gitalk-container')
        }
    </script>

<script>
	console.log('\n %c Hexo-Quiet 主题 %c https://github.com/79e/hexo-theme-quiet \n', 'color: #fadfa3; background: #030307; padding:5px 0;', 'background: #fadfa3; padding:5px 0;')
</script>
	</body>
</html>

