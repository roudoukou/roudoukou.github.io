<!DOCTYPE html>
<html>
	<head>
		
<title>理论实验教学二-Quiet</title>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="shortcut icon" type="image/x-icon" href="/image/favicon.ico">

<link rel="stylesheet" href="/css/index.css">


<meta name="keywords" content="hexo主题,hexo扁平化主题,Quiet主题">
<meta name="description" content="描述">


<script src="/js/jquery.min.js"></script>


<script src="/js/index.js"></script>


<script src="/js/fancybox.umd.js"></script>


<script src="/js/fancybox-images.js"></script>


<script src="/js/gitalk.min.js"></script>


<script src="/js/hljs.min.js"></script>
 
<script>hljs.highlightAll();</script>

	<meta name="generator" content="Hexo 6.3.0"></head>

	<body>
		
	<div class="header">
		<div class="header-top" id="header-top">
			<div class="h-left">
				<a href="/">
					<img src="/image/logo.png" alt="Quiet">
				</a>
			</div>
			<div class="h-right">
				<ul>
					
						
								<li>
									<a href="/">
										HOME
									</a>
									<span class="dot"></span>
								</li>
								
									
						
								<li>
									<a href="/archives">
										ARCHIVE
									</a>
									<span class="dot"></span>
								</li>
								
									
						
								<li>
									<a href="/categories">
										CATEGORIES
									</a>
									<span class="dot"></span>
								</li>
								
									
						
								<li>
									<a href="/tags">
										TAGS
									</a>
									<span class="dot"></span>
								</li>
								
									
						
								<li>
									<a href="/links">
										LINKS
									</a>
									<span class="dot"></span>
								</li>
								
									
						
								<li>
									<a href="/about">
										ABOUT
									</a>
									<span class="dot"></span>
								</li>
								
									
				</ul>
			</div>
			<div class="h-right-close">
				<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24">
					<path fill="none" d="M0 0h24v24H0z" />
					<path d="M3 4h18v2H3V4zm0 7h18v2H3v-2zm0 7h18v2H3v-2z" fill="rgba(68,68,68,1)" />
				</svg>
			</div>
		</div>
	</div>
	<div class="sidebar">
    <div class="topo">
        <h2>Joey</h2>
    </div>
    <ul>
        
        <li>
            <a href="/">HOME</a>
        </li>
        
        <li>
            <a href="/archives">ARCHIVE</a>
        </li>
        
        <li>
            <a href="/categories">CATEGORIES</a>
        </li>
        
        <li>
            <a href="/tags">TAGS</a>
        </li>
        
        <li>
            <a href="/links">LINKS</a>
        </li>
        
        <li>
            <a href="/about">ABOUT</a>
        </li>
        
    </ul>
    <div class="my_foot">
        
        <a target="_blank" rel="noopener" href="https://github.com/79E/hexo-theme-quiet">
            <img src="https://cdn.jsdelivr.net/gh/duogongneng/MyBlogImg/imggithub.png" alt="Quiet主题">
        </a>
        
    </div>
</div>
<div class='shelter'>
</div>
<style>
    .shelter{
        background-color: #333;
        opacity:0.5;
        cursor: pointer;
        display: none; 
        position: fixed;
        left: 0;
        top: 0; 
        right: 0;
        bottom: 0;
        z-index: 1998;
    }
    .sidebar {
        width: 66%;
        height: 100%;
        position: fixed;
        top: 0;
        right: -100%;
        bottom: 0;
        background: #fff;
        z-index: 1999;
        text-align: center;
        box-shadow: -6px 0 20px rgba(98, 94, 94, .815);
    }

    .topo {
        width: 100%;
        height: 200px;
        background: url(https://api.ixiaowai.cn/gqapi/gqapi.php) no-repeat;
        background-size: 100% 100%;
        position: relative;
        display: flex;
        align-items: flex-end
    }

    .topo h2 {
        color: #fff;
        z-index: 1;
        position: relative;
        margin: 0 0 10px 10px;
        font-size: 1.2em;
        box-sizing: border-box
    }

    .topo:before {
        content: '';
        background-image: url(/image/pattern.png);
        background-repeat: repeat;
        height: 100%;
        left: 0;
        position: absolute;
        top: 0;
        width: 100%;
        z-index: 1
    }

    .sidebar ul {
        width: 100%;
        margin-top: 50px
    }

    .sidebar ul li {
        height: 50px;
        list-style: none;
        font-size: 1.2em;
        text-align: right;
        margin-right: 10px
    }

    .sidebar ul li a {
        display: grid;
        color: #5d606a;
        text-overflow: ellipsis;
        width: 100%;
        text-decoration: none
    }

    .my_foot {
        width: 100%;
        padding: 10px;
        margin-bottom: 10px;
        position: absolute;
        bottom: 0
    }

    .my_foot a {
        text-decoration: none;
        margin-right: 10px;
        display: inline-block
    }

    .my_foot a img {
        width: 30px;
        height: 30px
    }
</style>

<script>
    $( function () {
	$( '.h-right-close>svg' )
		.click( function () {
			$( '.sidebar' )
				.animate( {
					right: "0"
				}, 500 );
			$( '.shelter' )
				.fadeIn( "slow" )
		} );
	$( '.shelter' )
		.click( function ( e ) {
			$( '.sidebar' )
				.animate( {
					right: "-100%"
				}, 500 );
			$( '.shelter' )
				.fadeOut( "slow" )
		} )
} )

</script>

<div class="post">
    <div class="post-header-background post-header-img"
    style="background: url('https://api.ixiaowai.cn/gqapi/gqapi.php')" 
>
    <div class="post-header-background-content">
        <ul class="post-header-tag">
            
        </ul>
        
        <h1>理论实验教学二</h1>
        <div class="post-header-info">
            <div class="post-header-info-author">
                
                    <svg t="1604839279282" class="icon" viewBox="0 0 1024 1024" version="1.1"
                        xmlns="http://www.w3.org/2000/svg" p-id="2901" width="20" height="20">
                        <path
                            d="M513 956.3c-247.7 0-448-200.3-448-448S265.3 66.2 513 66.2s448 200.3 448 448-200.3 442.1-448 442.1z m0-830.9c-212.2 0-388.8 170.7-388.8 388.8C124.2 726.3 294.9 903 513 903c212.2 0 388.8-170.7 388.8-388.8S725.2 125.4 513 125.4z m0 430.2c-94.2 0-170.7-76.5-170.7-170.7S418.8 207.8 513 207.8s170.7 76.5 170.7 170.7S607.2 555.6 513 555.6z m0-289.1c-64.6 0-112 52.8-112 112s47.4 117.9 112 117.9 112-52.8 112-112-47.4-117.9-112-117.9z m0 689.8c-135.7 0-259-58.7-341.9-158.9l-11.8-17.8 11.8-17.8c76.5-117.9 206.2-188.5 347.8-188.5 135.7 0 265 64.6 341.9 182.6l11.8 17.8-11.8 17.8C778 897.1 648.7 956.3 513 956.3zM230.3 773.2C300.9 849.7 406.9 897 513 897c112 0 218.1-47.4 288.6-129.8-70.5-88.2-170.7-135.6-282.7-135.6s-218.1 53.3-288.6 141.6z"
                            p-id="2902" fill="#ffffff"></path>
                    </svg>
                    
                <span class="post-header-info-author-text"> <a href="../../about">Joey</a></span>
                <div class="post-header-info-author-categories">
                    
                </div>
                <p>2022-11-30 19:39:38</p>
            </div>
        </div>
    </div>
</div>
    <div class="post-content" id="content">
  
  <div id="article" class="post-content-info">
    

    <h2 id="1-helloworld-c-的分步编译过程及说明"><a href="#1-helloworld-c-的分步编译过程及说明" class="headerlink" title="1. helloworld.c 的分步编译过程及说明"></a>1. helloworld.c 的分步编译过程及说明</h2><p>helloworld.c 代码如下:<br><img src="https://cdn.jsdelivr.net/gh/roudoukou/roudoukou.github.io/blog-img/FnA6TXVdX6OYlRKIxQnAh5lgQVI_.png"></p>
<blockquote>
<p>gcc 编译工具，部分参数功能：-E 预处理、-S 编译、-c 汇编、-o 链接</p>
</blockquote>
<p>(1)将 helloworld.c 文件预处理为 helloworld.i 文件<br>gcc -E helloworld.c -o helloworld.i<br><img src="https://cdn.jsdelivr.net/gh/roudoukou/roudoukou.github.io/blog-img/Fq53u7rGd8v2Ffa33OXRG-n_JhUd.png"><br>(2)将预处理文件 helloworld.i 文件编译为 helloworld.s 汇编文件<br>gcc -S helloworld.i -o helloworld.s<br><img src="https://cdn.jsdelivr.net/gh/roudoukou/roudoukou.github.io/blog-img/Fotsw12A0mz8mZx9tcNWmfruLDDu.png"><br>(3)将 helloworld.s 汇编文件汇编成目标代码 helloworld.o<br>gcc -c helloworld.s -o helloworld.o<br><img src="https://cdn.jsdelivr.net/gh/roudoukou/roudoukou.github.io/blog-img/FjTp38RKxflcs6WVLD2GSOevR8S2.png"><br>(4)将 helloworld.o 目标代码链接成为可执行文件 helloworld<br>gcc helloworld.o -o helloworld<br><img src="https://cdn.jsdelivr.net/gh/roudoukou/roudoukou.github.io/blog-img/FjuP7uGvefyn4a6_k4DI22SySLOp.png"></p>
<h2 id="2-字符集的选择"><a href="#2-字符集的选择" class="headerlink" title="2. 字符集的选择"></a>2. 字符集的选择</h2><p>(1)汉字输入法的配置：应用程序—&gt;系统工具—&gt;设置—&gt;Region&amp;Language—&gt;输入源，点击“+”按钮，即可选择安装如“汉语(Intelligent Pinyin)”这样的汉字拼音输入法。<br><img src="https://cdn.jsdelivr.net/gh/roudoukou/roudoukou.github.io/blog-img/Fo2wSdn1D03ENo_8m8wwXnt3DEZS.png"><br>(2)使用应用程序—&gt;附件—&gt;文本编辑器，打开 helloworld.c 文件后，进行“另存为”操作，注意窗口下面的“字符编码”是可以选择的，选择 GBK 字符编码，文件名修改成 helloworld-GBK.c<br><img src="https://cdn.jsdelivr.net/gh/roudoukou/roudoukou.github.io/blog-img/FhQlELDCCTXpjqlPB0ofrAXhVlS-.png"></p>
<p>保存后在终端中 ll 查看一下，对比一下相同内容的源程序文件，发现 GBK 格式的文件比原先的 UTF8 文件大小要小<br><img src="https://cdn.jsdelivr.net/gh/roudoukou/roudoukou.github.io/blog-img/Fsph6pVIOUX5YZpuRBGwa_41uNX2.png"><br>使用 cat 命令显示一下, 发现之前在 printf 中的中文乱码了<br><img src="https://cdn.jsdelivr.net/gh/roudoukou/roudoukou.github.io/blog-img/FlFBHV--IM8p8TQy3TePIwy7DbzP.png"><br>使用 gcc 将源程序编译成可执行程序后，执行结果会乱码, 之前的结果是 “你好, 世界”, 但是 GBK 编译之后的中文乱码了<br><img src="https://cdn.jsdelivr.net/gh/roudoukou/roudoukou.github.io/blog-img/FqLxduPiFd7QOsI8tOq8l8uDC-cT.png"><br>给终端设置编码格式为 GBK, 再次运行可执行文件, 发现 GBK 格式的运行结果没有乱码了, 但是之前的 UTF8 文件乱码了<br><img src="https://cdn.jsdelivr.net/gh/roudoukou/roudoukou.github.io/blog-img/FthSqtE5QNZJSDNU3fz33rLXI5xx.png"><br><img src="https://cdn.jsdelivr.net/gh/roudoukou/roudoukou.github.io/blog-img/FtflxDWzXsvaQO_08I6O55sfiyDs.png"><br>综上, 解决乱码的问题是让终端和文件保持着同一个编码格式</p>
<h2 id="3-helloworld-c-的模块化改进：helloworld-项目"><a href="#3-helloworld-c-的模块化改进：helloworld-项目" class="headerlink" title="3. helloworld.c 的模块化改进：helloworld 项目"></a>3. helloworld.c 的模块化改进：helloworld 项目</h2><p>helloworld.c 代码如下:<br><img src="https://cdn.jsdelivr.net/gh/roudoukou/roudoukou.github.io/blog-img/FnA6TXVdX6OYlRKIxQnAh5lgQVI_.png"></p>
<p>把该程序化成三个文件: main.c, hello.h, hello.c</p>
<blockquote>
<p>模块化的核心意义在于分离职责，它的关注点在于功能划分。 这里我总结了它的四大好处：保持输出一致性、提高设计效率、适用性强便于维护、便于协作。</p>
</blockquote>
<p>main.c 代码如下:</p>
<pre><code class="c">/*main.c程序源代码, 工程文件中, 只有main.c有main主函数*/

// 注意, main.c不直接使用stdio.h, 使用我们自定义的hello.h
#include &quot;hello.h&quot;
int main()
&#123;
        // main.c调用功能函数myprint()
        myprint(&quot;Hello World!你好,世界!&quot;);
        return 0;
&#125;
</code></pre>
<p><img src="https://cdn.jsdelivr.net/gh/roudoukou/roudoukou.github.io/blog-img/FjBEHZHjydKQBO8E8MrinRbw46oT.png"><br>hello.h 代码如下:</p>
<blockquote>
<p>#ifndef 它是 if not define 的简写，是宏定义的一种，实际上确切的说，这应该是预处理功能三种（宏定义、文件包含、条件编译）中的一种—-条件编译。</p>
</blockquote>
<pre><code class="c">/*hello.h头文件源代码*/
#ifndef FUQIANG_H
#define FUQIANG_H
        void myprint(const char *name);
#endif
</code></pre>
<p><img src="https://cdn.jsdelivr.net/gh/roudoukou/roudoukou.github.io/blog-img/Fva3NGqlROyPH6rTVCNJMdrzGrVc.png"><br>hello.c 代码如下:</p>
<pre><code class="c">/*hello.c定义文件源代码, 在hello.c中具体实现myprint函数具体功
能*/

#include &lt;stdio.h&gt;
void myprint(const char *name)
&#123;
        printf(name);
&#125;
</code></pre>
<p><img src="https://cdn.jsdelivr.net/gh/roudoukou/roudoukou.github.io/blog-img/FprxMqsGWXW1oWrEvL-scG3Wzp4Y.png"></p>
<h2 id="4-helloworld-项目的静态编译、动态编译及运行"><a href="#4-helloworld-项目的静态编译、动态编译及运行" class="headerlink" title="4. helloworld 项目的静态编译、动态编译及运行"></a>4. helloworld 项目的静态编译、动态编译及运行</h2><p><strong>(1)直接编译</strong><br>直接 gcc 编译 hello.c 并输出可执行程序是不行的，因为 hello.c 中没有 main 函数，直接编译 main.c 生成可执行程序也不成功，因为 main.c 中的 myprint 函数没有实现，需要将两个 c 程序文件先编译为目标文件，然后将两个目标文件再生成可执行程序：<br><img src="https://cdn.jsdelivr.net/gh/roudoukou/roudoukou.github.io/blog-img/FjahOnzMma90drEToTI2FwOx7817.png"><br><strong>(2)静态链接</strong><br>使用静态链接，将把所有.a 的静态库文件链接到最终可执行文件上。<br>注意：请先安装好 libc-static 静态链接库<br>使用 ar 命令将目标文件.o 转换成.a 静态库文件:<br>ar rcs libmyhello.a hello.o<br>使用 gcc -static 来进行静态链接<br>gcc -o helloStatic main.c -static -L. -lmyhello<br>使用常规-lxxx 方式，这里的 xxx 是静态库名称，也可以直接指定静态库文件名：<br>gcc -o helloStatic main.c -static -L. -l:libmyhello.a<br>说明：-L. 参数告诉 gcc，当前目录也是搜索库文件的路径<br><img src="https://cdn.jsdelivr.net/gh/roudoukou/roudoukou.github.io/blog-img/FtYdpjO3cT7P-OM8oRx_jplxxY2G.png"><br><strong>(3)动态链接</strong><br>使用动态链接，共享.so 动态库文件，最终可执行文件将小很多。<br>gcc -shared -fPIC -c hello.c<br>gcc -shared -fPIC -o libmyhello.so hello.o<br>第一条命令将 hello.c 编译生成 hello.o 目标代码，第二条命令将 hello.o 生成动态链接库文件 libmyhello.so<br>参数说明：<br>-share 代表是动态链接库<br>-fPIC 命令行标记告诉 GCC 产生的代码不要包含对函数和变量具体内存位置的引用，这是因为现在还无法知道使用该消息代码的应用程序会将它连接到哪一段内存地址空间。这样编译出的 hello.o 可以被用于建立共享链接库<br>最后 gcc -o hello main.c -L. -lmyhello 生成 hello 可执行文件，注意执行的时候可能会报错，说找不到这个 libmyhello.so 文件。<br><img src="https://cdn.jsdelivr.net/gh/roudoukou/roudoukou.github.io/blog-img/FlVKsLr1lBfRwqARc6ieZxdHToEK.png"></p>
<h2 id="5-动态链接库的位置与相关设置"><a href="#5-动态链接库的位置与相关设置" class="headerlink" title="5. 动态链接库的位置与相关设置"></a>5. 动态链接库的位置与相关设置</h2><p>提示：如果动态库文件 libmyhello.so 放在操作系统系统库文件目录下，那么执行动态链接生成的可执行程序不会报错，如果放在其他目录下，则需要使用 export 命令来设置 LD_LIBRARY_PATH 环境变量。<br>临时修改，log out 之后就失效<br>在命令行输入 export LD_LIBRARY_PATH&#x3D;.&#x2F;<br>[root@xiamu compilers-principles]# export LD_LIBRARY_PATH&#x3D;.&#x2F;<br>再次运行 hello 就不会报错了<br><img src="https://cdn.jsdelivr.net/gh/roudoukou/roudoukou.github.io/blog-img/FnDUTzIpjp6ciSOJ6OjymxZMze7Z.png"></p>
<h2 id="6-汉诺塔程序的设计与运行"><a href="#6-汉诺塔程序的设计与运行" class="headerlink" title="6. 汉诺塔程序的设计与运行"></a>6. 汉诺塔程序的设计与运行</h2><p>将汉诺塔程序改造为汉诺塔项目，请进行：<br>（1）对 hanoi 函数进行注释说明，并编译执行提供的汉诺塔递归程序；<br><img src="https://cdn.jsdelivr.net/gh/roudoukou/roudoukou.github.io/blog-img/FtYGh33chcunukfpe6MWFmVv4960.png"><br>hanoi 代码:</p>
<pre><code class="c">#include &lt;stdio.h&gt;
int c = 0;// 用来记录当前是第几步
void move(char x, int n, char z) //输出x移动到z
&#123;
    printf(&quot;第%i步: 将%i号盘从%c移到%c\n&quot;, ++c, n, x, z);
&#125;
void hanoi(int n, char x, char y, char z)
// 圆盘x利用y移动到z
&#123;
    if (n == 1)
        move(x, 1, z);
    else
    &#123;
        hanoi(n-1, x, z, y);
        move(x, n, z);
        hanoi(n-1, y, x, z);
    &#125;
&#125;
int main()
&#123;
    int n;
    printf(&quot;3个塔座为a, b, c, 圆盘最初在a座, 借助b座移到c座. 请输入圆盘数: &quot;);
    scanf(&quot;%d&quot;, &amp;n);
    hanoi(n, &#39;a&#39;, &#39;b&#39;, &#39;c&#39;);

    return 0;
&#125;
</code></pre>
<p>（2）尝试使用不同的字符集（GBK、UTF-8）保存源程序，编译执行看效果；<br><img src="https://cdn.jsdelivr.net/gh/roudoukou/roudoukou.github.io/blog-img/Fibdh8NnhFhwiTyCGGCV-ezViTh0.png"><br>当前终端的编码是 UTF8, 所以运行 GBK 的可执行文件的代码会显示乱码<br><img src="https://cdn.jsdelivr.net/gh/roudoukou/roudoukou.github.io/blog-img/Fv_7ruN8a0wtyGbC-zvFV7sMX_Eq.png"><br>（3）将提供的汉诺塔程序改造为模块化的 C 语言项目；</p>
<p>模块化文件如下, hanoi-GBK.c 是 GBK 的格式的代码, 与模块化无关<br>hanoi.c 是汉诺塔操作代码<br>main.c 是主程序<br>move.c 是移动操作代码<br>mycin.c 是输入操作代码<br>mycout.c 是输出操作代码<br><img src="https://cdn.jsdelivr.net/gh/roudoukou/roudoukou.github.io/blog-img/FiJv1SahgbPDvcXmi5aq3p68nUw4.png"><br>hanoi.h</p>
<pre><code class="c">#ifndef HANOI_H
#define HANOI_H
extern int c;
void mycout(const char *name, ...);
void mycin(const char *name, ...);
void hanoi(int n, char x, char y, char z);
void move(char x, int n, char z);
#endif

</code></pre>
<p>hanoi.c</p>
<pre><code class="c">
#include &quot;hanoi.h&quot;
void hanoi(int n, char x, char y, char z)
// 圆盘x利用y移动到z
&#123;
    if (n == 1)
        move(x, 1, z);
    else
    &#123;
        hanoi(n-1, x, z, y);
        move(x, n, z);
        hanoi(n-1, y, x, z);
    &#125;
&#125;
</code></pre>
<p>main.c</p>
<pre><code class="c">#include &quot;hanoi.h&quot;
int c = 0;// 用来记录当前是第几步
/*
void move(char x, int n, char z) //输出x移动到z
&#123;
        mycout(&quot;第%i步: 将%i号盘从%c移到%c\n&quot;, ++c, n, x, z);
&#125;
*/
/*
void hanoi(int n, char x, char y, char z)
// 圆盘x利用y移动到z
&#123;
    if (n == 1)
        move(x, 1, z);
    else
    &#123;
        hanoi(n-1, x, z, y);
        move(x, n, z);
        hanoi(n-1, y, x, z);
    &#125;
&#125;
*/

int main()
&#123;
        int n;
        mycout(&quot;3个塔座为a, b, c, 圆盘最初在a座, 借助b座移到c座. 请输&gt;入圆盘数: &quot;);
        mycin(&quot;%d&quot;, &amp;n);
        hanoi(n, &#39;a&#39;, &#39;b&#39;, &#39;c&#39;);

        return 0;
&#125;

</code></pre>
<p>move.c</p>
<pre><code class="c">
#include &quot;hanoi.h&quot;
int c;
void move(char x, int n, char z) //输出x移动到z
&#123;
        mycout(&quot;第%i步: 将%i号盘从%c移到%c\n&quot;, ++c, n, x, z);
&#125;

</code></pre>
<p>mycin.c</p>
<pre><code class="c">#include &lt;stdio.h&gt;
#include &quot;hanoi.h&quot;
void mycin(const char *name, ...)
&#123;
        scanf(name);
&#125;

</code></pre>
<p>mycout.c</p>
<pre><code class="c">#include &lt;stdio.h&gt;
#include &quot;hanoi.h&quot;
void mycout(const char *name, ...)
&#123;
        printf(name);
&#125;
</code></pre>
<p>（4）对汉诺塔 C 语言项目进行直接编译、静态编译，并运行；<br>**直接编译: **<br>[root@xiamu hanoi]# gcc -c *.c<br>[root@xiamu hanoi]# gcc main.o hanoi.o mycout.o mycin.o move.o -o hanoi<br>[root@xiamu hanoi]# .&#x2F;hanoi<br><img src="https://cdn.jsdelivr.net/gh/roudoukou/roudoukou.github.io/blog-img/Fj5qZP-ypuIS9CGs7I0Q8hSauNrJ.png"><br>**静态编译: **</p>
<blockquote>
<p>ar 是 Linux 的一个备份压缩命令，它可以将多个文件打包成一个备份文件（也叫归档文件），也可以从备份文件中提取成员文件。ar 命令最常见的用法是将目标文件打包为静态链接库。</p>
<ul>
<li>参数 r 用来替换库中已有的目标文件，或者加入新的目标文件。</li>
<li>参数 c 表示创建一个库。不管库否存在，都将创建。</li>
<li>参数 s 用来创建目标文件索引，这在创建较大的库时能提高速度。</li>
</ul>
</blockquote>
<p>[root@xiamu hanoi]# gcc -c *.c<br>[root@xiamu hanoi]# ar rs libhanoi.a main.o mycin.o mycout.o move.o hanoi.o<br>[root@xiamu hanoi]# gcc main.c -L. -lhanoi -Ihanoi -o hanoi2<br>[root@xiamu hanoi]# .&#x2F;hanoi2<br><img src="https://cdn.jsdelivr.net/gh/roudoukou/roudoukou.github.io/blog-img/FoRdm18hzZU7hfQuy79lDciMqZSp.png"><br>（5）对汉诺塔 C 语言项目进行动态编译，并运行；<br><strong>动态编译</strong></p>
<blockquote>
<p>-L 选项告诉编译器去哪里找需要的库文件，-L.表示在当前目录找。-lstack 告诉编译器要链 接 libstack 库，-I 选项告诉编译器去哪里找头文件。注意，即使库文件就在当前目录，编译器默认 也不会去找的，所以-L.选项不能少。</p>
</blockquote>
<p>动态编译之后运行会报错, 只需要加上 export LD_LIBRARY_PATH&#x3D;.&#x2F; 再次运行就不会报错了<br>[root@xiamu hanoi]# gcc -shared -fPIC -c *.c<br>[root@xiamu hanoi]# gcc -shared -fPIC -o libhanoi.so main.o hanoi.o mycout.o mycin.o move.o<br>[root@xiamu hanoi]# gcc -o hanoi main.c -L. -lhanoi<br>[root@xiamu hanoi]# .&#x2F;hanoi<br>.&#x2F;hanoi: error while loading shared libraries: libhanoi.so: cannot open shared object file: No such file or directory<br>[root@xiamu hanoi]# export LD_LIBRARY_PATH&#x3D;.&#x2F;<br>[root@xiamu hanoi]# .&#x2F;hanoi<br>没输入 export LD_LIBRARY_PATH&#x3D;.&#x2F;编译运行就会报错<br><img src="https://cdn.jsdelivr.net/gh/roudoukou/roudoukou.github.io/blog-img/FgZdX1qIqHT05o1TEa7uEjMJtStF.png"><br>输入 export LD_LIBRARY_PATH&#x3D;.&#x2F;过后的编译运行就不会报错<br><img src="https://cdn.jsdelivr.net/gh/roudoukou/roudoukou.github.io/blog-img/FhXdia4dZwlnnxSKvpLUxvgtF59p.png"><br>（6）比较直接编译、静态编译、动态编译生成的可执行文件的不同；<br><img src="https://cdn.jsdelivr.net/gh/roudoukou/roudoukou.github.io/blog-img/Fvm6BQcamgdikbYZaMvCQwh9UgG8.png"><br>三种编译的可执行文件大小最终几乎差不多 1.直接编译: 直接使用 gcc 源文件 -o 目标文件就可以编译出结果 2.静态编译：编译器在编译可执行文件时，把需要用到的对应动态链接库(.so 或.ilb)中的部分提取出来，链接到可执行文件中去， 使可执行文件在运行时不需要依赖于动态链接库. 3.动态编译: 动态编译的可执行文件需要附带一个的动态链接库，在执行时，需要调用其对应动态链接库中的命令。<br>（7）想办法让动态编译后的执行程序能正常运行起来。<br>终端输入如下<br>[root@xiamu hanoi]# export LD_LIBRARY_PATH&#x3D;.&#x2F;</p>

  </div>
  <div id="gitalk-container"></div>
</div>

<script>
  
Fancybox.bind('[data-fancybox="fancybox-gallery-img"]', {
  dragToClose: true,
  Toolbar: true,
  closeButton: "top",
  Image: {
    zoom: true,
  },
  on: {
    initCarousel: (fancybox) => {
      const slide = fancybox.Carousel.slides[fancybox.Carousel.page];
      fancybox.$container.style.setProperty(
        "--bg-image",
        `url("${slide.$thumb.src}")`
      );
    },
    "Carousel.change": (fancybox, carousel, to, from) => {
      const slide = carousel.slides[to];
      fancybox.$container.style.setProperty(
        "--bg-image",
        `url("${slide.$thumb.src}")`
      );
    },
  },
});
</script>

<style>
    #noneimg img {
        display: none;
        z-index: 9999;
        /* width: 600px !important; */
        min-width: 0%;
        max-width: 90%;
        max-height: 80%;
        border-radius: 0px;
        position: fixed;
        box-shadow: 0 0 0px #c3c3c300 !important;
        left: 0;
        top: 0;
        right: 0;
        bottom: 0;
        margin: auto !important;
    }

    @media screen and (max-width:600px) {
        #noneimg img {
            max-width: 88%
        }
    }
</style>

    <div class="post-paging">
    
    <a href="/2022/12/01/%E5%AD%A6%E4%B9%A0%E6%80%BB%E7%BB%93/">
        <div class="post-paging-last">
            <span>上一篇</span>
            <p>学习总结</p>
        </div>
    </a>
    

    
    <a href="/2022/11/30/%E7%90%86%E8%AE%BA%E5%AE%9E%E9%AA%8C%E6%95%99%E5%AD%A6%E4%B8%80/">
        <div class="post-paging-next">
            <span>下一篇</span>
            <p>理论实验教学一</p>
        </div>
    </a>
    
</div>
</div>
		
<div class="footer">
	<div class="Copyright">
		©2023 By Joey. 主题：<a
			style="text-decoration: none;display: contents; color: #898F9F;"
			target="_blank" rel="noopener" href="https://github.com/79e/hexo-theme-quiet">Quiet</a>
	</div>
	<div class="contact">
		
		<a target="_blank" rel="noopener" href="https://github.com/79E/hexo-theme-quiet">
			<img src="https://cdn.jsdelivr.net/gh/duogongneng/MyBlogImg/imggithub.png" alt="Quiet主题">
		</a>
		
	</div>
</div>

<script src="/js/gotop.js"></script>


<style type="text/css">
    @media screen and (min-width: 600px) {
        .goTop>span {
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 10px;
            width: 40px;
            height: 40px;
            cursor: pointer;
            opacity: 0.8;
            background: rgba(18, 24, 58, 0.06);
            text-align: center;
            transition: border .5s;
            border: 1px solid rgba(18, 24, 58, 0.06);

            -moz-transition: border .5s;
            /* Firefox 4 */
            -webkit-transition: border .5s;
            /* Safari 和 Chrome */
            -o-transition: border .5s;
            /* Opera */
        }

        .goTop>span:hover {
            border: 1px solid #6680B3;
        }


        .goTop {
            position: fixed;
            right: 30px;
            bottom: 80px;
        }

        .goTop>span>svg {
            width: 20px;
            height: 20px;
            opacity: 0.7;
        }

    }

    @media screen and (max-width: 600px) {
        .goTop {
            display: none;
        }
    }
</style>
<div class="goTop" id="js-go_top">
    <span>
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">
            <g>
                <path d="M13 12v8h-2v-8H4l8-8 8 8z"></path>
            </g>
        </svg>
    </span>
</div>
<script>
    $( '#js-go_top' )
	.gotoTop( {
		offset: 500,
		speed: 300,
		animationShow: {
			'transform': 'translate(0,0)',
			'transition': 'transform .5s ease-in-out'
		},
		animationHide: {
			'transform': 'translate(100px,0)',
			'transition': 'transform .5s ease-in-out'
		}
	} );
</script>


    <!-- Gitalk -->
    <script>
        const data = '{"clientID":"02b3c","clientSecret":"adfc7b4","repo":"gimment","owner":"duneng","admin":"duneng"}'
        const gitalk = new Gitalk({
            ...JSON.parse( data),
            id:location.pathname,
            distractionFreeMode:false
        })
        
        if(Boolean('true')){
            gitalk.render('gitalk-container')
        }
    </script>

<script>
	console.log('\n %c Hexo-Quiet 主题 %c https://github.com/79e/hexo-theme-quiet \n', 'color: #fadfa3; background: #030307; padding:5px 0;', 'background: #fadfa3; padding:5px 0;')
</script>
	</body>
</html>

